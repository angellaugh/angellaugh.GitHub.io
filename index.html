<!DOCTYPE html>
<html lang="zh-Hans">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.2">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/uploads/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/uploads/favicon-16x16.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"angellaugh.github.io","root":"/","scheme":"Mist","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"always","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":false,"style":"mac"},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="技术，生活，艺术，旅行，都记录下来">
<meta property="og:type" content="website">
<meta property="og:title" content="Angellaugh&#39;s blog">
<meta property="og:url" content="https://angellaugh.github.io/index.html">
<meta property="og:site_name" content="Angellaugh&#39;s blog">
<meta property="og:description" content="技术，生活，艺术，旅行，都记录下来">
<meta property="og:locale">
<meta property="article:author" content="Angellaugh">
<meta property="article:tag" content="java, python, javascript, linux, storage, db, performance">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://angellaugh.github.io/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-Hans'
  };
</script>

  <title>Angellaugh's blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<link rel="alternate" href="/atom.xml" title="Angellaugh's blog" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Angellaugh's blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">记录琐碎</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>Archives</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i>About</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="https://angellaugh.github.io/2023/05/02/Oauth2.0ClientAuthentication/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/uploads/avatar.jpg">
      <meta itemprop="name" content="Angellaugh">
      <meta itemprop="description" content="技术，生活，艺术，旅行，都记录下来">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Angellaugh's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/05/02/Oauth2.0ClientAuthentication/" class="post-title-link" itemprop="url">Oauth2.0 client authentication</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2023-05-02 19:30:00" itemprop="dateCreated datePublished" datetime="2023-05-02T19:30:00+00:00">2023-05-02</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Teckknowledge/" itemprop="url" rel="index"><span itemprop="name">Teckknowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Client-Authentication-Methods"><a href="#Client-Authentication-Methods" class="headerlink" title="Client Authentication Methods"></a>Client Authentication Methods</h1><h2 id="1-Token-Endpoint"><a href="#1-Token-Endpoint" class="headerlink" title="1. Token Endpoint"></a>1. Token Endpoint</h2><p><img src="/uploads/182031511625388.png"><br><img src="vx_images/182031511625388.png"></p>
<h2 id="2-client-type"><a href="#2-client-type" class="headerlink" title="2. client_type"></a>2. client_type</h2><p><img src="/uploads/316472234951139.png"><br><img src="vx_images/316472234951139.png"></p>
<h2 id="3-client-secret-post-OIDC-Core-9-Client-Authentication"><a href="#3-client-secret-post-OIDC-Core-9-Client-Authentication" class="headerlink" title="3. client_secret_post (OIDC Core, 9. Client Authentication)."></a>3. client_secret_post <a target="_blank" rel="noopener" href="https://openid.net/specs/openid-connect-core-1_0.html">(OIDC Core, 9. Client Authentication).</a></h2><p>在传统的方式中，首先授权服务器会生成一对clientID 和 client secret，并提前将这对信息提供给客户端应用程序。<br>当client 发送 token request时， 会带上 clientID 和 client secret， authorization server 会校验这一对密码是否正确。</p>
<p><img src="/uploads/477822074947007.png"><br><img src="vx_images/477822074947007.png"></p>
<h2 id="4-client-secret-basicrfc7617"><a href="#4-client-secret-basicrfc7617" class="headerlink" title="4. client_secret_basicrfc7617"></a>4. client_secret_basic<a target="_blank" rel="noopener" href="https://tools.ietf.org/html/rfc7617">rfc7617</a></h2><h3 id="4-1-将-clientID-和-client-secret-写成string格式："><a href="#4-1-将-clientID-和-client-secret-写成string格式：" class="headerlink" title="4.1. 将 clientID 和 client secret 写成string格式："></a>4.1. 将 clientID 和 client secret 写成string格式：</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;&#123;Client ID&#125;: &#123;Client Secret&#125;&quot;</span><br></pre></td></tr></table></figure>
<h3 id="4-2-用base64-加密"><a href="#4-2-用base64-加密" class="headerlink" title="4.2. 用base64 加密"></a>4.2. 用base64 加密</h3><h3 id="4-3-在令牌请求的授权头中嵌入BASE64字符串。"><a href="#4-3-在令牌请求的授权头中嵌入BASE64字符串。" class="headerlink" title="4.3. 在令牌请求的授权头中嵌入BASE64字符串。"></a>4.3. 在令牌请求的授权头中嵌入BASE64字符串。</h3><p><img src="vx_images/581553216911333.png"></p>
<p>client_secret_post and client_secret_basic are client authentication methods described in RFC 6749, 2.3.1. Client Password.</p>
<h2 id="5-client-secret-jwt-无需把clientID-和-clientSecret-加入token-request-请求参数中"><a href="#5-client-secret-jwt-无需把clientID-和-clientSecret-加入token-request-请求参数中" class="headerlink" title="5. client_secret_jwt  无需把clientID 和 clientSecret 加入token request 请求参数中"></a>5. client_secret_jwt  无需把clientID 和 clientSecret 加入token request 请求参数中</h2><h3 id="5-1-client端准备一个data"><a href="#5-1-client端准备一个data" class="headerlink" title="5.1. client端准备一个data"></a>5.1. client端准备一个data</h3><h3 id="5-2-用client-secret-为-data生成-签名-signature"><a href="#5-2-用client-secret-为-data生成-签名-signature" class="headerlink" title="5.2. 用client secret 为 data生成 签名 signature"></a>5.2. 用client secret 为 data生成 签名 signature</h3><h3 id="5-3-在token-request-请求中包括data-和signature。"><a href="#5-3-在token-request-请求中包括data-和signature。" class="headerlink" title="5.3. 在token request 请求中包括data 和signature。"></a>5.3. 在token request 请求中包括data 和signature。</h3><p><img src="/uploads/345122512532873.png"><br><img src="vx_images/345122512532873.png"></p>
<h3 id="5-4-data-是有格式要求的："><a href="#5-4-data-是有格式要求的：" class="headerlink" title="5.4. data 是有格式要求的："></a>5.4. data 是有格式要求的：</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">POST /token.oauth2 HTTP/1.1</span><br><span class="line">     Host: as.example.com</span><br><span class="line">     Content-Type: application/x-www-form-urlencoded</span><br><span class="line"></span><br><span class="line">     grant_type=authorization_code&amp;</span><br><span class="line">     code=n0esc3NRze7LTCu7iYzS6a5acc3f0ogp4&amp;</span><br><span class="line">     client_assertion_type=urn%3Aietf%3Aparams%3Aoauth%3A</span><br><span class="line">     client-assertion-type%3Ajwt-bearer&amp;</span><br><span class="line">     client_assertion=eyJhbGciOiJSUzI1NiIsImtpZCI6IjIyIn0.</span><br><span class="line">     eyJpc3Mi[...omitted for brevity...].</span><br><span class="line">     cC4hiUPo[...omitted for brevity...]</span><br></pre></td></tr></table></figure>
<h3 id="5-5-data-是有格式要求的："><a href="#5-5-data-是有格式要求的：" class="headerlink" title="5.5. data 是有格式要求的："></a>5.5. data 是有格式要求的：</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">POST /token.oauth2 HTTP/1.1</span><br><span class="line">     Host: as.example.com</span><br><span class="line">     Content-Type: application/x-www-form-urlencoded</span><br><span class="line"></span><br><span class="line">     grant_type=authorization_code&amp;</span><br><span class="line">     code=n0esc3NRze7LTCu7iYzS6a5acc3f0ogp4&amp;</span><br><span class="line">     client_assertion_type=urn%3Aietf%3Aparams%3Aoauth%3A</span><br><span class="line">     client-assertion-type%3Ajwt-bearer&amp;</span><br><span class="line">     client_assertion=eyJhbGciOiJSUzI1NiIsImtpZCI6IjIyIn0.</span><br><span class="line">     eyJpc3Mi[...omitted for brevity...].</span><br><span class="line">     cC4hiUPo[...omitted for brevity...]</span><br></pre></td></tr></table></figure>

<h3 id="5-6-签名后生成-JWT，-JWT-被称为-client-assertion"><a href="#5-6-签名后生成-JWT，-JWT-被称为-client-assertion" class="headerlink" title="5.6. 签名后生成 JWT， JWT 被称为 client assertion"></a>5.6. 签名后生成 JWT， JWT 被称为 client assertion</h3><h4 id="5-6-1-JWT-被作为-client-assertion-请求参数的值包含在token-request-请求中；"><a href="#5-6-1-JWT-被作为-client-assertion-请求参数的值包含在token-request-请求中；" class="headerlink" title="5.6.1. JWT 被作为 client_assertion 请求参数的值包含在token request 请求中；"></a>5.6.1. JWT 被作为 client_assertion 请求参数的值包含在token request 请求中；</h4><h4 id="5-6-2-同时需要包括-client-assertion-type-请求参数，是一个固定字符串：urn-ietf-params-oauth-client-assertion-type-jwt-bearer；"><a href="#5-6-2-同时需要包括-client-assertion-type-请求参数，是一个固定字符串：urn-ietf-params-oauth-client-assertion-type-jwt-bearer；" class="headerlink" title="5.6.2. 同时需要包括 client_assertion_type 请求参数，是一个固定字符串：urn:ietf:params:oauth:client-assertion-type:jwt-bearer；"></a>5.6.2. 同时需要包括 client_assertion_type 请求参数，是一个固定字符串：urn:ietf:params:oauth:client-assertion-type:jwt-bearer；</h4><p><img src="/uploads/393604423658709.png"><br><img src="vx_images/393604423658709.png"></p>
<h2 id="6-private-key-jwt"><a href="#6-private-key-jwt" class="headerlink" title="6. private_key_jwt"></a>6. private_key_jwt</h2><p>这个是在client端，生成一对非对称密钥： public key &amp; private key；<br>public key 发送到 authorization server中；<br>private key 来加密data， 签名；<br>然后将这种JWT 加入token request，发给authorization sever， 进行验证；</p>
<p><img src="/uplo/25595270559249.png"><br><img src="vx_images/25595270559249.png"></p>
<h2 id="7-tls-client-auth"><a href="#7-tls-client-auth" class="headerlink" title="7. tls_client_auth"></a>7. tls_client_auth</h2><h2 id="8-self-signed-tls-client-auth"><a href="#8-self-signed-tls-client-auth" class="headerlink" title="8. self_signed_tls_client_auth"></a>8. self_signed_tls_client_auth</h2><p><img src="/uploads/169442698899543.png"><br><img src="vx_images/169442698899543.png"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="https://angellaugh.github.io/2023/04/29/docker_study/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/uploads/avatar.jpg">
      <meta itemprop="name" content="Angellaugh">
      <meta itemprop="description" content="技术，生活，艺术，旅行，都记录下来">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Angellaugh's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/04/29/docker_study/" class="post-title-link" itemprop="url">Docker_study some points</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2023-04-29 20:34:00" itemprop="dateCreated datePublished" datetime="2023-04-29T20:34:00+00:00">2023-04-29</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Teckknowledge/" itemprop="url" rel="index"><span itemprop="name">Teckknowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="VM"><a href="#VM" class="headerlink" title="VM"></a>VM</h2><h3 id="完整的OS，-hypervisor"><a href="#完整的OS，-hypervisor" class="headerlink" title="完整的OS， hypervisor"></a>完整的OS， hypervisor</h3><p>利用hypervisor 做物理硬件和OS之间的中间虚拟化层，比如微软的Hyper-V。<br>占用宿主机的 内存，硬盘资源，像是装了个完整的OS。</p>
<h3 id="扩展管理工具：-kvm-penstack"><a href="#扩展管理工具：-kvm-penstack" class="headerlink" title="扩展管理工具： kvm penstack"></a>扩展管理工具： kvm penstack</h3><h3 id="优点"><a href="#优点" class="headerlink" title="优点"></a>优点</h3><p>a. 环境隔离；<br>b. 应用迁移 –&gt; clone;  LNMP: 代表了一种流行的网站服务器软件组合：Linux、Nginx、MySQL 和 PHP，  应用开发env<br>c. 省钱</p>
<h3 id="缺点"><a href="#缺点" class="headerlink" title="缺点"></a>缺点</h3><p>不管是否使用，都占用宿主机固定的resource，利用率低，无法应对瞬时并发压力。</p>
<h2 id="Docker-（DotCloud-基于linux的-容器技术LXC）"><a href="#Docker-（DotCloud-基于linux的-容器技术LXC）" class="headerlink" title="Docker （DotCloud, 基于linux的 容器技术LXC）"></a>Docker （DotCloud, 基于linux的 容器技术LXC）</h2><h3 id="基于namespace的资源隔离"><a href="#基于namespace的资源隔离" class="headerlink" title="基于namespace的资源隔离"></a>基于namespace的资源隔离</h3><p>网络资源隔离（ip, port，网卡，接口）<br>进程资源隔离 （pid范围）<br>文件系统隔离（绝对路径）</p>
<h3 id="LXC"><a href="#LXC" class="headerlink" title="LXC"></a>LXC</h3><p>libcontainer, 基于LXC 用golang开发</p>
<h3 id="优缺点"><a href="#优缺点" class="headerlink" title="优缺点"></a>优缺点</h3><p>Docker 进程是对某个程序的封装，提供了独立运行的隔离环境。</p>
<h2 id="docker和vm的共同点，以及优缺点"><a href="#docker和vm的共同点，以及优缺点" class="headerlink" title="docker和vm的共同点，以及优缺点"></a>docker和vm的共同点，以及优缺点</h2><h3 id="共同点："><a href="#共同点：" class="headerlink" title="共同点："></a>共同点：</h3><pre><code>两者都提供了一种在同一台物理机上运行多个独立环境的方式。
都可以在宿主机上隔离应用程序和操作系统，提高软件的兼容性和安全性。
它们都支持快速部署和管理，便于应用程序的开发、测试和发布。
</code></pre>
<h3 id="不同点："><a href="#不同点：" class="headerlink" title="不同点："></a>不同点：</h3><pre><code>实现方式：VM 在宿主机上运行完整的操作系统副本，包括内核和系统资源。而 Docker 使用容器技术，在宿主机操作系统上共享内核，每个容器只包含应用程序及其依赖项。
资源占用：VM 通常需要更多的系统资源，因为它们运行完整的操作系统。而 Docker 容器更轻量级，启动速度更快，资源占用更低。
系统支持：VM 可以运行不同类型的操作系统，如 Windows、Linux 和 macOS。Docker 最初仅支持 Linux，但现在也支持 Windows 和 macOS，尽管在某些方面可能存在限制。
</code></pre>
<h3 id="流行度："><a href="#流行度：" class="headerlink" title="流行度："></a>流行度：</h3><pre><code>Docker 和容器技术 在云计算、微服务和 DevOps 环境中大量使用。容器技术可以更好地支持快速迭代开发、轻量级部署和资源优化。
然而，在某些需要更高安全性和隔离性的场景中，VM 仍然具有一定的优势。
</code></pre>
<h4 id="DevOps"><a href="#DevOps" class="headerlink" title="DevOps"></a>DevOps</h4><pre><code>是一种软件开发和交付方法，它强调开发（Dev）和运维（Ops）团队之间的紧密协作、快速迭代和持续改进。
</code></pre>
<p>在实践中，DevOps 通常涉及到以下技术和工具：</p>
<pre><code>版本控制：如 Git，用于管理代码和协作开发。
持续集成/持续部署：如 Jenkins、GitLab CI/CD 和 Travis CI，用于自动化构建、测试和部署代码。
配置管理：如 Ansible、Puppet 和 Chef，用于自动化服务器和应用程序配置。
容器化和虚拟化：如 Docker 和 Kubernetes，用于轻量级部署和资源管理。
监控和日志：如 Prometheus、Grafana 和 ELK Stack（Elasticsearch, Logstash, Kibana），用于收集、分析和可视化系统指标和日志。
</code></pre>
<h2 id="K8s"><a href="#K8s" class="headerlink" title="K8s"></a>K8s</h2><p>容器随时创建，随时删除，IP不固定，所以交互要走主机名， 每次容器启动，自动对应容器主机名和容器IP；<br>如何维护iptables？<br>如何保证高可用负载均衡的实施？ 本质还是操作镜像，维护容器<br>        for instance： nginx 的 upstream {container 1; container2; container3; container4}<br>        如何保证一直存活？ 如何保证统一升级，统一回滚？</p>
<h3 id="dockerfile"><a href="#dockerfile" class="headerlink" title="dockerfile"></a>dockerfile</h3><p>是个脚本，写部署逻辑（部署jdk， 安装python，sed修改配置，导入源码等一些列action）， 构建容器用的。</p>
<p>docker的生命周期 2  大要素： 1. 镜像构建； 2. 基于镜像，运行容器；</p>
<p>DevOps 部署流水线，环境一致性： </p>
<pre><code>1. githhub 提供源码；
2. docker hub / registry(私有) 存的是 dockerfile 构建的镜像；
3. Jenkins ：
    1. 从github 下载源码；
    2. 从docker hub 下载镜像；

4. 部署 test env;
5. 部署 生产 env；
</code></pre>
<p><strong>Dockerfile、镜像（Image）和容器（Container）是 Docker 技术中的三个关键概念。它们之间的关系如下：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">1. Dockerfile：Dockerfile 是一个包含了如何构建一个 Docker 镜像的指令集的文本文件。它定义了基础镜像、应用程序代码、</span><br><span class="line">依赖关系、配置文件、运行时环境以及其他相关设置。开发人员可以通过编写 Dockerfile 来定制自己的镜像，满足特定应用程序的需求。</span><br><span class="line"></span><br><span class="line">2. 镜像（Image）：镜像是一个轻量级、可执行的独立软件包，包含了运行应用程序所需的所有内容，如代码、运行时环境、系统工具、</span><br><span class="line">库和设置。通过 Dockerfile 构建完成后，会生成一个镜像。镜像可以被推送到 Docker Registry（如 Docker Hub）进行共享和分发，供其他用户下载和使用。</span><br><span class="line"></span><br><span class="line">3. 容器（Container）：容器是 Docker 镜像的运行实例。通过运行镜像，可以创建一个或多个容器。容器与镜像之间的关系类似于</span><br><span class="line">类（Class）和对象（Object）之间的关系。容器在隔离的环境中运行应用程序，确保应用程序在不同环境下的一致性和可移植性。</span><br><span class="line"></span><br><span class="line">Dockerfile、镜像和容器之间的关系可以简要概括为：Dockerfile 是镜像的“构建蓝图”，镜像是 Dockerfile 构建出的可执行软件包，</span><br><span class="line">而容器则是镜像运行时的实例。开发人员编写 Dockerfile 以定义和构建镜像，然后运行镜像来创建容器，从而实现应用程序的部署和运行。</span><br></pre></td></tr></table></figure>

<p>镜像不是虚拟机模板， 容器进行，容器实例</p>
<h3 id="iptables"><a href="#iptables" class="headerlink" title="iptables"></a>iptables</h3><p>防火墙作用， 数据包转发，sourceIP:port —&gt; Destination IP:port</p>
<h3 id="容器化技术"><a href="#容器化技术" class="headerlink" title="容器化技术"></a>容器化技术</h3><p>容器， 镜像，仓库， 网络， 容器间的桥网络网段</p>
<p>容器编排</p>
<p>网络： 跨主机通信<br>存储： 跨主机共享数据</p>
<h3 id="pod"><a href="#pod" class="headerlink" title="pod"></a>pod</h3><p>管理一组容器，是一个逻辑单元，比如一整套的服务需要三个容器，分别提供微服务：python, nginx, mysql.<br>这三个容器可以一起给一个pod 管理。</p>
<p>可能是要共享：</p>
<ol>
<li>存储（volume or local）;</li>
<li>网络；</li>
<li>互相依赖；</li>
</ol>
<h3 id="docker-compose：-单机容器编排"><a href="#docker-compose：-单机容器编排" class="headerlink" title="docker-compose： 单机容器编排"></a>docker-compose： 单机容器编排</h3><p>在一台主机上，要run 4个容器，执行4次 <code>docker run -v -p 镜像 --restart 容器名 --link</code><br><mark>可以用yaml 文件来写： —&gt; 网络资源，存储资源，镜像名，镜像资源，容器名，容器运行参数，容器资源</mark></p>
<ol>
<li>如何部署；</li>
<li>用什么参数；</li>
<li>什么卷；</li>
<li>什么网络；</li>
</ol>
<h3 id="k8s-的部分组件介绍"><a href="#k8s-的部分组件介绍" class="headerlink" title="k8s 的部分组件介绍"></a>k8s 的部分组件介绍</h3><blockquote>
<p>是基于yaml文件的 大而全的 容器管理平台</p>
</blockquote>
<blockquote>
<p>master node 根据user写的yaml， 对容器的运行描述，创建具体容器，到node 工作节点上去干活；</p>
</blockquote>
<p>网络关系<br>数据共享关系<br>配置文件加密<br><mark>容器内的负载均衡反向代理</mark></p>
<h4 id="deployment"><a href="#deployment" class="headerlink" title="deployment"></a>deployment</h4><p>保证弹性扩容，应用发布，升级降级， 保证container数量， 确认要4个container，当其中2个挂掉，会自动再启动2台补全；</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="https://angellaugh.github.io/2023/04/20/OIDCandSAML/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/uploads/avatar.jpg">
      <meta itemprop="name" content="Angellaugh">
      <meta itemprop="description" content="技术，生活，艺术，旅行，都记录下来">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Angellaugh's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/04/20/OIDCandSAML/" class="post-title-link" itemprop="url">OIDC and SAML</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2023-04-20 23:11:00" itemprop="dateCreated datePublished" datetime="2023-04-20T23:11:00+00:00">2023-04-20</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Teckknowledge/" itemprop="url" rel="index"><span itemprop="name">Teckknowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="1-OIDC-实现的业务场景"><a href="#1-OIDC-实现的业务场景" class="headerlink" title="1. OIDC 实现的业务场景"></a>1. OIDC 实现的业务场景</h2><p>举例：常用办公场景，上班第一件事，登录github，登录confluence，登录office365，登录论坛。</p>
<h3 id="1-1-需要SSO-来免登陆：去IDP-认证，拿到identity-token"><a href="#1-1-需要SSO-来免登陆：去IDP-认证，拿到identity-token" class="headerlink" title="1.1. 需要SSO 来免登陆：去IDP 认证，拿到identity token,"></a>1.1. 需要SSO 来免登陆：去IDP 认证，拿到identity token,</h3><ol>
<li>带identity token 访问github,                 github        拿identity token去IDP 确认，         然后 允许/拒绝；</li>
<li>带identity token 访问confluence,           confluence 拿identity token去IDP 确认，          然后 允许/拒绝；</li>
<li>带identity token 访问office365,             office365   拿identity token去IDP 确认，          然后 允许/拒绝；</li>
<li>带identity token 访问论坛,                    论坛           拿identity token去IDP 确认，          然后 允许/拒绝；</li>
</ol>
<h3 id="1-2-IDP-access-token-issuer-IDP-带-authorization-功能后，变成-user-去IDP认证，同时返回access-token"><a href="#1-2-IDP-access-token-issuer-IDP-带-authorization-功能后，变成-user-去IDP认证，同时返回access-token" class="headerlink" title="1.2. IDP access token issuer:  IDP 带 authorization 功能后，变成 user 去IDP认证，同时返回access token:"></a>1.2. IDP access token issuer:  IDP 带 authorization 功能后，变成 user 去IDP认证，同时返回access token:</h3><pre><code>1. 带access token 访问github,                 github         在 local 用签名验证access token 真实性，有效性，然后 允许/拒绝；
2. 带access token 访问confluence,           confluence       在 local 用签名验证access token 真实性，有效性，然后 允许/拒绝；
3. 带access token 访问office365,             office365       在 local 用签名验证access token 真实性，有效性，然后 允许/拒绝；
4. 带access token 访问论坛,                    论坛           在 local 用签名验证access token 真实性，有效性，然后 允许/拒绝；
</code></pre>
<p>在这里，user 申请的时候，提供2元组 scope（也是OIDC login 需要的一个参数）： 1. resource 类型， 2. 执行的操作</p>
<h3 id="1-3-Resource-access-token-issuer-由-resource-来-authorization-颁发-access-token"><a href="#1-3-Resource-access-token-issuer-由-resource-来-authorization-颁发-access-token" class="headerlink" title="1.3. Resource access token issuer: 由 resource 来 authorization 颁发 access token:"></a>1.3. Resource access token issuer: 由 resource 来 authorization 颁发 access token:</h3><pre><code>1. 带identity token 访问github,                 github        在 local 用签名验证token 真实性，有效性，           然后 颁发 access token；
2. 带identity token 访问confluence,           confluence 在 local 用签名验证token 真实性，有效性 ，          然后 颁发 access token；
3. 带identity token 访问office365,             office365   在 local 用签名验证token 真实性，有效性 ，          然后 颁发 access token；
4. 带identity token 访问论坛,                    论坛           在 local 用签名验证token 真实性，有效性 ，          然后 颁发 access token；
</code></pre>
<p>token存储在 用户的cookie中（身份 &amp; signed）,   或者作为一个index key 指向 应用后端的来自IDP authentication的信息。</p>
<p>access token: 短期有效<br>refresh token：</p>
<p><img src="/uploads/136865505836214.png"><br>![](vx_images/136865505836214.png =1000x)</p>
<h2 id="2-OIDC-and-SAML"><a href="#2-OIDC-and-SAML" class="headerlink" title="2. OIDC and SAML"></a>2. OIDC and SAML</h2><h3 id="2-1-OIDC-OpenID-Connect"><a href="#2-1-OIDC-OpenID-Connect" class="headerlink" title="2.1. OIDC  OpenID Connect"></a>2.1. OIDC  OpenID Connect</h3><h4 id="2-1-1-an-open-authentication-protocol-that-works-on-top-of-the-OAuth-2-0-framework"><a href="#2-1-1-an-open-authentication-protocol-that-works-on-top-of-the-OAuth-2-0-framework" class="headerlink" title="2.1.1. an open authentication protocol that works on top of the OAuth 2.0 framework"></a>2.1.1. an open authentication protocol that works on top of the OAuth 2.0 framework</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">OIDC 允许个人使用单点登录(SSO)的方式，访问那些用OPs验证身份的网站。</span><br><span class="line">OIDC 为应用程序或服务提供有关用户、其身份验证上下文以及访问其配置文件信息的信息。</span><br><span class="line"></span><br><span class="line">OIDC 是基于 OAuth 2.0 的身份认证协议，增加了 Id Token</span><br></pre></td></tr></table></figure>

<h4 id="2-1-2-OIDC-的目的"><a href="#2-1-2-OIDC-的目的" class="headerlink" title="2.1.2. OIDC 的目的"></a>2.1.2. OIDC 的目的</h4><blockquote>
<p>为用户提供一组认证信息来访问多个sites. for users to provide one set of credentials and access multiple sites.</p>
</blockquote>
<blockquote>
<p>当用户登录网站或者应用程序时，先redirect to OPs, 在OPs 先进行身份认证，然后再 redirect back to 网站或应用程序 site or application</p>
</blockquote>
<blockquote>
<p>旨在保护基于浏览器的应用程序、API 和 移动原生应用程序 mobile native applications</p>
</blockquote>
<blockquote>
<p>它将用户身份验证委托给 “托管用户帐户” 的服务提供商，并授权第三方应用程序访问用户帐户。It delegates user authentication to the service provider that hosts the user account and authorizes third-party applications to access the user’s account.</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">For example, there are currently two ways of creating a Spotify account. You can register with Spotify or you can sign on through Facebook. Facebook sends your name and email address to Spotify, <span class="built_in">which</span> uses that information to authenticate you.</span><br></pre></td></tr></table></figure>


<h4 id="2-1-3-Identity-tokens-证明用户已经过身份验证-并且是-JSON-Web-令牌-（JWT）"><a href="#2-1-3-Identity-tokens-证明用户已经过身份验证-并且是-JSON-Web-令牌-（JWT）" class="headerlink" title="2.1.3. Identity tokens: 证明用户已经过身份验证,并且是 JSON Web 令牌 （JWT）"></a>2.1.3. Identity tokens: 证明用户已经过身份验证,并且是 JSON Web 令牌 （JWT）</h4><blockquote>
<p>be read by client<br>prove that users were authenticated and are JSON Web Tokens (JWTs),<br>标识令牌（旨在由客户端读取）证明用户已经过身份验证，并且是 JSON Web 令牌 （JWT），发音为“jots”。这些文件包含有关用户的信息，例如其用户名、尝试登录到应用程序或服务时以及允许他们访问联机资源的时间长度。</p>
</blockquote>
<blockquote>
<p>是基于 OAuth 2.0 的身份认证协议，增加了 Id Token</p>
</blockquote>
<h4 id="2-1-4-Access-tokens-访问被保护的资源"><a href="#2-1-4-Access-tokens-访问被保护的资源" class="headerlink" title="2.1.4. Access tokens: 访问被保护的资源"></a>2.1.4. Access tokens: 访问被保护的资源</h4><blockquote>
<p>be read and validated by the API.<br>are used to access protected resources<br>目的是通知API，此令牌的持有者已被授权访问API并执行特定操作(由已授予的范围指定)</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Their purpose is to inform the API that the bearer of this token has been authorized to access the API and perform specific actions (as specified by the scope that has been granted).</span><br></pre></td></tr></table></figure>

<h4 id="2-1-5-ID-tokens"><a href="#2-1-5-ID-tokens" class="headerlink" title="2.1.5. ID tokens"></a>2.1.5. ID tokens</h4><blockquote>
<p>Id Token 由 OpenID Provider 颁发，包含关于终端用户的信息字段</p>
</blockquote>
<h4 id="2-1-6-OpenID-Providers-OPs"><a href="#2-1-6-OpenID-Providers-OPs" class="headerlink" title="2.1.6. OpenID Providers (OPs)"></a>2.1.6. OpenID Providers (OPs)</h4><blockquote>
<p>OpenID Provider，指授权服务器，负责签发 Id Token。Authing 是 OpenID Provider。<br>Id Token 由 OpenID Provider 颁发，包含关于终端用户的信息字段</p>
</blockquote>
<h4 id="2-1-7-JSON-Web-Tokens-JWTs-pronounced-“jots-”"><a href="#2-1-7-JSON-Web-Tokens-JWTs-pronounced-“jots-”" class="headerlink" title="2.1.7. JSON Web Tokens (JWTs)  pronounced “jots.”"></a>2.1.7. JSON Web Tokens (JWTs)  pronounced “jots.”</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">OpenID Provider，指授权服务器，负责签发 Id Token。Authing 是 OpenID Provider。</span><br><span class="line">终端用户，Id Token 的信息中会包含终端用户的信息。</span><br><span class="line">调用方，请求 Id Token 的应用。</span><br><span class="line">Id Token 由 OpenID Provider 颁发，包含关于终端用户的信息字段。</span><br><span class="line">Claim 指终端用户信息字段。</span><br></pre></td></tr></table></figure>

<p><img src="/uploads/528803599836013.png"></p>
<h3 id="2-2-Differences-between-SAML-OAuth-OpenID-Connect"><a href="#2-2-Differences-between-SAML-OAuth-OpenID-Connect" class="headerlink" title="2.2. Differences between SAML, OAuth, OpenID Connect"></a>2.2. Differences between SAML, OAuth, OpenID Connect</h3><h4 id="2-2-1-侧重点"><a href="#2-2-1-侧重点" class="headerlink" title="2.2.1. 侧重点"></a>2.2.1. 侧重点</h4><ul>
<li><p>OAuth 是framework, 用于保护特定资源（如应用程序或文件集）的授权框架，</p>
</li>
<li><p>Oauth2.0, 主要用于资源授权。<br>OAuth is an authorization framework used to protect specific resources</p>
</li>
<li><p>SAML 和 OIDC 是 身份验证标准，authentication standards, 用于创建安全登录体验的身份验证标准。<br>SAML and OIDC are authentication standards used to create secure sign-on experiences. </p>
</li>
<li><p>OIDC 能够认证用户并完成资源授权。 侧重于身份认定，他/她是谁， 而OAuth侧重于允许/限制他们能做什么。<br>who someone is，  what they are allowed to do<br>如果你希望实现单点登录或先鉴权用户再返回资源，建议使用 OIDC 协议。</p>
</li>
</ul>
<h4 id="2-2-2-广泛性"><a href="#2-2-2-广泛性" class="headerlink" title="2.2.2. 广泛性"></a>2.2.2. 广泛性</h4><p>SAML 不支持移动设备的单点登录或API访问。does not support SSO for mobile devices or provide API access<br>OIDC 都支持。</p>
<h4 id="2-2-3-格式"><a href="#2-2-3-格式" class="headerlink" title="2.2.3. 格式"></a>2.2.3. 格式</h4><ol>
<li>SAML： tokens written in XML</li>
<li>OIDC： JWTs， 它们是可移植的，并支持一系列签名和加密算法。</li>
</ol>
<h4 id="2-2-4-易用性"><a href="#2-2-4-易用性" class="headerlink" title="2.2.4. 易用性"></a>2.2.4. 易用性</h4><p>OIDC比SAML 更简单， is less complex than SAML</p>
<h3 id="2-3-常见的-OAuth-2-0-授权流程如下："><a href="#2-3-常见的-OAuth-2-0-授权流程如下：" class="headerlink" title="2.3. 常见的 OAuth 2.0 授权流程如下："></a>2.3. 常见的 OAuth 2.0 授权流程如下：</h3><p>在你的应用中，让用户访问登录链接，浏览器跳转到 Authing，用户在 Authing 完成认证。<br>浏览器接收到一个从 Authing 服务器发来的授权码。<br>浏览器通过重定向将授权码发送到你的应用后端。<br>你的应用服务将授权码发送到 Authing 获取 AccessToken，如果需要，还会返回 refresh token。<br>你的应用后端现在知道了用户的身份，后续可以保存用户信息，重定向到前端其他页面，使用 AccessToken 调用资源方的其他 API 等等。</p>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://docs.authing.cn/v2/concepts/user-pool.html">https://docs.authing.cn/v2/concepts/user-pool.html</a></p>
</blockquote>
<h3 id="2-4-saml"><a href="#2-4-saml" class="headerlink" title="2.4. saml"></a>2.4. saml</h3><blockquote>
<p>允许 IdP 和 SP 彼此独立</p>
</blockquote>
<blockquote>
<p>SAML 使用 XML 元数据文档， 也就是 SAML 令牌进行断言，验证用户身份和访问权限。</p>
</blockquote>
<p>![](vx_images/24513571558970.png =800x)</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="https://angellaugh.github.io/2023/04/12/daily/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/uploads/avatar.jpg">
      <meta itemprop="name" content="Angellaugh">
      <meta itemprop="description" content="技术，生活，艺术，旅行，都记录下来">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Angellaugh's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/04/12/daily/" class="post-title-link" itemprop="url">Multiprocess_2 concurrent</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2023-04-12 23:34:02" itemprop="dateCreated datePublished" datetime="2023-04-12T23:34:02+00:00">2023-04-12</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2023-05-02 12:44:50" itemprop="dateModified" datetime="2023-05-02T12:44:50+00:00">2023-05-02</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Teckknowledge/" itemprop="url" rel="index"><span itemprop="name">Teckknowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="1-return-坑死我了"><a href="#1-return-坑死我了" class="headerlink" title="1. return 坑死我了"></a>1. return 坑死我了</h2><p>return是表示从被调函数返回到主调函数继续执行, return后函数就结束了,后面的语句不再执行</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="https://angellaugh.github.io/2023/04/11/multiprocess_concurrent/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/uploads/avatar.jpg">
      <meta itemprop="name" content="Angellaugh">
      <meta itemprop="description" content="技术，生活，艺术，旅行，都记录下来">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Angellaugh's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/04/11/multiprocess_concurrent/" class="post-title-link" itemprop="url">Multiprocess_2 concurrent</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2023-04-11 23:17:02" itemprop="dateCreated datePublished" datetime="2023-04-11T23:17:02+00:00">2023-04-11</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2023-05-02 12:44:50" itemprop="dateModified" datetime="2023-05-02T12:44:50+00:00">2023-05-02</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Teckknowledge/" itemprop="url" rel="index"><span itemprop="name">Teckknowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="收获"><a href="#收获" class="headerlink" title="收获"></a>收获</h2><p><mark>1. time.perf_counter()  程序运行时间包括sleeping</mark>, 不用再 time.time()-starttime了。<br>2. time.process_counter() cpu运行时间，不包括sleeping<br><mark>3. concurrent.futures: 两个process 并行运行 </mark><br>4. 注意 python3.7以上才能打印出秒数<br>5. 注意不要用和包名相同的文件名<br><mark>6. Pool.map 可以取代 map(func, list)</mark></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> concurrent.futures</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">sleep_for_a_bit</span>(<span class="params">secondes</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;Sleeping <span class="subst">&#123;secondes&#125;</span> second(s)&quot;</span>)</span><br><span class="line">    time.sleep(secondes)</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;Done sleeping&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> concurrent.futures.ProcessPoolExecutor() <span class="keyword">as</span> executor:</span><br><span class="line">    <span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">        f1 = executor.submit(sleep_for_a_bit, <span class="number">1</span>)</span><br><span class="line">        f2 = executor.submit(sleep_for_a_bit, <span class="number">1</span>)</span><br><span class="line">        <span class="built_in">print</span>(f1.result())</span><br><span class="line">        <span class="built_in">print</span>(f2.result())</span><br><span class="line">        </span><br><span class="line">finish = time.perf_counter()</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Finished in time: &quot;</span>, finish)</span><br></pre></td></tr></table></figure>

<pre><code>~/Desktop 🔥» python ccc.py                                      vivi@vivis-MBP
Finished in time:  0.103320167
Finished in time:  0.100869
Sleeping 1 second(s)
Sleeping 1 second(s)
Finished in time:  0.099204041
Finished in time:  0.095198
Finished in time:  0.077157417
Finished in time:  0.084327958
Finished in time:  0.080791833
Finished in time:  0.084751625
Done sleeping
Done sleeping
Finished in time:  1.282027666
</code></pre>
<h2 id="Pool-map-func-list-来取代-list-map-func-list"><a href="#Pool-map-func-list-来取代-list-map-func-list" class="headerlink" title="Pool.map(func, list) 来取代 list(map(func, list))"></a>Pool.map(func, list) 来取代 list(map(func, list))</h2><ol>
<li>但是看上去没发现节省时间</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">x = <span class="built_in">list</span>(<span class="built_in">map</span>(req_get, create_list.keys()))</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">run_get</span>():</span><br><span class="line">    <span class="keyword">with</span> Pool(core_num) <span class="keyword">as</span> p:</span><br><span class="line">        x = p.<span class="built_in">map</span>(req_get, create_list.keys())</span><br><span class="line">        <span class="keyword">return</span> x</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<pre><code>If x equals get_list:369,  369
[2023-04-11 14:08:28] [Line: 184] INFO - Total running time: 53.477982
[2023-04-11 14:08:28] [Line: 185] INFO - Create clients number:369
[2023-04-11 14:08:28] [Line: 186] INFO - Get clients number: 369
[2023-04-11 14:08:28] [Line: 187] ERROR - Create clients fail number: 0
[2023-04-11 14:08:28] [Line: 188] ERROR - Create clients fail information: []
369
369
369
369
</code></pre>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="https://angellaugh.github.io/2023/04/11/understandmapyieldlambda.py/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/uploads/avatar.jpg">
      <meta itemprop="name" content="Angellaugh">
      <meta itemprop="description" content="技术，生活，艺术，旅行，都记录下来">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Angellaugh's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/04/11/understandmapyieldlambda.py/" class="post-title-link" itemprop="url">Understandmapyieldlambda</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2023-04-11 22:13:02" itemprop="dateCreated datePublished" datetime="2023-04-11T22:13:02+00:00">2023-04-11</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2023-05-02 12:44:50" itemprop="dateModified" datetime="2023-05-02T12:44:50+00:00">2023-05-02</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Teckknowledge/" itemprop="url" rel="index"><span itemprop="name">Teckknowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Table-of-Contents"><a href="#Table-of-Contents" class="headerlink" title="Table of Contents"></a>Table of Contents</h1> <p>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">numbers = [<span class="number">2</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">8</span>, <span class="number">5</span>]</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">square</span>(<span class="params">x</span>):</span><br><span class="line">    <span class="keyword">return</span> x * x</span><br><span class="line"></span><br><span class="line">a= []</span><br><span class="line"></span><br><span class="line"><span class="comment"># 只会这么写，或者next</span></span><br><span class="line"><span class="keyword">for</span> x <span class="keyword">in</span> numbers:</span><br><span class="line">    a.append(square(x))</span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">map(function, *iterables)</span></span><br><span class="line"><span class="string">对指定序列做映射，返回值是个迭代器，可迭代对象： list，set， tuple</span></span><br><span class="line"><span class="string">map 取代for循环</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">square_num = <span class="built_in">map</span>(square, numbers)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(square_num))</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(square_num)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 在list的时候调用了square_num，迭代5次，并且把每次迭代的return 都append进list中。</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">list</span>(square_num))</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<pre><code>[4, 16, 36, 64, 25]
&lt;class &#39;map&#39;&gt;
&lt;map object at 0x1109a2c40&gt;
[4, 16, 36, 64, 25]
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 类似于</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">testyield</span>(<span class="params">numbers</span>):</span><br><span class="line">    <span class="keyword">for</span> x <span class="keyword">in</span> numbers:</span><br><span class="line">        <span class="keyword">yield</span> square(x)</span><br><span class="line"></span><br><span class="line"><span class="comment"># my way</span></span><br><span class="line">a = testyield(numbers)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;next <span class="subst">&#123;<span class="built_in">next</span>(a)&#125;</span>&quot;</span>)  <span class="comment"># list就是对每个元素next的动作</span></span><br><span class="line"><span class="keyword">for</span> x <span class="keyword">in</span> a:</span><br><span class="line">    <span class="built_in">print</span>(x)</span><br><span class="line"><span class="comment"># list can call the generator list就是一个循环call 迭代器的动作， next       </span></span><br><span class="line">a = <span class="built_in">list</span>(testyield(numbers))</span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line"></span><br><span class="line"><span class="comment">#将传入list，改写成传入单个元素，去掉for循环，外面用map取代for</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">testyield2</span>(<span class="params">x</span>):</span><br><span class="line">    <span class="comment">#yield square(x) 这里不行。。 貌似yield必须要和for循环在一起</span></span><br><span class="line">    <span class="keyword">return</span> square(x)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;testyield2 with map&quot;</span>)</span><br><span class="line">a = <span class="built_in">map</span>(testyield2, numbers)</span><br><span class="line"><span class="comment"># is a map object</span></span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line"></span><br><span class="line"><span class="comment"># is a generator</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">next</span>(a))</span><br><span class="line"><span class="comment"># is a list gegerator</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">list</span>(a))</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">testyield4</span>(<span class="params">x</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;under testyield444&quot;</span>)</span><br><span class="line">    a =<span class="keyword">yield</span> square(x)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;aa&quot;</span>)</span><br><span class="line">g = testyield4(<span class="number">2</span>)</span><br><span class="line"><span class="built_in">print</span>(g)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;call the testyield4 <span class="subst">&#123;<span class="built_in">next</span>(g)&#125;</span>&quot;</span>)</span><br><span class="line"><span class="comment"># for x in numbers:</span></span><br><span class="line"><span class="comment">#     g = testyield4(x)</span></span><br><span class="line"><span class="comment">#     print(next(g))</span></span><br><span class="line">    </span><br><span class="line">aa = [<span class="built_in">next</span>(testyield4(x)) <span class="keyword">for</span> x <span class="keyword">in</span> numbers]</span><br><span class="line"><span class="built_in">print</span>(aa)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">return 和 list[map(func, parameters)]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">yield 和list[next(func(x)) for x in parameters]</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="https://angellaugh.github.io/2023/04/05/mapinuse/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/uploads/avatar.jpg">
      <meta itemprop="name" content="Angellaugh">
      <meta itemprop="description" content="技术，生活，艺术，旅行，都记录下来">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Angellaugh's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/04/05/mapinuse/" class="post-title-link" itemprop="url">mapinuse</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2023-04-05 22:13:02" itemprop="dateCreated datePublished" datetime="2023-04-05T22:13:02+00:00">2023-04-05</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2023-05-02 12:44:50" itemprop="dateModified" datetime="2023-05-02T12:44:50+00:00">2023-05-02</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Teckknowledge/" itemprop="url" rel="index"><span itemprop="name">Teckknowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="1-map-reduce-zip-filter-对序列操作"><a href="#1-map-reduce-zip-filter-对序列操作" class="headerlink" title="1. map, reduce, zip, filter 对序列操作"></a>1. map, reduce, zip, filter 对序列操作</h2><p>对指定序列做映射，返回值是迭代器</p>
<h2 id="2-map"><a href="#2-map" class="headerlink" title="2. map"></a>2. map</h2><p>收获：</p>
<ol>
<li>map(func, list_) 是一个迭代器，需要一个一个取，取一次运行一次，拿到一次值；</li>
<li>next: 可以取一次迭代器的值；如果取到最后没值了会抛出一个错；</li>
<li>list: 可以遍历取多次迭代器，直到取到所有值，并且存到list中；</li>
<li>list(map(func, list_)) 可以取代之前的旧写法，定义一个变量，type=list, 然后for循环取值append到这个变量list中；</li>
<li>list[func(x) for x in list_]  也可以稍微简写一下for循环；</li>
</ol>
<p><strong>小补充： list还真是遍历多次迭代取值</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">nums = <span class="built_in">range</span>(-<span class="number">5</span>, <span class="number">6</span>)</span><br><span class="line"><span class="built_in">print</span>(nums)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(nums))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">list</span>(nums))</span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">range(-5, 6)</span></span><br><span class="line"><span class="string">&lt;class &#x27;range&#x27;&gt;</span></span><br><span class="line"><span class="string">[-5, -4, -3, -2, -1, 0, 1, 2, 3, 4, 5]</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h3 id="2-1-map-func-iterables"><a href="#2-1-map-func-iterables" class="headerlink" title="2.1. map(func, iterables)"></a>2.1. map(func, iterables)</h3><p>map(function, *iterables)<br>对指定序列做映射，返回值是个迭代器，可迭代对象： list，set， tuple<br>map 取代for循环</p>
<p>list(map(function, *iteratbles))  == [function(iterable) for iterable in iterables]</p>
<h3 id="2-2-最常理解的实现是for循环，把结果收集到一个提前定义好的list中"><a href="#2-2-最常理解的实现是for循环，把结果收集到一个提前定义好的list中" class="headerlink" title="2.2. 最常理解的实现是for循环，把结果收集到一个提前定义好的list中"></a>2.2. 最常理解的实现是for循环，把结果收集到一个提前定义好的list中</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">numbers = [<span class="number">2</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">8</span>, <span class="number">5</span>]</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">square</span>(<span class="params">x</span>):</span><br><span class="line">    <span class="keyword">return</span> x * x</span><br><span class="line">a= []</span><br><span class="line"><span class="comment"># 只会这么写，或者next</span></span><br><span class="line"><span class="keyword">for</span> x <span class="keyword">in</span> numbers:</span><br><span class="line">    a.append(square(x))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;a: <span class="subst">&#123;a&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line">b = [square(x) <span class="keyword">for</span> x <span class="keyword">in</span> numbers]</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;a: <span class="subst">&#123;a&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">map(function, *iterables)</span></span><br><span class="line"><span class="string">对指定序列做映射，返回值是个迭代器，可迭代对象： list，set， tuple</span></span><br><span class="line"><span class="string">map 取代for循环</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure>
<pre><code>a: [4, 16, 36, 64, 25]
b: [4, 16, 36, 64, 25]
</code></pre>
<h3 id="2-3-进阶：-使用map-简化掉for循环以及提前定义list"><a href="#2-3-进阶：-使用map-简化掉for循环以及提前定义list" class="headerlink" title="2.3. 进阶： 使用map 简化掉for循环以及提前定义list"></a>2.3. 进阶： 使用map 简化掉for循环以及提前定义list</h3><mark>
list(map(func, list_))： 等于 for 循环取出 map得到的len(list_)个元素并且append到一个list中；

<ol>
<li>next 可以取出 map迭代器的值；</li>
<li>for 语句等同于 next的效果，挨个取出map迭代器的值；</li>
<li>list(map(func, list_)) 等于 point2 并且append到一个list中；</mark></li>
</ol>
<h4 id="2-3-1-举例-next-效果，更深刻理解list-map-的效果"><a href="#2-3-1-举例-next-效果，更深刻理解list-map-的效果" class="headerlink" title="2.3.1. 举例 next 效果，更深刻理解list(map)的效果"></a>2.3.1. 举例 next 效果，更深刻理解list(map)的效果</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">numbers = [2, 4, 6, 8, 5]</span><br><span class="line">def square(x):</span><br><span class="line">    return x * x</span><br><span class="line"></span><br><span class="line"># type: class map, object</span><br><span class="line">square_num = map(square, numbers)</span><br><span class="line">print(type(square_num))</span><br><span class="line">print(square_num)</span><br><span class="line"># 在list的时候调用了square_num，迭代5次，并且把每次迭代的return 都append进list中。</span><br><span class="line"># 类似于next(square_num)了5次</span><br><span class="line"># 也类似于for循环把每个迭代元素调用一次，得到的值加入到list中。</span><br><span class="line">print(next(square_num))  #4</span><br><span class="line">print(list(square_num))  # 因为上面next已经取走了第一个值，所以list这里只剩下4个值</span><br></pre></td></tr></table></figure>
<pre><code>&lt;class &#39;map&#39;&gt;
&lt;map object at 0x110a75c70&gt;
4
[16, 36, 64, 25] 
</code></pre>
<h4 id="2-3-2-举例-for循环取出值append到list中，用list-map-来取代for循环。"><a href="#2-3-2-举例-for循环取出值append到list中，用list-map-来取代for循环。" class="headerlink" title="2.3.2. 举例 for循环取出值append到list中，用list(map)来取代for循环。"></a>2.3.2. 举例 for循环取出值append到list中，用list(map)来取代for循环。</h4><p><mark><del>其实精简了两次for循环</del> 其实是map+list 两个动作 一起取代了 for循环和list.append</p>
<ol>
<li>numbsers 和 square 用map来一一映射；</li>
<li>list(map) 达到了 一个一个for 并且 append的效果；</li>
<li>啊哈哈哈 意外之喜，理解了另一个写法：b = [square(x) for x in numbers]</mark>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2023/04/05/mapinuse/#more" rel="contents">
                Read more &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="https://angellaugh.github.io/2023/04/02/openssl_ca2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/uploads/avatar.jpg">
      <meta itemprop="name" content="Angellaugh">
      <meta itemprop="description" content="技术，生活，艺术，旅行，都记录下来">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Angellaugh's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/04/02/openssl_ca2/" class="post-title-link" itemprop="url">openssl_ca2</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2023-04-02 11:11:02" itemprop="dateCreated datePublished" datetime="2023-04-02T11:11:02+00:00">2023-04-02</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2023-05-02 12:44:50" itemprop="dateModified" datetime="2023-05-02T12:44:50+00:00">2023-05-02</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Teckknowledge/" itemprop="url" rel="index"><span itemprop="name">Teckknowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="1-CA-简介-amp-范例"><a href="#1-CA-简介-amp-范例" class="headerlink" title="1. CA 简介 &amp; 范例"></a>1. CA 简介 &amp; 范例</h2><p><strong>CA</strong>= certificate authority签证机构<br>提供证书（服务器证书，由域名、公司信息、序列号和签名信息组成）</p>
<p><strong>SSL:</strong> Secure Sockets Layer（安全套接层协议), 与HTTPS一起诞生<br><strong>TLS:</strong> TLS，Transport Layer Security（传输层安全性协议）， 是SSL 标准化<br><mark><strong>SSL &amp; TLS： 本质是同一个东东</strong></mark></p>
<p><strong>证书包含：</strong></p>
<ol>
<li>public key、</li>
<li>名称、 </li>
<li><mark>CA的数字签名</mark></li>
<li>有效时间，</li>
<li>签证机关的名称，</li>
<li>该证书的序列号等信息</li>
</ol>
<div class="note primary">
            <p>现在该说点什么呢</p>
          </div>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">### 2.4. View the issued CA</span></span><br><span class="line">```bash</span><br><span class="line">CIAM-ali1:~/CAcerts <span class="comment"># openssl x509 -text -noout -in server.pem</span></span><br><span class="line">Certificate:</span><br><span class="line">    Data:</span><br><span class="line">        Version: 3 (0x2)</span><br><span class="line">        Serial Number: 4096 (0x1000)</span><br><span class="line">        Signature Algorithm: sha256WithRSAEncryption</span><br><span class="line">        <span class="comment"># 签证机构</span></span><br><span class="line">        Issuer: C = CN, ST = Shanghai, L = Shanghai, O = Dell, OU = Dell</span><br><span class="line">        <span class="comment">#有效期</span></span><br><span class="line">        Validity</span><br><span class="line">            Not Before: Mar 27 08:22:59 2023 GMT</span><br><span class="line">            Not After : Mar 26 08:22:59 2024 GMT</span><br><span class="line">        <span class="comment"># 名字    </span></span><br><span class="line">        Subject: C = CN, ST = Shanghai, O = Dell, OU = Dell, CN = ciam-ali1.west.isilon.com</span><br><span class="line">        <span class="comment">#public key</span></span><br><span class="line">        Subject Public Key Info:</span><br><span class="line">            Public Key Algorithm: rsaEncryption</span><br><span class="line">                RSA Public-Key: (2048 bit)</span><br><span class="line">                Modulus:</span><br><span class="line">                    00:e8:53:ef:bd:b0:e9:99:2b:af:35:da:2e:b5:81:</span><br><span class="line">                    61:18:17:7a:7b:69:a0:46:c1:c2:ee:24:d7:36:52:</span><br><span class="line">                    e9:5c:3d:49:ea:be:31:54:e0:a5:ff:a9:e1:19:b3:</span><br><span class="line">                    81:8a:38:9e:a3:fa:62:23:b0:85:07:d1:35:3e:40:</span><br><span class="line">                    7c:1a:68:1d:a8:6b:08:01:c8:95:d3:85:09:b0:7c:</span><br><span class="line">                    60:85:dc:13:dc:91:a2:73:ee:f3:7e:42:80:99:24:</span><br><span class="line">                    4f:09:13:91:9b:da:87:ee:ae:f2:ec:d9:9e:a6:75:</span><br><span class="line">                    1d:e3:c6:cf:78:58:7d:2a:7e:8e:cf:65:30:60:ab:</span><br><span class="line">                    42:6b:6d:76:f8:f2:46:de:c3:b5:4b:c9:60:39:24:</span><br><span class="line">                    a0:5e:59:0c:b3:30:9e:3b:67:ae:d4:5f:53:6e:63:</span><br><span class="line">                    47:92:dc:0c:39:9f:a6:39:b0:45:82:5b:e1:4d:a8:</span><br><span class="line">                    ed:75:96:8a:98:32:49:f6:9b:a3:6e:69:91:f0:18:</span><br><span class="line">                    2e:66:9e:ca:77:7e:b3:a6:96:d6:4a:e1:b1:51:a3:</span><br><span class="line">                    1f:7d:d2:5f:41:ce:1c:02:c2:42:aa:b5:3b:61:1c:</span><br><span class="line">                    9f:b9:45:70:fe:85:d0:d8:a3:6f:e5:e8:3d:9f:9e:</span><br><span class="line">                    6d:53:57:f9:0f:0a:56:a4:f5:77:bb:4a:ff:<span class="built_in">fc</span>:8a:</span><br><span class="line">                    4a:67:e1:82:43:f1:7b:16:5a:80:1b:8f:da:f4:c4:</span><br><span class="line">                    25:0d</span><br><span class="line">                Exponent: 65537 (0x10001)</span><br><span class="line">        X509v3 extensions:</span><br><span class="line">            X509v3 Basic Constraints:</span><br><span class="line">                CA:FALSE</span><br><span class="line">            X509v3 Subject Key Identifier:</span><br><span class="line">                D1:4F:3F:CD:DC:17:7E:50:38:A8:50:D6:EA:2C:BA:3D:6C:62:35:A1</span><br><span class="line">            X509v3 Extended Key Usage:</span><br><span class="line">                TLS Web Server Authentication</span><br><span class="line">            X509v3 Subject Alternative Name:</span><br><span class="line">                DNS:ciam-ali1.west.isilon.com</span><br><span class="line">    Signature Algorithm: sha256WithRSAEncryption</span><br><span class="line">         09:6b:25:4e:ca:a1:<span class="built_in">fc</span>:2c:bb:35:5f:65:c8:47:92:7a:a1:53:</span><br><span class="line">         b7:fd:6e:41:5a:39:32:35:87:b1:24:de:83:6e:23:6c:67:49:</span><br><span class="line">         47:ba:91:de:7a:b1:81:f3:0a:3a:d3:25:35:13:6d:0f:d9:77:</span><br><span class="line">         a4:6a:7e:a6:72:06:d9:b1:95:15:36:61:46:a4:b7:0f:16:c3:</span><br><span class="line">         41:55:aa:e1:5c:93:28:4b:f0:9b:74:04:a1:08:59:97:23:c9:</span><br><span class="line">         1b:17:d0:38:7d:74:e4:9a:42:e2:f7:0a:2d:01:8d:d3:7f:57:</span><br><span class="line">         eb:b8:08:2e:fe:5f:b1:86:90:d2:97:64:9e:9a:61:51:06:9e:</span><br><span class="line">         7c:25:a9:87:5c:63:e6:d5:18:9b:cb:0e:20:71:77:06:fd:2e:</span><br><span class="line">         0f:c1:b9:21:75:34:ec:5a:11:4d:48:f8:4d:de:67:7a:f4:e6:</span><br><span class="line">         3c:a1:4a:01:40:8f:ce:2c:c1:ae:5e:52:66:0d:6c:29:7b:f0:</span><br><span class="line">         b3:ce:ae:b2:cf:13:d1:0e:ed:83:e3:15:16:5a:8c:ba:15:45:</span><br><span class="line">         08:46:b6:63:92:66:ab:2c:2c:1c:f6:2c:34:d9:7d:9f:b6:d3:</span><br><span class="line">         07:34:72:bb:89:81:27:d0:88:0f:b9:3e:e8:f2:3a:3c:7f:5c:</span><br><span class="line">         88:88:1b:77:7a:41:a9:c9:99:2f:e5:76:87:8e:26:ec:85:c0:</span><br><span class="line">         12:ac:02:25</span><br><span class="line">CIAM-ali1:~/CAcerts <span class="comment">#</span></span><br></pre></td></tr></table></figure>

<p><img src="vx_images/116433111278673.png"><br><img src="/uploads/116433111278673.png"></p>
<p><strong>个人或组织提交CRS 给 CA 机构， CA签发</strong></p>
<h2 id="2-SSL-amp-TLS-安全套接协议"><a href="#2-SSL-amp-TLS-安全套接协议" class="headerlink" title="2. SSL&amp;TLS  安全套接协议"></a>2. SSL&amp;TLS  安全套接协议</h2><p><MARK>SSL: Secure Sockets Layer（安全套接层协议), 与HTTPS一起诞生<br>TLS: TLS，Transport Layer Security（传输层安全性协议）， 是SSL 标准化<br>SSL &amp; TLS： 本质是同一个东东</MARK></p>
<blockquote>
<p>SSL是 Secure Sockets Layer（安全套接层协议）的缩写。由网景公司再1994年随HTTPS一起推出。<br>后交由IETF将SSL进行标准化，并改名为 TLS，Transport Layer Security（传输层安全性协议）。<br>所以 TLS 是 SSL 改个名而已，其实是一个东西。</p>
</blockquote>
<h3 id="2-1-SSL-分两层：-record-layer记录层-和-传输层"><a href="#2-1-SSL-分两层：-record-layer记录层-和-传输层" class="headerlink" title="2.1. SSL 分两层： record layer记录层 和 传输层"></a>2.1. SSL 分两层： record layer记录层 和 传输层</h3><p>记录层： 确定传输层的封装格式<br>传输层： 使用x509认证<br>然后，用非对称加密算法来对双方进行身份认证<br>再然后，<mark>交换对称密钥，作为session key，</mark> 给通信双方的data做加密</p>
<h3 id="2-2-SSL-证书有三种：-DV-OV-EV"><a href="#2-2-SSL-证书有三种：-DV-OV-EV" class="headerlink" title="2.2. SSL 证书有三种： DV, OV, EV"></a>2.2. SSL 证书有三种： DV, OV, EV</h3><ul>
<li>DV（Domain Validation）域名验证型证书，面向个体用户，可以通过邮箱验证、DNS验证或者文件验证</li>
<li>OV（Organization Validation）企业验证型证书，面向企业用户，CA 通过拨打信息库中公司的电话来确认；</li>
<li>EV（Extended Validation）增强验证型证书，证书审核级别为所有类型最严格验证方式， 银行，金融。</li>
</ul>
<h2 id="3-openssl-安全套接字层密码库，实现自签名证书"><a href="#3-openssl-安全套接字层密码库，实现自签名证书" class="headerlink" title="3. openssl 安全套接字层密码库，实现自签名证书"></a>3. openssl 安全套接字层密码库，实现自签名证书</h2><blockquote>
<p>可参考系列文章：<br><a href="https://angellaugh.github.io/2023/04/01/openssl/">openssl</a><br><a href="https://angellaugh.github.io/2023/03/28/openssl_2_signed/">openssl2:self-signed certificate</a></p>
</blockquote>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2023/04/02/openssl_ca2/#more" rel="contents">
                Read more &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="https://angellaugh.github.io/2023/04/01/multiprotocol/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/uploads/avatar.jpg">
      <meta itemprop="name" content="Angellaugh">
      <meta itemprop="description" content="技术，生活，艺术，旅行，都记录下来">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Angellaugh's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/04/01/multiprotocol/" class="post-title-link" itemprop="url">Multiprocess_1 tasks</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2023-04-01 15:37:02" itemprop="dateCreated datePublished" datetime="2023-04-01T15:37:02+00:00">2023-04-01</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2023-05-02 12:44:50" itemprop="dateModified" datetime="2023-05-02T12:44:50+00:00">2023-05-02</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Teckknowledge/" itemprop="url" rel="index"><span itemprop="name">Teckknowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> multiprocessing</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">core_num = multiprocessing.cpu_count()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;corenum: <span class="subst">&#123;core_num&#125;</span>&quot;</span>)</span><br><span class="line">clients = [<span class="string">&quot;eb380adf-8fe8-45dd-825f-4e7da940eca9&quot;</span>,<span class="string">&quot;990f5d3c-5e5f-4af8-b68b-1329272ac3b4&quot;</span>,</span><br><span class="line">           <span class="string">&quot;15cc0813-8a2e-4a90-9ba6-7a8ddf3bd32d&quot;</span>,<span class="string">&quot;5bf8729e-fb28-476e-b054-5a0656dc4fed&quot;</span>,</span><br><span class="line">           <span class="string">&quot;27a1e6bb-439b-475e-bbcf-9744622992cd&quot;</span>,<span class="string">&quot;6491b68c-5360-4638-8194-da9f5431c4eb&quot;</span>,</span><br><span class="line">           <span class="string">&quot;da2fd513-acdc-48e9-b9fe-c0de13e90eb0&quot;</span>,<span class="string">&quot;f75d48b0-74ab-4d96-b8a7-4357985e78bc&quot;</span>,</span><br><span class="line">           <span class="string">&quot;d76c8dbe-0821-4736-a4fa-9b60dc331fec&quot;</span>,<span class="string">&quot;354f9ef4-1481-469a-9e6a-9cef076b4ac0&quot;</span>]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">将clients_list 按core_num 随机分布client数量，这里core=4，</span></span><br><span class="line"><span class="string">那么会将 clients 分成四组，for 循环每次调用 chunks，都取一组给 for clients_，</span></span><br><span class="line"><span class="string">然后 for clients_ 可以拿去做事。</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">chunks</span>(<span class="params">clients_list, num</span>):</span><br><span class="line">    d, r = <span class="built_in">divmod</span>(<span class="built_in">len</span>(clients_list), num)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;d and r: <span class="subst">&#123;d&#125;</span>, <span class="subst">&#123;r&#125;</span>&quot;</span>)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(num):</span><br><span class="line">        si = (d + <span class="number">1</span>) * (i <span class="keyword">if</span> i &lt; r <span class="keyword">else</span> r) + d * (<span class="number">0</span> <span class="keyword">if</span> i &lt; r <span class="keyword">else</span> i - r)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;si: <span class="subst">&#123;si&#125;</span>&quot;</span>)</span><br><span class="line">        <span class="keyword">yield</span> clients_list[si:si + (d + <span class="number">1</span> <span class="keyword">if</span> i &lt; r <span class="keyword">else</span> d)]</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> clients_ <span class="keyword">in</span> chunks(clients, core_num):</span><br><span class="line">    <span class="keyword">from</span> pdb <span class="keyword">import</span> set_trace</span><br><span class="line">    set_trace()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;clients_: <span class="subst">&#123;clients_&#125;</span>&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;chunks: <span class="subst">&#123;chunks&#125;</span>&quot;</span>)</span><br><span class="line">```    </span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">```bash</span><br><span class="line"></span><br><span class="line">    corenum: <span class="number">8</span></span><br><span class="line">    d <span class="keyword">and</span> r: <span class="number">1</span>, <span class="number">2</span></span><br><span class="line">    si: <span class="number">0</span></span><br><span class="line">    ipdb&gt; l</span><br><span class="line">    ipdb&gt; clients_</span><br><span class="line">    [<span class="string">&#x27;eb380adf-8fe8-45dd-825f-4e7da940eca9&#x27;</span>, <span class="string">&#x27;990f5d3c-5e5f-4af8-b68b-1329272ac3b4&#x27;</span>]</span><br><span class="line">    ipdb&gt; n</span><br><span class="line">    clients_: [<span class="string">&#x27;eb380adf-8fe8-45dd-825f-4e7da940eca9&#x27;</span>, <span class="string">&#x27;990f5d3c-5e5f-4af8-b68b-1329272ac3b4&#x27;</span>]</span><br><span class="line">    ipdb&gt; n</span><br><span class="line">    chunks: &lt;function chunks at <span class="number">0x10c2f6310</span>&gt;</span><br><span class="line">    ipdb&gt; s</span><br><span class="line">    ipdb&gt; n</span><br><span class="line">    ipdb&gt; i</span><br><span class="line">    <span class="number">1</span></span><br><span class="line">    ipdb&gt; n</span><br><span class="line">    ipdb&gt; n</span><br><span class="line">    si: <span class="number">2</span></span><br><span class="line">    ipdb&gt; si=<span class="number">2</span>,  i1&lt;r2所以返回d+<span class="number">1</span>=<span class="number">3</span>, 也就是返回clients_list[<span class="number">2</span>:<span class="number">2</span>+<span class="number">3</span>],即第<span class="number">3</span>，<span class="number">4</span>，<span class="number">5</span>个元素]</span><br><span class="line">    ipdb&gt; n</span><br><span class="line">    &gt; [<span class="number">0</span>;32m&lt;ipython-<span class="built_in">input</span>-<span class="number">1</span>-fca5ddbf22de&gt;[0m(<span class="number">30</span>)[<span class="number">0</span>;36m&lt;module&gt;[<span class="number">0</span>;34m()[0m</span><br><span class="line">    ipdb&gt; n</span><br><span class="line">    clients_: [<span class="string">&#x27;15cc0813-8a2e-4a90-9ba6-7a8ddf3bd32d&#x27;</span>, <span class="string">&#x27;5bf8729e-fb28-476e-b054-5a0656dc4fed&#x27;</span>]</span><br><span class="line">    ipdb&gt; s</span><br><span class="line">     ipdb&gt; n</span><br><span class="line">    si: <span class="number">4</span></span><br><span class="line"> </span><br><span class="line">    ipdb&gt; i</span><br><span class="line">    <span class="number">2</span></span><br><span class="line">    ipdb&gt; si=<span class="number">4</span>, i=<span class="number">2</span>不小于r=<span class="number">2</span>,于是返回d，[<span class="number">4</span>,<span class="number">6</span>] 第<span class="number">5</span>，<span class="number">6</span>个元素</span><br><span class="line">    *** SyntaxError: cannot assign to literal</span><br><span class="line">    ipdb&gt; n</span><br><span class="line">    clients_: [<span class="string">&#x27;27a1e6bb-439b-475e-bbcf-9744622992cd&#x27;</span>]   </span><br><span class="line">    ipdb&gt; 哦 上一步应该是[<span class="number">4</span>,<span class="number">5</span>] d=<span class="number">1</span>记错了</span><br><span class="line">    *** SyntaxError: invalid syntax</span><br><span class="line">    ipdb&gt; n</span><br><span class="line">    chunks: &lt;function chunks at <span class="number">0x10c2f6310</span>&gt;</span><br><span class="line">    ipdb&gt; s</span><br><span class="line">    --Call--</span><br><span class="line">    &gt; [<span class="number">0</span>;32m&lt;ipython-<span class="built_in">input</span>-<span class="number">1</span>-fca5ddbf22de&gt;[0m(<span class="number">25</span>)[<span class="number">0</span>;36mchunks[<span class="number">0</span>;34m()[0m</span><br><span class="line">    ipdb&gt; n</span><br><span class="line">    ipdb&gt; n</span><br><span class="line">    ipdb&gt; n</span><br><span class="line">    ipdb&gt; n</span><br><span class="line">    si: <span class="number">5</span></span><br><span class="line">    &gt; [<span class="number">0</span>;32m&lt;ipython-<span class="built_in">input</span>-<span class="number">1</span>-fca5ddbf22de&gt;[0m(<span class="number">25</span>)[<span class="number">0</span>;36mchunks[<span class="number">0</span>;34m()[0m</span><br><span class="line">    ipdb&gt; i</span><br><span class="line">    <span class="number">3</span></span><br><span class="line">    ipdb&gt; d</span><br><span class="line">    *** Newest frame</span><br><span class="line">    ipdb&gt; si=<span class="number">5</span>, 返回 <span class="number">5</span>+<span class="number">1</span>，也就是[<span class="number">5</span>,<span class="number">6</span>] 一个元素</span><br><span class="line">    *** SyntaxError: invalid syntax</span><br><span class="line">    ipdb&gt; n</span><br><span class="line">    ipdb&gt; n</span><br><span class="line">    clients_: [<span class="string">&#x27;6491b68c-5360-4638-8194-da9f5431c4eb&#x27;</span>]</span><br><span class="line">    ipdb&gt; n</span><br><span class="line">    chunks: &lt;function chunks at <span class="number">0x10c2f6310</span>&gt;</span><br><span class="line">    ipdb&gt; s</span><br><span class="line">    ipdb&gt; n</span><br><span class="line">    ipdb&gt; n</span><br><span class="line">    ipdb&gt; n</span><br><span class="line">    ipdb&gt; n</span><br><span class="line">    si: <span class="number">6</span></span><br><span class="line">    ipdb&gt; i</span><br><span class="line">    <span class="number">4</span></span><br><span class="line">    ipdb&gt; [<span class="number">6</span>:<span class="number">6</span>+<span class="number">1</span>]</span><br><span class="line">    *** SyntaxError: invalid syntax</span><br><span class="line">    ipdb&gt; n</span><br><span class="line">    clients_: [<span class="string">&#x27;da2fd513-acdc-48e9-b9fe-c0de13e90eb0&#x27;</span>]</span><br><span class="line">    ipdb&gt; n</span><br><span class="line">    chunks: &lt;function chunks at <span class="number">0x10c2f6310</span>&gt;</span><br><span class="line">    ipdb&gt; n</span><br><span class="line">    ipdb&gt; n</span><br><span class="line">    si: <span class="number">7</span></span><br><span class="line">    ipdb&gt; [<span class="number">7</span>,<span class="number">8</span>]</span><br><span class="line">    [<span class="number">7</span>, <span class="number">8</span>]</span><br><span class="line">    ipdb&gt; n</span><br><span class="line">    ipdb&gt; n</span><br><span class="line">    ipdb&gt; n</span><br><span class="line">    chunks: &lt;function chunks at <span class="number">0x10c2f6310</span>&gt;</span><br><span class="line">    ipdb&gt; n</span><br><span class="line">    si: <span class="number">8</span></span><br><span class="line">    ipdb&gt; [<span class="number">8</span>,<span class="number">9</span>]</span><br><span class="line">    [<span class="number">8</span>, <span class="number">9</span>]</span><br><span class="line">    clients_: [<span class="string">&#x27;d76c8dbe-0821-4736-a4fa-9b60dc331fec&#x27;</span>]</span><br><span class="line"> </span><br><span class="line">    [0m</span><br><span class="line">    ipdb&gt; [<span class="number">9</span>,<span class="number">10</span>] 到这一步就结束啦</span><br><span class="line">    *** SyntaxError: invalid syntax</span><br><span class="line">    ipdb&gt; n</span><br><span class="line">    clients_: [<span class="string">&#x27;354f9ef4-1481-469a-9e6a-9cef076b4ac0&#x27;</span>]</span><br><span class="line">    ipdb&gt; 分给了<span class="number">8</span>个进程，第一个进程有<span class="number">3</span>个client要执行，另外<span class="number">7</span>个进程每个执行一个client</span><br><span class="line">    *** SyntaxError: invalid character <span class="string">&#x27;，&#x27;</span> (U+FF0C)</span><br><span class="line">    ipdb&gt; n</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="https://angellaugh.github.io/2023/03/28/openssl_2_signed/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/uploads/avatar.jpg">
      <meta itemprop="name" content="Angellaugh">
      <meta itemprop="description" content="技术，生活，艺术，旅行，都记录下来">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Angellaugh's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/03/28/openssl_2_signed/" class="post-title-link" itemprop="url">OpenSSL2 self-signed certificate as root CA</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2023-03-28 22:41:02" itemprop="dateCreated datePublished" datetime="2023-03-28T22:41:02+00:00">2023-03-28</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2023-05-02 12:44:50" itemprop="dateModified" datetime="2023-05-02T12:44:50+00:00">2023-05-02</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Teckknowledge/" itemprop="url" rel="index"><span itemprop="name">Teckknowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          Here's something encrypted, password is required to continue reading.
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2023/03/28/openssl_2_signed/#more" rel="contents">
                Read more &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Angellaugh"
      src="/uploads/avatar.jpg">
  <p class="site-author-name" itemprop="name">Angellaugh</p>
  <div class="site-description" itemprop="description">技术，生活，艺术，旅行，都记录下来</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">23</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">2</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">13</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Angellaugh</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://mist.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Mist</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

</body>
</html>
