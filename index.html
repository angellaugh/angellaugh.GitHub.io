<!DOCTYPE html>
<html lang="zh-Hans">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.2">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/uploads/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/uploads/favicon-16x16.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"angellaugh.github.io","root":"/","scheme":"Mist","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"always","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":false,"style":"mac"},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="æŠ€æœ¯ï¼Œç”Ÿæ´»ï¼Œè‰ºæœ¯ï¼Œæ—…è¡Œï¼Œéƒ½è®°å½•ä¸‹æ¥">
<meta property="og:type" content="website">
<meta property="og:title" content="Angellaugh&#39;s blog">
<meta property="og:url" content="https://angellaugh.github.io/index.html">
<meta property="og:site_name" content="Angellaugh&#39;s blog">
<meta property="og:description" content="æŠ€æœ¯ï¼Œç”Ÿæ´»ï¼Œè‰ºæœ¯ï¼Œæ—…è¡Œï¼Œéƒ½è®°å½•ä¸‹æ¥">
<meta property="og:locale">
<meta property="article:author" content="Angellaugh">
<meta property="article:tag" content="java, python, javascript, linux, storage, db, performance">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://angellaugh.github.io/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-Hans'
  };
</script>

  <title>Angellaugh's blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<link rel="alternate" href="/atom.xml" title="Angellaugh's blog" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Angellaugh's blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">è®°å½•çç¢</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>Archives</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i>About</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="https://angellaugh.github.io/2023/04/11/multiprocess_concurrent/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/uploads/avatar.jpg">
      <meta itemprop="name" content="Angellaugh">
      <meta itemprop="description" content="æŠ€æœ¯ï¼Œç”Ÿæ´»ï¼Œè‰ºæœ¯ï¼Œæ—…è¡Œï¼Œéƒ½è®°å½•ä¸‹æ¥">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Angellaugh's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/04/11/multiprocess_concurrent/" class="post-title-link" itemprop="url">Multiprocess_2 concurrent</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2023-04-11 23:17:02 / Modified: 15:27:23" itemprop="dateCreated datePublished" datetime="2023-04-11T23:17:02+00:00">2023-04-11</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Teckknowledge/" itemprop="url" rel="index"><span itemprop="name">Teckknowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="æ”¶è·"><a href="#æ”¶è·" class="headerlink" title="æ”¶è·"></a>æ”¶è·</h2><p><mark>1. time.perf_counter()  ç¨‹åºè¿è¡Œæ—¶é—´åŒ…æ‹¬sleeping</mark>, ä¸ç”¨å† time.time()-starttimeäº†ã€‚<br>2. time.process_counter() cpuè¿è¡Œæ—¶é—´ï¼Œä¸åŒ…æ‹¬sleeping<br><mark>3. concurrent.futures: ä¸¤ä¸ªprocess å¹¶è¡Œè¿è¡Œ </mark><br>4. æ³¨æ„ python3.7ä»¥ä¸Šæ‰èƒ½æ‰“å°å‡ºç§’æ•°<br>5. æ³¨æ„ä¸è¦ç”¨å’ŒåŒ…åç›¸åŒçš„æ–‡ä»¶å<br><mark>6. Pool.map å¯ä»¥å–ä»£ map(func, list)</mark></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> concurrent.futures</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">sleep_for_a_bit</span>(<span class="params">secondes</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;Sleeping <span class="subst">&#123;secondes&#125;</span> second(s)&quot;</span>)</span><br><span class="line">    time.sleep(secondes)</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;Done sleeping&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> concurrent.futures.ProcessPoolExecutor() <span class="keyword">as</span> executor:</span><br><span class="line">    <span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">        f1 = executor.submit(sleep_for_a_bit, <span class="number">1</span>)</span><br><span class="line">        f2 = executor.submit(sleep_for_a_bit, <span class="number">1</span>)</span><br><span class="line">        <span class="built_in">print</span>(f1.result())</span><br><span class="line">        <span class="built_in">print</span>(f2.result())</span><br><span class="line">        </span><br><span class="line">finish = time.perf_counter()</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Finished in time: &quot;</span>, finish)</span><br></pre></td></tr></table></figure>

<pre><code>~/Desktop ğŸ”¥Â» python ccc.py                                      vivi@vivis-MBP
Finished in time:  0.103320167
Finished in time:  0.100869
Sleeping 1 second(s)
Sleeping 1 second(s)
Finished in time:  0.099204041
Finished in time:  0.095198
Finished in time:  0.077157417
Finished in time:  0.084327958
Finished in time:  0.080791833
Finished in time:  0.084751625
Done sleeping
Done sleeping
Finished in time:  1.282027666
</code></pre>
<h2 id="Pool-map-func-list-æ¥å–ä»£-list-map-func-list"><a href="#Pool-map-func-list-æ¥å–ä»£-list-map-func-list" class="headerlink" title="Pool.map(func, list) æ¥å–ä»£ list(map(func, list))"></a>Pool.map(func, list) æ¥å–ä»£ list(map(func, list))</h2><ol>
<li>ä½†æ˜¯çœ‹ä¸Šå»æ²¡å‘ç°èŠ‚çœæ—¶é—´</li>
</ol>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">x = <span class="built_in">list</span>(<span class="built_in">map</span>(req_get, create_list.keys()))</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">run_get</span>():</span><br><span class="line">    <span class="keyword">with</span> Pool(core_num) <span class="keyword">as</span> p:</span><br><span class="line">        x = p.<span class="built_in">map</span>(req_get, create_list.keys())</span><br><span class="line">        <span class="keyword">return</span> x</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<pre><code>If x equals get_list:369,  369
[2023-04-11 14:08:28] [Line: 184] INFO - Total running time: 53.477982
[2023-04-11 14:08:28] [Line: 185] INFO - Create clients number:369
[2023-04-11 14:08:28] [Line: 186] INFO - Get clients number: 369
[2023-04-11 14:08:28] [Line: 187] ERROR - Create clients fail number: 0
[2023-04-11 14:08:28] [Line: 188] ERROR - Create clients fail information: []
369
369
369
369
</code></pre>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="https://angellaugh.github.io/2023/04/11/openssl/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/uploads/avatar.jpg">
      <meta itemprop="name" content="Angellaugh">
      <meta itemprop="description" content="æŠ€æœ¯ï¼Œç”Ÿæ´»ï¼Œè‰ºæœ¯ï¼Œæ—…è¡Œï¼Œéƒ½è®°å½•ä¸‹æ¥">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Angellaugh's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/04/11/openssl/" class="post-title-link" itemprop="url">OpenSSL</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2023-04-11 15:27:23" itemprop="dateCreated datePublished" datetime="2023-04-11T15:27:23+00:00">2023-04-11</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Teckknowledge/" itemprop="url" rel="index"><span itemprop="name">Teckknowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="openssl"><a href="#openssl" class="headerlink" title="openssl"></a>openssl</h1><p>åœ¨SSL/TLS/HTTPSé€šä¿¡ä¸­ï¼Œè¯ä¹¦è™½ç„¶ä¸æ˜¯TLS/SSLåè®®çš„ä¸€éƒ¨åˆ†ï¼Œå´æ˜¯HTTPSéå¸¸å…³é”®çš„ä¸€ç¯ï¼Œç½‘ç«™å¼•å…¥è¯ä¹¦æ‰èƒ½é¿å…ä¸­é—´äººæ”»å‡»ã€‚è¯ä¹¦æ¶‰åŠäº†å¾ˆå¤šå¯†ç å­¦çŸ¥è¯†ï¼Œç†è§£è¯ä¹¦åï¼Œå†æ·±å…¥ç†è§£TLS/SSLåè®®ï¼Œæ•ˆæœä¼šæ›´å¥½ã€‚</p>
<p>å•¥æ˜¯TLSï¼Ÿï¼Ÿï¼ŸMutual TLS (mTLS) certificate authentication åŒå‘è¯ä¹¦è®¤è¯</p>
<p>OpenSSL æ˜¯ä¸€ä¸ªå®‰å…¨å¥—æ¥å­—å±‚å¯†ç åº“ï¼Œå›Šæ‹¬ä¸»è¦çš„å¯†ç ç®—æ³•ã€å¸¸ç”¨å¯†é’¥ã€è¯ä¹¦å°è£…ç®¡ç†åŠŸèƒ½åŠå®ç°sslåè®®ã€‚<br>OpenSSLæ•´ä¸ªè½¯ä»¶åŒ…å¤§æ¦‚å¯ä»¥åˆ†æˆä¸‰ä¸ªä¸»è¦çš„åŠŸèƒ½éƒ¨åˆ†ï¼š</p>
<ol>
<li>SSLåè®®åº“libssl</li>
<li>åº”ç”¨ç¨‹åºå‘½ä»¤å·¥å…·</li>
<li>å¯†ç ç®—æ³•åº“libcrypto</li>
</ol>
<p>.KEY ç§é’¥ã€‚</p>
<p><strong>.CSR</strong> æ˜¯ Certificate Signing Request çš„ç¼©å†™ï¼Œå³è¯ä¹¦ç­¾åè¯·æ±‚ï¼Œè¿™ä¸æ˜¯è¯ä¹¦ï¼Œåªæ˜¯åŒ…å«ç”³è¯·è¯ä¹¦çš„åŸºæœ¬ä¿¡æ¯ã€‚ç”Ÿæˆè¯ä¹¦æ—¶è¦æŠŠè¿™ä¸ªæäº¤ç»™æƒå¨çš„è¯ä¹¦é¢å‘æœºæ„ï¼Œé¢å‘æœºæ„å®¡æ ¸é€šè¿‡ä¹‹åï¼Œå†æ ¹æ®è¿™äº›ç”³è¯·ä¿¡æ¯ç”Ÿæˆç›¸åº”çš„è¯ä¹¦ã€‚</p>
<p>.CRT å³ certificateçš„ç¼©å†™ï¼Œå³è¯ä¹¦ã€‚</p>
<p><strong>X.509</strong> å®šä¹‰å…¬é’¥è¯ä¹¦æ ¼å¼ï¼Œ structureï¼Œ ä¸åŒçš„å¯†é’¥æœ‰ä¸åŒçš„ç»“æ„ä½“ã€‚</p>
<blockquote>
<p>X.509çš„è¯ä¹¦æ–‡ä»¶ï¼Œä¸€èˆ¬ä»¥.crtç»“å°¾ï¼Œæ ¹æ®è¯¥æ–‡ä»¶çš„å†…å®¹ç¼–ç æ ¼å¼ï¼Œå¯ä»¥åˆ†ä¸ºä»¥ä¸‹äºŒç§æ ¼å¼ï¼š</p>
</blockquote>
<blockquote>
<p>.PEM - Privacy Enhanced Mailï¼Œä»¥base64ç¼–ç ï¼Œå°†äºŒè¿›åˆ¶æ–‡ä»¶è½¬ä¸ºæ–‡æœ¬ï¼Œæ‰“å¼€çœ‹æ–‡æœ¬æ ¼å¼ï¼Œä»¥â€â€”â€“BEGINâ€¦â€œå¼€å¤´ï¼Œâ€â€”â€“ENDâ€¦â€ç»“å°¾ï¼ŒApache å’Œ *NIX æœåŠ¡å™¨åå‘äºä½¿ç”¨è¿™ç§ç¼–ç æ ¼å¼ã€‚</p>
</blockquote>
<blockquote>
<p>.DER - Distinguished Encoding Rulesï¼Œæ˜¯äºŒè¿›åˆ¶æ ¼å¼ï¼Œä¸å¯è¯»ã€‚Java å’Œ Windows æœåŠ¡å™¨åå‘äºä½¿ç”¨è¿™ç§ç¼–ç æ ¼å¼ã€‚</p>
</blockquote>
<h2 id="1-è‡ªç­¾è¯ä¹¦ï¼Œ-CAã€è¯ä¹¦é“¾ã€è¯ä¹¦çš„æ’¤é”€-CRLsè¯ä¹¦åŠé”€åˆ—è¡¨-certificate-revocation-lists"><a href="#1-è‡ªç­¾è¯ä¹¦ï¼Œ-CAã€è¯ä¹¦é“¾ã€è¯ä¹¦çš„æ’¤é”€-CRLsè¯ä¹¦åŠé”€åˆ—è¡¨-certificate-revocation-lists" class="headerlink" title="1. è‡ªç­¾è¯ä¹¦ï¼Œ CAã€è¯ä¹¦é“¾ã€è¯ä¹¦çš„æ’¤é”€ CRLsè¯ä¹¦åŠé”€åˆ—è¡¨: certificate revocation lists"></a>1. è‡ªç­¾è¯ä¹¦ï¼Œ CAã€è¯ä¹¦é“¾ã€è¯ä¹¦çš„æ’¤é”€ CRLsè¯ä¹¦åŠé”€åˆ—è¡¨: certificate revocation lists</h2><h3 id="1-1-For-instances"><a href="#1-1-For-instances" class="headerlink" title="1.1. For instances:"></a>1.1. For instances:</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">openssl genrsa -out server.key 2048  <span class="comment"># å…ˆç”Ÿæˆä¸€ä¸ªç§é’¥                 </span></span><br><span class="line">openssl req -new -key server.key -out server.csr <span class="comment"># ç”¨è¿™ä¸ªç§é’¥åŠ å¯†è¯ä¹¦è¯·æ±‚ä¿¡æ¯ï¼Œç”Ÿæˆä¸€ä¸ªè¯ä¹¦è¯·æ±‚</span></span><br><span class="line">openssl x509 -req -<span class="keyword">in</span> server.csr -out server.crt -signkey server.key -days 3650 <span class="comment"># ç”¨è¯ä¹¦è¯·æ±‚ å’Œ ç§é’¥è‡ªç­¾åæ¥ç”³è¯·ä¸€ä¸ªx509å…¬é’¥</span></span><br><span class="line"><span class="comment"># ç”¨x509å…¬é’¥ å’Œ ç§é’¥è‡ªç­¾åæ¥å‘è¯·æ±‚</span></span><br><span class="line">python3 manage.py runserver_plus --cert-file ./server.crt --key-file ./server.key 0.0.0.0:8000</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><figcaption><span>Generate Root CA</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br></pre></td><td class="code"><pre><span class="line">openssl genrsa -out private/ca.key 2048 <span class="comment">#å…ˆç”Ÿæˆä¸€ä¸ªç§é’¥</span></span><br><span class="line"></span><br><span class="line">CIAM-ali1:~/certification <span class="comment"># openssl genrsa -out private/ca.key 2048</span></span><br><span class="line">Generating RSA private key, 2048 bit long modulus (2 primes)</span><br><span class="line">.....................+++++</span><br><span class="line">.............+++++</span><br><span class="line">e is 65537 (0x010001)</span><br><span class="line">CIAM-ali1:~/certification <span class="comment"># cat private/ca.key</span></span><br><span class="line">-----BEGIN RSA PRIVATE KEY-----</span><br><span class="line">MIIEpAIBAAKCAQEArPbCOb9to</span><br><span class="line">â€¦â€¦</span><br><span class="line">XfJxLjmrJIxzlAn5/3OI9sAuZW0ZQu3VhpMXow/d/IN4T3i5UNOjdA==</span><br><span class="line">-----END RSA PRIVATE KEY-----</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç”¨ç§é’¥è‡ªç­¾ï¼Œç”Ÿæˆä¸€ä¸ªx509 çš„ å…¬é’¥CA</span></span><br><span class="line">openssl req -new -x509 -days 365 -key private/ca.key -out certs/ca.pem -subj <span class="string">&quot;/C=CN/ST=Shanghai/L=Shanghai/O=Dell/OU=Dell/CN=west.isilon.com&quot;</span> -extensions v3_ca -config openssl.cnf</span><br><span class="line">CIAM-ali1:~/certification <span class="comment"># tree</span></span><br><span class="line">.</span><br><span class="line">â”œâ”€â”€ certs</span><br><span class="line">â”‚   â””â”€â”€ ca.pem</span><br><span class="line">â”œâ”€â”€ crl</span><br><span class="line">â”œâ”€â”€ csr</span><br><span class="line">â”œâ”€â”€ index.txt</span><br><span class="line">â”œâ”€â”€ index.txt.attr</span><br><span class="line">â”œâ”€â”€ intermediate</span><br><span class="line">â”œâ”€â”€ openssl.cnf</span><br><span class="line">â”œâ”€â”€ private</span><br><span class="line">â”‚   â””â”€â”€ ca.key</span><br><span class="line">â””â”€â”€ serial</span><br><span class="line">5 directories, 6 files</span><br><span class="line">CIAM-ali1:~/certification <span class="comment"># cat certs/ca.pem</span></span><br><span class="line">-----BEGIN CERTIFICATE-----</span><br><span class="line">MIID0DCCArigAwIBAgIUNq7/2QHSt6dhvy5XVEIlx2bqJ1AwDQYJKoZIhvcNAQEL</span><br><span class="line">dR2qFJjutlz/ExPDqhRMzSGzsMH47uH2j/rEsIW+4K0vU6G9HIIWpa4xoET+TQJI</span><br><span class="line">p5DKgza5t0QBuULe9YTMJTlHl2E=</span><br><span class="line">-----END CERTIFICATE-----</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># newkey:ç”Ÿæˆä¸€ä¸ªè¯ä¹¦è¯·æ±‚ï¼ŒåŠ ä¸€ä¸ªç§é’¥ï¼Œ-nodes:ä¸åŠ å¯†ç§é’¥ï¼Œç”Ÿæˆserver certificate and use CA to issue it </span></span><br><span class="line">openssl req -new -newkey rsa:2048 -nodes -out csr/server.csr -keyout private/server.key -subj <span class="string">&quot;/C=CN/ST=Shanghai/L=Shanghai/O=Dell/OU=Dell/CN=ciam.west.isilon.com&quot;</span>  -config openssl.cnf -extensions v3_server</span><br><span class="line">CIAM-ali1:~/certification <span class="comment"># openssl req -new -newkey rsa:2048 -nodes -out csr/server.csr -keyout private/server.key -subj &quot;/C=CN/ST=Shanghai/L=Shanghai/O=Dell/OU=Dell/CN=ciam.west.isilon.com&quot;  -config openssl.cnf -extensions v3_server</span></span><br><span class="line">Generating a RSA private key</span><br><span class="line">............................+++++</span><br><span class="line">..................................................+++++</span><br><span class="line">writing new private key to <span class="string">&#x27;private/server.key&#x27;</span></span><br><span class="line">-----</span><br><span class="line">CIAM-ali1:~/certification <span class="comment"># tree</span></span><br><span class="line">.</span><br><span class="line">â”œâ”€â”€ certs</span><br><span class="line">â”‚   â””â”€â”€ ca.pem</span><br><span class="line">â”œâ”€â”€ crl</span><br><span class="line">â”œâ”€â”€ csr</span><br><span class="line">â”‚   â””â”€â”€ server.csr</span><br><span class="line">â”œâ”€â”€ index.txt</span><br><span class="line">â”œâ”€â”€ index.txt.attr</span><br><span class="line">â”œâ”€â”€ intermediate</span><br><span class="line">â”œâ”€â”€ openssl.cnf</span><br><span class="line">â”œâ”€â”€ private</span><br><span class="line">â”‚   â”œâ”€â”€ ca.key</span><br><span class="line">â”‚   â””â”€â”€ server.key</span><br><span class="line">â””â”€â”€ serial</span><br><span class="line"></span><br><span class="line">5 directories, 8 files</span><br><span class="line">CIAM-ali1:~/certification <span class="comment"># cat csr/server.csr</span></span><br><span class="line">-----BEGIN CERTIFICATE REQUEST-----</span><br><span class="line">MIIDJjCCAg4CAQAwcDELMAkGA1UEBhMCQ04xETAPBgNVBAgMCFNoYW5naGFpMREw</span><br><span class="line">CIAM-ali1:~/certification <span class="comment"># cat private/server.key</span></span><br><span class="line">-----BEGIN PRIVATE KEY-----</span><br><span class="line">MIIEvgIBADANBgkqhkiG9w0BAQEFAASCBKgwggSkAgEAAoIBAQDpCNWLNTNCFf0K</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># ca:å¯ä»¥sign certificate reqï¼Œ ç­¾åè¯ä¹¦è¯·æ±‚ï¼Œ å¹¶ä¸”ç”Ÿæˆ CRLsè¯ä¹¦åŠé”€åˆ—è¡¨: certificate revocation lists</span></span><br><span class="line"><span class="comment"># batch: æ‰€æœ‰è¯ä¹¦will be certified automatically.  notext:ä¸è¦æŠŠè¯ä¹¦æ–‡æœ¬å½¢å¼è¾“å‡ºåˆ°æ–‡ä»¶ï¼Œæ„æ€æ˜¯äºŒè¿›åˆ¶ï¼Ÿ</span></span><br><span class="line"><span class="comment"># extensions: default x509, å¦‚æœæ²¡æœ‰extension sectionï¼Œé‚£ä¹ˆè¾“å‡ºV1 certificateï¼Œå¦åˆ™è¾“å‡ºV3 certificate.x509v3.cnf</span></span><br><span class="line">openssl ca -batch -notext -<span class="keyword">in</span> csr/server.csr -out certs/server.pem -config openssl.cnf -extensions v3_server</span><br><span class="line">CIAM-ali1:~/certification <span class="comment"># openssl ca -batch -notext -in csr/server.csr -out certs/server.pem -config openssl.cnf -extensions v3_server</span></span><br><span class="line">Using configuration from openssl.cnf</span><br><span class="line">Check that the request matches the signature</span><br><span class="line">Signature ok</span><br><span class="line">The Subject<span class="string">&#x27;s Distinguished Name is as follows</span></span><br><span class="line"><span class="string">countryName           :PRINTABLE:&#x27;</span>CN<span class="string">&#x27;</span></span><br><span class="line"><span class="string">stateOrProvinceName   :ASN.1 12:&#x27;</span>Shanghai<span class="string">&#x27;</span></span><br><span class="line"><span class="string">localityName          :ASN.1 12:&#x27;</span>Shanghai<span class="string">&#x27;</span></span><br><span class="line"><span class="string">organizationName      :ASN.1 12:&#x27;</span>Dell<span class="string">&#x27;</span></span><br><span class="line"><span class="string">organizationalUnitName:ASN.1 12:&#x27;</span>Dell<span class="string">&#x27;</span></span><br><span class="line"><span class="string">commonName            :ASN.1 12:&#x27;</span>ciam.west.isilon.com<span class="string">&#x27;</span></span><br><span class="line"><span class="string">Certificate is to be certified until Mar 24 15:11:50 2024 GMT (365 days)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Write out database with 1 new entries</span></span><br><span class="line"><span class="string">Data Base Updated</span></span><br><span class="line"><span class="string">CIAM-ali1:~/certification # tree</span></span><br><span class="line"><span class="string">.</span></span><br><span class="line"><span class="string">â”œâ”€â”€ certs</span></span><br><span class="line"><span class="string">â”‚   â”œâ”€â”€ 1000.pem</span></span><br><span class="line"><span class="string">â”‚   â”œâ”€â”€ ca.pem</span></span><br><span class="line"><span class="string">â”‚   â””â”€â”€ server.pem</span></span><br><span class="line"><span class="string">â”œâ”€â”€ crl</span></span><br><span class="line"><span class="string">â”œâ”€â”€ csr</span></span><br><span class="line"><span class="string">â”‚   â””â”€â”€ server.csr</span></span><br><span class="line"><span class="string">â”œâ”€â”€ index.txt</span></span><br><span class="line"><span class="string">â”œâ”€â”€ index.txt.attr</span></span><br><span class="line"><span class="string">â”œâ”€â”€ index.txt.attr.old</span></span><br><span class="line"><span class="string">â”œâ”€â”€ index.txt.old</span></span><br><span class="line"><span class="string">â”œâ”€â”€ intermediate</span></span><br><span class="line"><span class="string">â”œâ”€â”€ openssl.cnf</span></span><br><span class="line"><span class="string">â”œâ”€â”€ private</span></span><br><span class="line"><span class="string">â”‚   â”œâ”€â”€ ca.key</span></span><br><span class="line"><span class="string">â”‚   â””â”€â”€ server.key</span></span><br><span class="line"><span class="string">â”œâ”€â”€ serial</span></span><br><span class="line"><span class="string">â””â”€â”€ serial.old</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">5 directories, 13 files</span></span><br><span class="line"><span class="string">CIAM-ali1:~/certification # cat certs/server.pem</span></span><br><span class="line"><span class="string">-----BEGIN CERTIFICATE-----</span></span><br><span class="line"><span class="string">MIIDpjCCAo6gAwIBAgICEAAwDQYJKoZIhvcNAQELBQAwazELMAkGA1UEBhMCQ04x</span></span><br><span class="line"><span class="string"></span></span><br></pre></td></tr></table></figure>

<h4 id="1-1-1-å­—æ®µè§£é‡Š"><a href="#1-1-1-å­—æ®µè§£é‡Š" class="headerlink" title="1.1.1. å­—æ®µè§£é‡Š"></a>1.1.1. å­—æ®µè§£é‡Š</h4><p><mark>openssl genrsa -out ca.key 2048</mark></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">genrsa:  ç”ŸæˆRSAåŠ å¯†çš„ç§é’¥ã€‚ generates an RSA private key, <span class="built_in">which</span> essentially involves the generation of two prime numbers.</span><br><span class="line">  -out: The output file to write to</span><br><span class="line">  numbits: the size of the private key to generate <span class="keyword">in</span> bits, default:2048</span><br><span class="line">  </span><br><span class="line"></span><br><span class="line">ä¸åŠ å¯†çš„RSAç§é’¥ã€‚</span><br><span class="line">openssl genrsa -out ca.key 2048</span><br><span class="line"></span><br><span class="line">åŠ å¯†çš„RSAç§é’¥ã€‚</span><br><span class="line">openssl genrsa -des3 -out ca.key 2048</span><br><span class="line"></span><br><span class="line">æŒ‡å®šéšæœºæ•°åˆ›å»ºRSAç§é’¥ã€‚</span><br><span class="line">openssl genrsa -des3 -out ca.key 2048 -seed abc</span><br><span class="line">openssl genrsa -des3 -out ca.key 2048 -rand file:hello.txt</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><mark>openssl req -new -key server.key -out server.csr</mark></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">req: åˆ›å»ºå’Œå¤„ç†PKCS\<span class="comment">#10æ ¼å¼çš„è¯ä¹¦è¯·æ±‚ã€‚ creates and processes certificate requests in PKCS#10 format</span></span><br><span class="line">     è¿˜å¯ä»¥æ·»åŠ é¢å¤–ä¿¡æ¯æ¥åˆ›å»ºè‡ªç­¾åCAè¯ä¹¦ã€‚  ä¹Ÿå°±æ˜¯æ‹¿ç§é’¥ç­¾åä¹‹åå½“åš CAã€‚ä¸Šä¸€æ­¥å·²ç»åˆ›å»ºäº†ç§é’¥ã€‚å¯ä»¥æ‹¿ç§é’¥æ¥åˆ›CAã€‚</span><br><span class="line">-new -keyï¼š ç”Ÿæˆä¸€ä¸ªæ–°çš„ certificate reqï¼Œ å¦‚æœä¸æŒ‡å®š-key, é‚£ä¹ˆå°±è¯»å–configfileä¸­çš„é…ç½®é¡¹ã€‚</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">PKCS\<span class="comment">#10: è¯ä¹¦è¯·æ±‚æ–‡ä»¶ï¼Œç±»ä¼¼äºCSRæ–‡ä»¶ï¼Œä¸€èˆ¬æ˜¯ä¸€ä¸ªbase64æ–‡ä»¶ã€‚</span></span><br><span class="line">          æ˜¯ä¸€æ®µå¯ä»¥å‘CAç”³è¯·è¯ä¹¦çš„P10è¯·æ±‚ã€‚</span><br><span class="line">          è¯¥è¯·æ±‚ä¸€èˆ¬æ˜¯é€šè¿‡ç¡¬ä»¶ç”Ÿæˆå¯†é’¥å¯¹åï¼Œå°†ç§é’¥å•ç‹¬å­˜æ”¾ï¼Œä½†æ˜¯å°†å…¬é’¥æ”¾å…¥p10ä¸­ï¼Œ</span><br><span class="line">          CAå—åˆ°è¯¥p10è¯·æ±‚åï¼Œå¯ä»¥æ ¡éªŒï¼Œå¹¶æ ¹æ®p10ä¸­çš„ä¿¡æ¯åˆ¶ä½œä¸€å¼ æ²¡æœ‰ç§é’¥çš„å…¬é’¥è¯ä¹¦ã€‚</span><br><span class="line">æ„æ€æ˜¯PKCS10 --&gt; æœ¬åœ°ä¼šæœ‰ä¸€å¯¹å…¬ç§é’¥  --&gt; CA æ‹¿åˆ°P10å¸¦æ¥çš„å…¬é’¥ --&gt; CA generate --&gt; ä¸€å¼ æ²¡æœ‰ç§é’¥çš„å…¬é’¥ã€‚</span><br><span class="line">            </span><br></pre></td></tr></table></figure>

<p><mark>openssl req -new -x509 -days 365 -key private/ca.key -out certs/ca.pem -subj â€œ/C=CN/ST=Shanghai/L=Shanghai/O=Dell/OU=Dell/CN=west.isilon.comâ€ -extensions v3_ca -config openssl.cnf</mark></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ç”¨åŸæœ‰çš„RSAå¯†é’¥ç”Ÿæˆè¯ä¹¦è¯·æ±‚æ–‡ä»¶ï¼ŒæŒ‡å®š-batché€‰é¡¹ï¼Œä¸è¯¢é—®ç”³è¯·è€…çš„ä¿¡æ¯ã€‚ä¸»ä½“ä¿¡æ¯ç”±å‘½ä»¤è¡ŒsubjæŒ‡å®šï¼Œä¸”è¾“å‡ºå…¬é’¥</span><br><span class="line">-config openssl.cnf</span><br><span class="line">-days  é»˜è®¤30å¤©ï¼Œä¸-x509ä¸€èµ·ä½¿ç”¨</span><br><span class="line">-extensions æŒ‡å®šå¯é€‰sections ä»configfileä¸­ï¼Œ ä¸-x509ä¸€èµ·ä½¿ç”¨</span><br><span class="line">-subj Replaces the subject field of an input request, /type0=value0/type1=value1/type2=</span><br><span class="line">-x509  è¾“å‡ºè‡ªç­¾åè¯ä¹¦ï¼Œè€Œä¸æ˜¯è¯ä¹¦è¯·æ±‚ï¼Œ åœ¨è¿™é‡Œå°±æ˜¯CAã€‚</span><br><span class="line"><span class="comment">#This is typically used to generate a test certificate or a self-signed root CA.</span></span><br></pre></td></tr></table></figure>




<p><mark>openssl x509 -req -in server.csr -out server.crt -signkey server.key -days 3650</mark></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">x509: æ˜¯ä¸ªå…¬é’¥è¯ä¹¦ï¼Œä¸»è¦æœ‰ä¸ªsign certificate requests like a mini CA</span><br><span class="line">-req: æœŸæœ›æœ‰ä¸ªè¯ä¹¦è¯·æ±‚csrï¼ˆè€Œä¸æ˜¯è¯ä¹¦æœ¬èº«ï¼‰åœ¨inputä¸­ï¼Œ</span><br><span class="line">-signkey: ä½¿ç”¨æä¾›çš„ç§é’¥å¯¹æ–‡ä»¶è¿›è¡Œè‡ªç­¾å</span><br></pre></td></tr></table></figure>




<ol>
<li>Create a Certificate Authority private key (this is your most important key):</li>
</ol>
<p><code>openssl req -new -newkey rsa:1024 -nodes -out ca.csr -keyout ca.key</code></p>
<ol start="2">
<li>Create your CA self-signed certificate:</li>
</ol>
<p><code>openssl x509 -trustout -signkey ca.key -days 365 -req -in ca.csr -out ca.pem</code></p>
<ol start="3">
<li>Issue a client certificate by first generating the key, then request (or use one provided by external system) then sign the certificate using private key of your CA:<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">openssl genrsa -out client.key 1024</span><br><span class="line">openssl req -new -key client.key -out client.csr</span><br><span class="line">openssl ca -in client.csr -out client.cer</span><br></pre></td></tr></table></figure></li>
</ol>
<h4 id="1-1-2-Manually-stopping-Pacific-keycloak"><a href="#1-1-2-Manually-stopping-Pacific-keycloak" class="headerlink" title="1.1.2. Manually stopping Pacific keycloak"></a>1.1.2. Manually stopping Pacific keycloak</h4><p><code>ps -ef | grep &quot;/opt/keycloak&quot; | awk &#39;&#123;print $2&#125;&#39; | xargs kill</code></p>
<h3 id="1-2-äº†è§£CAï¼Œ-root-CAï¼Œ-ä»¥åŠè‡ªç­¾åï¼ŒCAç­¾å"><a href="#1-2-äº†è§£CAï¼Œ-root-CAï¼Œ-ä»¥åŠè‡ªç­¾åï¼ŒCAç­¾å" class="headerlink" title="1.2. äº†è§£CAï¼Œ root CAï¼Œ ä»¥åŠè‡ªç­¾åï¼ŒCAç­¾å"></a>1.2. äº†è§£CAï¼Œ root CAï¼Œ ä»¥åŠè‡ªç­¾åï¼ŒCAç­¾å</h3><p>åªæœ‰root æ˜¯è‡ªç­¾åï¼Œå…¶ä»–éƒ½æ˜¯CAç­¾å<br>ROOTè¯ä¹¦æ˜¯ç”¨æ¥ç­¾å‘å’ŒéªŒè¯CAè¯ä¹¦çš„ï¼Œé˜²æ­¢åœ¨ä¸çŸ¥é“ç­¾åè€…ç§é’¥çš„æƒ…å†µä¸‹æ¶æ„ç¯¡æ”¹è¯ä¹¦çš„å†…å®¹<br>Root CA -&gt; Server CA -&gt; Server(æœ€ç»ˆç”¨æˆ·)</p>
<p><mark>å…¶å®å°±æ˜¯ä¸€ä¸ªä½¿ç”¨ç§é’¥ç­¾å‘ï¼ˆissueï¼‰çš„å…³ç³»ã€‚</mark></p>
<ol>
<li><pre><code> ROOT è¯ä¹¦
</code></pre>
</li>
<li><pre><code>               çš„ç§é’¥
</code></pre>
</li>
<li><pre><code>                       ç­¾å‘   `ç”¨ç§é’¥åŠ è¿‡å¯†çš„signç­¾å`, `ç­¾åç®—æ³•ï¼Œé€šå¸¸æ˜¯Sha256WithHash`
</code></pre>
</li>
<li><pre><code>                            CA è¯ä¹¦
</code></pre>
</li>
<li><pre><code>                                      ç­¾å‘
</code></pre>
</li>
<li><pre><code>                                            x.509è¯ä¹¦ï¼ˆå…¬é’¥è¯ä¹¦), ä»¥.cert, .crtåç¼€ï¼Œæ˜¯ASN.1ç¼–ç  Abstract syntax notation dot one æŠ½è±¡è¯­æ³•æ ‡è®°
</code></pre>
<blockquote>
<p>ç§˜é’¥å’Œè¯ä¹¦éƒ½æ˜¯ SEQUENCE ç±»å‹ï¼Œ<br>è€Œ SEQUENCE çš„ type æ˜¯ 0x30ï¼Œä¸”é•¿åº¦æ˜¯å¤§äº 127 çš„ï¼Œå› æ­¤ç¬¬2 ä¸ªå­—èŠ‚æ˜¯ 0x82.<br>ASN.1 ç¼–ç è¡¨ç¤ºçš„æ•°æ®æ˜¯äºŒè¿›åˆ¶æ•°æ®ï¼Œé€šå¸¸é€šè¿‡ BASE64 è½¬åŒ–æˆå­—ç¬¦ä¸²ä¿å­˜åœ¨ pem æ–‡ä»¶ä¸­ï¼Œ<br>è€Œ 0x3082 ç»è¿‡ BASE64 ç¼–ç åï¼Œå°±æ˜¯å­—ç¬¦ä¸² MIï¼Œ<mark>å› æ­¤æ‰€æœ‰ PEM æ–‡ä»¶å­˜å‚¨çš„ç§˜é’¥å¼€å§‹çš„å‰ä¸¤ä¸ªå­—ç¬¦æ˜¯ MI</mark>ã€‚</p>
</blockquote>
</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">pkcs<span class="comment">#1 ç”¨äºå®šä¹‰ RSA å…¬é’¥ã€ç§é’¥ç»“æ„</span></span><br><span class="line">pkcs<span class="comment">#7 ç”¨äºå®šä¹‰è¯ä¹¦é“¾</span></span><br><span class="line">pkcs<span class="comment">#8 ç”¨äºå®šä¹‰ä»»ä½•ç®—æ³•å…¬ç§é’¥</span></span><br><span class="line">pkcs<span class="comment">#12 ç”¨äºå®šä¹‰ç§é’¥è¯ä¹¦</span></span><br><span class="line">X.509 å®šä¹‰å…¬é’¥è¯ä¹¦</span><br></pre></td></tr></table></figure>


<p><img src="/uploads/69094374817016.png"><br><img src="vx_images/69094374817016.png"></p>
<h4 id="1-2-1-çœ‹ä¸ªkeytoolç”Ÿæˆè¯ä¹¦çš„èŒƒä¾‹"><a href="#1-2-1-çœ‹ä¸ªkeytoolç”Ÿæˆè¯ä¹¦çš„èŒƒä¾‹" class="headerlink" title="1.2.1. çœ‹ä¸ªkeytoolç”Ÿæˆè¯ä¹¦çš„èŒƒä¾‹"></a>1.2.1. çœ‹ä¸ªkeytoolç”Ÿæˆè¯ä¹¦çš„èŒƒä¾‹</h4><p><code>keytool -genkeypair -storepass password -storetype PKCS12 -keyalg RSA -keysize 2048 -dname &quot;CN=server&quot; -alias server -ext &quot;SAN:c=DNS:localhost,IP:127.0.0.1&quot; -keystore conf/server.keystore</code></p>
<p>-genkeypair  ç”Ÿæˆå¯†é’¥å¯¹</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Generates a key pair (a public key and associated private key).</span><br><span class="line">              Wraps the public key into an X.509 v3 self-signed certificate,</span><br><span class="line">              which is stored as a single-element certificate chain. This</span><br><span class="line">              certificate chain and the private key are stored in a new</span><br><span class="line">              keystore entry identified by alias.</span><br></pre></td></tr></table></figure>
<p>-storepass æ›´æ”¹å¯†é’¥åº“çš„å­˜å‚¨å£ä»¤,<br>-storetype   PKCS12 ç§é’¥è¯ä¹¦<br>-keyalg      RSA, DSA, EC, DES, DESede<br>-keysize<br>-dname</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">The dname value specifies the X.500 Distinguished Name to be</span><br><span class="line">    associated with the value of alias, and is used as the issuer</span><br><span class="line">    and subject fields in the self-signed certificate. If no</span><br><span class="line">    distinguished name is provided at the command line, then the</span><br><span class="line">    user is prompted for one.</span><br></pre></td></tr></table></figure>
<p>-ext<br>-keystore<br>-validity<br>-keypass</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SAN or SubjectAlternativeName</span><br><span class="line">            Values: type:value(,type:value)*, where type can be EMAIL, URI,</span><br><span class="line">            DNS, IP, or OID. The value argument is the string format value</span><br><span class="line">            for the type.</span><br></pre></td></tr></table></figure>


<h2 id="2-genkeypair-keyalg-keysize"><a href="#2-genkeypair-keyalg-keysize" class="headerlink" title="2. genkeypair keyalg keysize"></a>2. genkeypair keyalg keysize</h2><p>OpenSSLä¸€å…±å®ç°äº†4ç§éå¯¹ç§°åŠ å¯†ç®—æ³•ï¼Œ<br>DHç®—æ³•ä¸€èˆ¬ç”¨æˆ·å¯†é’¥äº¤æ¢ã€‚RSA ç®—æ³•æ—¢å¯ä»¥ç”¨äºå¯†é’¥äº¤æ¢ï¼Œä¹Ÿå¯ä»¥ç”¨äºæ•°å­—ç­¾åï¼ŒDSAç®—æ³•åˆ™ä¸€èˆ¬åªç”¨äºæ•°å­—ç­¾å<br>DHã€<br>RSAã€<br>DSA<br>æ¤­åœ†æ›²çº¿ç®—æ³•ï¼ˆECï¼‰ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">-genkeypair ç”Ÿæˆå¯†é’¥å¯¹      -keyalgç®—æ³•   RSA             -keysize   2048  </span><br><span class="line">                                         DSA                        1024 </span><br><span class="line">                                         EC                         256</span><br><span class="line">-genseckey ç”Ÿæˆå¯†é’¥          -keyalg      DES                        56   </span><br><span class="line">                                         DESede                     168</span><br></pre></td></tr></table></figure>

<h5 id="2-1-1-1-ROOTè¯ä¹¦"><a href="#2-1-1-1-ROOTè¯ä¹¦" class="headerlink" title="2.1.1.1. ROOTè¯ä¹¦"></a>2.1.1.1. ROOTè¯ä¹¦</h5><h5 id="2-1-1-2-CAè¯ä¹¦å’Œ"><a href="#2-1-1-2-CAè¯ä¹¦å’Œ" class="headerlink" title="2.1.1.2. CAè¯ä¹¦å’Œ"></a>2.1.1.2. CAè¯ä¹¦å’Œ</h5><h5 id="2-1-1-3-ä½¿ç”¨CAè¯ç­¾å‘çš„X-509è¯ä¹¦"><a href="#2-1-1-3-ä½¿ç”¨CAè¯ç­¾å‘çš„X-509è¯ä¹¦" class="headerlink" title="2.1.1.3. ä½¿ç”¨CAè¯ç­¾å‘çš„X.509è¯ä¹¦"></a>2.1.1.3. ä½¿ç”¨CAè¯ç­¾å‘çš„X.509è¯ä¹¦</h5>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="https://angellaugh.github.io/2023/04/11/saml2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/uploads/avatar.jpg">
      <meta itemprop="name" content="Angellaugh">
      <meta itemprop="description" content="æŠ€æœ¯ï¼Œç”Ÿæ´»ï¼Œè‰ºæœ¯ï¼Œæ—…è¡Œï¼Œéƒ½è®°å½•ä¸‹æ¥">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Angellaugh's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/04/11/saml2/" class="post-title-link" itemprop="url">SAML 2.0</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2023-04-11 15:27:23" itemprop="dateCreated datePublished" datetime="2023-04-11T15:27:23+00:00">2023-04-11</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Teckknowledge/" itemprop="url" rel="index"><span itemprop="name">Teckknowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="SAML2-0"><a href="#SAML2-0" class="headerlink" title="SAML2.0"></a>SAML2.0</h1><h3 id="Conception"><a href="#Conception" class="headerlink" title="Conception"></a>Conception</h3><blockquote>
<p> <strong>SAML</strong>, Security Assertion Markup Language</p>
</blockquote>
<blockquote>
<p> <strong>IDP identity provider</strong>ï¼Œ for instance, AD,  ADFS, LDAP, èº«ä»½è®¤è¯authentication<br>    * Performs authentication and passes the userâ€™s identity and authorization level to the service provider</p>
</blockquote>
<blockquote>
<p><strong>SP service provider</strong>, for instance, cluster, application,  access resources<br>    * Trusts the identity provider and authorizes the given user to access the requested resource.<br><code>credential æ˜¯å•¥ï¼Ÿ idp authorizationçš„æ˜¯å•¥ï¼Ÿ</code></p>
</blockquote>
<ul>
<li>is the link between the authentication of a userâ€™s identity and the authorization to use a service.</li>
<li>simplifies federated authentication and authorization processes for users, Identity providers, and service providers</li>
<li>enable sso, users can log in once, and those same credentials can be reused to log into other service providers</li>
<li>SAML authentication is the process of verifying the userâ€™s identity and credentials (password, two-factor authentication, etc.). SAML authorization tells the service provider what access to grant the authenticated user.</li>
<li>authentication = verify identity + verify credential  éªŒè¯èº«ä»½å’Œå‡­è¯ï¼Œ <font bgcolor=##FF7F50>ä¸ç†è§£è¿™ä¸ªcredential æ˜¯å•¥</font></li>
<li>SAML åšèº«ä»½å’Œå‡­è¯/èµ„æ ¼çš„éªŒè¯ï¼Œ SAMLæˆæƒå‘Šè¯‰SP åˆ†é…ä»€ä¹ˆæ ·çš„access ç»™é€šè¿‡éªŒè¯çš„user</li>
<li>SAML åŒæ—¶åšäº†authentication and authorization</li>
<li>manage one login per user &gt; manage seperate logins to email, customer relationships management <strong>CRM</strong>, ADs.</li>
<li>ç®€åŒ–äº†users, idpï¼Œspä¹‹é—´çš„è®¤è¯å’Œæˆæƒæµç¨‹ã€‚ authentication and authorization processes for users, Identity providers, and service providers.</li>
</ul>
<h3 id="Workflow"><a href="#Workflow" class="headerlink" title="Workflow"></a>Workflow</h3><ol>
<li>IDP å’Œ SP establish trust</li>
<li>user åœ¨IDP å’Œ SPä¸­éƒ½å­˜åœ¨</li>
<li>user login from IDP, IDPéªŒè¯é€šè¿‡åï¼Œç”ŸæˆSAML assertionï¼Œè¿”å›ç»™userï¼Œ</li>
<li>useræ‹¿ç€SAML assertion åˆ°SPéªŒè¯ï¼Œå¦‚æœé€šè¿‡ï¼Œuserå°±å¯ä»¥è®¿é—®SPï¼›<ol>
<li>SP æŠŠSAML assertionä¸­çš„userä¿¡æ¯å’Œ localçš„ user å¯¹æ¯”éªŒè¯ï¼Œ</li>
</ol>
</li>
<li>IDP æ‹¿ç€SAML assertion åˆ°å¦ä¸€ä¸ªSP å»éªŒè¯ï¼Œä¹Ÿé€šè¿‡çš„è¯ï¼Œuserä¹Ÿå¯ä»¥SSO è®¿é—® another applicationï¼›</li>
</ol>
<h3 id="IDP-å’Œ-SP-çš„äº¤æµ"><a href="#IDP-å’Œ-SP-çš„äº¤æµ" class="headerlink" title="IDP å’Œ SP çš„äº¤æµ"></a>IDP å’Œ SP çš„äº¤æµ</h3><ol>
<li>IDP å’Œ SP éƒ½config xmlï¼Œ contains settings and certificate of the system</li>
<li>this metadata exchange is establish the trust between IDP and SP like <code>Workflow point 1</code></li>
<li>this XML metadata file contains the form for the user identifier called <code>the name ID formats</code>, </li>
</ol>
<p><img src="/uploads/315430821585906.png"></p>
<p><img src="/uploads/149184710911054.png"></p>
<h3 id="2-ways-of-session-init"><a href="#2-ways-of-session-init" class="headerlink" title="2 ways of session init"></a>2 ways of session init</h3><p><img src="/uploads/288243668946728.png"></p>
<p><img src="/uploads/409973578816914.png"></p>
<h3 id="A-SAML-REQ-is-generated-from-SP-request-the-authentication-from-the-IDP"><a href="#A-SAML-REQ-is-generated-from-SP-request-the-authentication-from-the-IDP" class="headerlink" title="A SAML REQ, is generated from SP, request the authentication from the IDP"></a>A SAML REQ, is generated from SP, request the authentication from the IDP</h3><h3 id="A-SAML-RES-is-generated-from-the-IDP-contains-the-actual-assertion-of-authenticated-user-and-additional-user-profile"><a href="#A-SAML-RES-is-generated-from-the-IDP-contains-the-actual-assertion-of-authenticated-user-and-additional-user-profile" class="headerlink" title="A SAML RES, is generated from the IDP, contains the actual assertion of authenticated user, and additional user profile,"></a>A SAML RES, is generated from the IDP, contains the actual assertion of authenticated user, and additional user profile,</h3><p>such as group, role, depending on what the Service Provider can support.</p>
<h3 id="note"><a href="#note" class="headerlink" title="note"></a>note</h3><ol>
<li>SP ä»ä¸ç›´æ¥ä¸IDPäº¤æµnever directly interacts with IDPï¼Œbrowser å……å½“actsäº†æ‰§è¡Œcarry outæ‰€æœ‰é‡å®šå‘çš„ä»£ç†agentï¼Œacts as the agent to carry out all the redirections.</li>
<li>SP çŸ¥é“è¦å»æ‰¾å“ªä¸ª IDPï¼›</li>
<li>SPåœ¨æ‹¿åˆ° IDPè¿”å›çš„saml assertionä¹‹å‰æ˜¯ä¸çŸ¥é“ è°åœ¨è¦èµ„æºçš„ï¼Œä¹Ÿå°±æ˜¯è¯´ç”¨æˆ·è¾“å…¥çš„ç”¨æˆ·åå’Œå¯†ç ï¼Œåªä¼ é€’åˆ°IDPï¼Œuntil the SAML assertion comes back from the Identity Provider.</li>
<li>å¯ä»¥ç›´æ¥ä»IDPè®¤è¯ï¼Œç„¶åå»è®¿é—®SPï¼Œæ— éœ€å¿…é¡»ä»SPå‘èµ·è¯·æ±‚ï¼›</li>
<li>SAML èº«ä»½éªŒè¯æµæ˜¯å¼‚æ­¥çš„ã€‚SPä¸ä¼šç»´æŠ¤ç”Ÿæˆçš„ä»»ä½•èº«ä»½éªŒè¯è¯·æ±‚çš„ä»»ä½•çŠ¶æ€ã€‚å½“ SP æ”¶åˆ°æ¥è‡ª IDP çš„å“åº”æ—¶ï¼Œå“åº”å¿…é¡»åŒ…å«æ‰€æœ‰å¿…è¦çš„ä¿¡æ¯ã€‚</li>
</ol>
<h3 id="IdP-initiated-SSO-with-SAML-Authentication"><a href="#IdP-initiated-SSO-with-SAML-Authentication" class="headerlink" title="IdP-initiated SSO with SAML Authentication"></a>IdP-initiated SSO with SAML Authentication</h3><p><code>IDP ç”¨ä¹‹å‰å’ŒSPå»ºç«‹äº’ä¿¡æ—¶äº§ç”Ÿçš„ç§é’¥æ¥sign assertionï¼Œ ç„¶åé€šè¿‡user&#39;s browser å‘ç»™SPï¼Œ æˆ–è€…å‘é€å¯¹assertionçš„å¼•ç”¨ã€‚a reference to the assertion</code></p>
<p><code>SP receive the assertion, ç”¨pub keyæ¥éªŒè¯è¿™ä¸ªassertionæ˜¯å¦çœŸçš„æ¥è‡ªå®ƒä¿¡ä»»çš„IDPï¼Œä»¥åŠéªŒè¯è¿™ä¸ªassertionæ˜¯å¦è¢«ä¿®æ”¹è¿‡ã€‚ it validates the signature using the public key in order to ensure the SAML assertion really came from its trusted IDP</code></p>
<p><code>ç„¶å SP ä» assertionä¸­æå– extract identityå’Œå…¶ä»–å®ƒéœ€è¦çš„ä¿¡æ¯ã€‚</code></p>
<h3 id="SP-determine-which-IDP"><a href="#SP-determine-which-IDP" class="headerlink" title="SP determine which IDP"></a>SP determine which IDP</h3><ol>
<li>é€šè¿‡ç™»å½•ç”¨æˆ·çš„åŸŸåï¼Œ The SP may ask the user for their email address and use the domain of the email, such as  <a href="mailto:&#x70;&#x72;&#105;&#x74;&#x68;&#x76;&#105;&#x72;&#x61;&#x6a;&#x2e;&#x67;&#x61;&#x69;&#x6b;&#119;&#97;&#100;&#64;&#x64;&#101;&#108;&#x6c;&#x2e;&#99;&#111;&#x6d;">&#x70;&#x72;&#105;&#x74;&#x68;&#x76;&#105;&#x72;&#x61;&#x6a;&#x2e;&#x67;&#x61;&#x69;&#x6b;&#119;&#97;&#100;&#64;&#x64;&#101;&#108;&#x6c;&#x2e;&#99;&#111;&#x6d;</a></li>
<li>SP display a list of IDP,  user choose one </li>
<li>The resource URL may be specific to one IdP. </li>
<li>The SP may have placed a cookie containing IdP information in the userâ€™s browser the first time the user successfully signed on from the IDP and will use this information on subsequent accesses.</li>
</ol>
<h3 id="The-saml-assertionâ€™s-context"><a href="#The-saml-assertionâ€™s-context" class="headerlink" title="The saml assertionâ€™s context"></a>The saml assertionâ€™s context</h3><p><img src="/uploads/589974006532594.png"></p>
<h3 id="SAML-IdP-Providers"><a href="#SAML-IdP-Providers" class="headerlink" title="SAML IdP Providers:"></a>SAML IdP Providers:</h3><ol>
<li>Active Directory Federation Services (ADFS)</li>
<li>Auth0</li>
<li>Azure AD (Microsoft Azure Active Directory)</li>
<li>Okta</li>
<li>OneLogin</li>
<li>Ping Identity</li>
<li>Salesforce</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="https://angellaugh.github.io/2023/04/11/understandmapyieldlambda.py/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/uploads/avatar.jpg">
      <meta itemprop="name" content="Angellaugh">
      <meta itemprop="description" content="æŠ€æœ¯ï¼Œç”Ÿæ´»ï¼Œè‰ºæœ¯ï¼Œæ—…è¡Œï¼Œéƒ½è®°å½•ä¸‹æ¥">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Angellaugh's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/04/11/understandmapyieldlambda.py/" class="post-title-link" itemprop="url">Untitled</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2023-04-11 15:27:23" itemprop="dateCreated datePublished" datetime="2023-04-11T15:27:23+00:00">2023-04-11</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Table-of-Contents"><a href="#Table-of-Contents" class="headerlink" title="Table of Contents"></a>Table of Contents</h1> <p>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">numbers = [<span class="number">2</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">8</span>, <span class="number">5</span>]</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">square</span>(<span class="params">x</span>):</span><br><span class="line">    <span class="keyword">return</span> x * x</span><br><span class="line"></span><br><span class="line">a= []</span><br><span class="line"></span><br><span class="line"><span class="comment"># åªä¼šè¿™ä¹ˆå†™ï¼Œæˆ–è€…next</span></span><br><span class="line"><span class="keyword">for</span> x <span class="keyword">in</span> numbers:</span><br><span class="line">    a.append(square(x))</span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">map(function, *iterables)</span></span><br><span class="line"><span class="string">å¯¹æŒ‡å®šåºåˆ—åšæ˜ å°„ï¼Œè¿”å›å€¼æ˜¯ä¸ªè¿­ä»£å™¨ï¼Œå¯è¿­ä»£å¯¹è±¡ï¼š listï¼Œsetï¼Œ tuple</span></span><br><span class="line"><span class="string">map å–ä»£forå¾ªç¯</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">square_num = <span class="built_in">map</span>(square, numbers)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(square_num))</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(square_num)</span><br><span class="line"></span><br><span class="line"><span class="comment"># åœ¨listçš„æ—¶å€™è°ƒç”¨äº†square_numï¼Œè¿­ä»£5æ¬¡ï¼Œå¹¶ä¸”æŠŠæ¯æ¬¡è¿­ä»£çš„return éƒ½appendè¿›listä¸­ã€‚</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">list</span>(square_num))</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<pre><code>[4, 16, 36, 64, 25]
&lt;class &#39;map&#39;&gt;
&lt;map object at 0x1109a2c40&gt;
[4, 16, 36, 64, 25]
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç±»ä¼¼äº</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">testyield</span>(<span class="params">numbers</span>):</span><br><span class="line">    <span class="keyword">for</span> x <span class="keyword">in</span> numbers:</span><br><span class="line">        <span class="keyword">yield</span> square(x)</span><br><span class="line"></span><br><span class="line"><span class="comment"># my way</span></span><br><span class="line">a = testyield(numbers)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;next <span class="subst">&#123;<span class="built_in">next</span>(a)&#125;</span>&quot;</span>)  <span class="comment"># listå°±æ˜¯å¯¹æ¯ä¸ªå…ƒç´ nextçš„åŠ¨ä½œ</span></span><br><span class="line"><span class="keyword">for</span> x <span class="keyword">in</span> a:</span><br><span class="line">    <span class="built_in">print</span>(x)</span><br><span class="line"><span class="comment"># list can call the generator listå°±æ˜¯ä¸€ä¸ªå¾ªç¯call è¿­ä»£å™¨çš„åŠ¨ä½œï¼Œ next       </span></span><br><span class="line">a = <span class="built_in">list</span>(testyield(numbers))</span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line"></span><br><span class="line"><span class="comment">#å°†ä¼ å…¥listï¼Œæ”¹å†™æˆä¼ å…¥å•ä¸ªå…ƒç´ ï¼Œå»æ‰forå¾ªç¯ï¼Œå¤–é¢ç”¨mapå–ä»£for</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">testyield2</span>(<span class="params">x</span>):</span><br><span class="line">    <span class="comment">#yield square(x) è¿™é‡Œä¸è¡Œã€‚ã€‚ è²Œä¼¼yieldå¿…é¡»è¦å’Œforå¾ªç¯åœ¨ä¸€èµ·</span></span><br><span class="line">    <span class="keyword">return</span> square(x)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;testyield2 with map&quot;</span>)</span><br><span class="line">a = <span class="built_in">map</span>(testyield2, numbers)</span><br><span class="line"><span class="comment"># is a map object</span></span><br><span class="line"><span class="built_in">print</span>(a)</span><br><span class="line"></span><br><span class="line"><span class="comment"># is a generator</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">next</span>(a))</span><br><span class="line"><span class="comment"># is a list gegerator</span></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">list</span>(a))</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">testyield4</span>(<span class="params">x</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;under testyield444&quot;</span>)</span><br><span class="line">    a =<span class="keyword">yield</span> square(x)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;aa&quot;</span>)</span><br><span class="line">g = testyield4(<span class="number">2</span>)</span><br><span class="line"><span class="built_in">print</span>(g)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;call the testyield4 <span class="subst">&#123;<span class="built_in">next</span>(g)&#125;</span>&quot;</span>)</span><br><span class="line"><span class="comment"># for x in numbers:</span></span><br><span class="line"><span class="comment">#     g = testyield4(x)</span></span><br><span class="line"><span class="comment">#     print(next(g))</span></span><br><span class="line">    </span><br><span class="line">aa = [<span class="built_in">next</span>(testyield4(x)) <span class="keyword">for</span> x <span class="keyword">in</span> numbers]</span><br><span class="line"><span class="built_in">print</span>(aa)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">return å’Œ list[map(func, parameters)]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">yield å’Œlist[next(func(x)) for x in parameters]</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="https://angellaugh.github.io/2023/04/11/RSA/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/uploads/avatar.jpg">
      <meta itemprop="name" content="Angellaugh">
      <meta itemprop="description" content="æŠ€æœ¯ï¼Œç”Ÿæ´»ï¼Œè‰ºæœ¯ï¼Œæ—…è¡Œï¼Œéƒ½è®°å½•ä¸‹æ¥">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Angellaugh's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/04/11/RSA/" class="post-title-link" itemprop="url">RSA</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2023-04-11 15:27:23" itemprop="dateCreated datePublished" datetime="2023-04-11T15:27:23+00:00">2023-04-11</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Teckknowledge/" itemprop="url" rel="index"><span itemprop="name">Teckknowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Table-of-Contents"><a href="#Table-of-Contents" class="headerlink" title="Table of Contents"></a>Table of Contents</h1> <p>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> Crypto <span class="keyword">import</span> Random</span><br><span class="line"><span class="keyword">from</span> Crypto.PublicKey <span class="keyword">import</span> RSA</span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä¼ªéšæœºæ•°ç”Ÿæˆå™¨</span></span><br><span class="line">random_generator = Random.new().read</span><br><span class="line"><span class="comment"># rsaç®—æ³•ç”Ÿæˆå®ä¾‹</span></span><br><span class="line">rsa = RSA.generate(<span class="number">2048</span>, random_generator)</span><br><span class="line"><span class="built_in">print</span>(rsa)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">dir</span>(rsa))</span><br></pre></td></tr></table></figure>

<pre><code>Private RSA key at 0x10C4B8EB0
[&#39;__class__&#39;, &#39;__delattr__&#39;, &#39;__dict__&#39;, &#39;__dir__&#39;, &#39;__doc__&#39;, &#39;__eq__&#39;, &#39;__format__&#39;, &#39;__ge__&#39;, &#39;__getattribute__&#39;, &#39;__getstate__&#39;, &#39;__gt__&#39;, &#39;__hash__&#39;, &#39;__init__&#39;, &#39;__init_subclass__&#39;, &#39;__le__&#39;, &#39;__lt__&#39;, &#39;__module__&#39;, &#39;__ne__&#39;, &#39;__new__&#39;, &#39;__reduce__&#39;, &#39;__reduce_ex__&#39;, &#39;__repr__&#39;, &#39;__setattr__&#39;, &#39;__sizeof__&#39;, &#39;__str__&#39;, &#39;__subclasshook__&#39;, &#39;__weakref__&#39;, &#39;_d&#39;, &#39;_decrypt&#39;, &#39;_dp&#39;, &#39;_dq&#39;, &#39;_e&#39;, &#39;_encrypt&#39;, &#39;_invq&#39;, &#39;_n&#39;, &#39;_p&#39;, &#39;_q&#39;, &#39;_u&#39;, &#39;blind&#39;, &#39;can_encrypt&#39;, &#39;can_sign&#39;, &#39;d&#39;, &#39;decrypt&#39;, &#39;dp&#39;, &#39;dq&#39;, &#39;e&#39;, &#39;encrypt&#39;, &#39;exportKey&#39;, &#39;export_key&#39;, &#39;has_private&#39;, &#39;invp&#39;, &#39;invq&#39;, &#39;n&#39;, &#39;p&#39;, &#39;public_key&#39;, &#39;publickey&#39;, &#39;q&#39;, &#39;sign&#39;, &#39;size&#39;, &#39;size_in_bits&#39;, &#39;size_in_bytes&#39;, &#39;u&#39;, &#39;unblind&#39;, &#39;verify&#39;]
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç§é’¥çš„ç”Ÿæˆ</span></span><br><span class="line">private_pem = rsa.exportKey()</span><br><span class="line"><span class="built_in">print</span>(private_pem)</span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;private.pem&quot;</span>, <span class="string">&quot;wb&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    f.write(private_pem)</span><br><span class="line"><span class="comment"># å…¬é’¥çš„ç”Ÿæˆ</span></span><br><span class="line">public_pem = rsa.publickey().exportKey()</span><br><span class="line"><span class="built_in">print</span>(public_pem)</span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;public.pem&quot;</span>, <span class="string">&quot;wb&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    f.write(public_pem)</span><br></pre></td></tr></table></figure>

<pre><code>b&#39;-----BEGIN RSA PRIVATE KEY-----\nMIIEowIBAAKCAQEAviJUuLHbi5CByimMRxCqFhQ7B+zga/Tk1k0D06+Lrm6Kb0HO\nvhIcmWIMCW1eeBV0Aa2PniH+qLjRhQMqz7tDhe6O6ZBc046p0CToOlaPyjFFrNvA\nP+jwqeaFFFcDNo0J9lXuv5TH4q4JvQennna/pQUQQg+pTPmC74ampQkq7p7vOb3Z\nvdRmU6IKDUKIIG/3JrWNQJ4lcmNymA9pt/QiduNik33EIRNf+5cHkD3hScrWqKOW\naQYnMdOfCet7/ItfKOIAucuV2GMetuGto+HETm0ZN8Lr05V+otqn0SsU4Wo6xTlL\nxFMIAS698RkZkqbDC0+86dHbT/fiW1MpYGcKVwIDAQABAoIBABEsaambCwECpu57\nLTv4Adznq+NN3oFxx7+hijBzITM6sc9VytY5LZMfG4Y4djlzepxyMFAwst9LfkU8\n4X+M4w70Wr02+GN1ddoik0U9r1QseiYgXS+Im0BFXYzWRSiGubkhzuRIDHvpi2Cj\nEd1KzYmauPq2jmyw9sYqy9+JQfL2iQ9f4mkTu9fN5H+h0Mkx4imFVbBG0cHlxBg+\noI5QAccrLlbVsHoFrykqtilu4kUPQ6u5KnK3xyrIS6QVoA2zsEf01ikua5DDY3UR\naFNNn0IM6U0T6nZiUkvV4ySXSxCsG8Kf0Kr26ly+10HUYniwcGgygtW/cijjjDaZ\nYWAwu0UCgYEAyRvz35KNZrOfQyn2d25QQp8HRKnL9wY8rzL0XojSPzK9T/yvctWa\n4HBxPuzd6oaUOJH9EGmR+/P6S/mfU3Qik7MOQJt7yVD7MWjpBcq0NFtjOD5lwYOV\n82tf7EG45hBIG+IDhFrzxWefQn1axhQeMeGc1U+1V3tq6TIKH8s/umMCgYEA8geE\n69WZWBW9hokSDZThsgETMO2jicAiyO4aKm6+71ibNNyP2wbq21Hk67oOThSaP5g0\nIMMMujEMqW7S3c9H0drCpCiUUB8Nni+uxd/MCbQbZnTCcqFEuyYsOAadmJQlzK/O\n0SxeZxfgOV0N6Lbo36v2SC7INYn2Yhfwcn8dWH0CgYB30i64KzISWbzvIGZXfCNX\nvjZvY5dBo7auT/anCG/z9YAz0wKZscjoJjZi3m/N1sci+WBE0hGHgzLC54RVDaG4\nTHuWZM0ZAiXXp4EG0WISu8xe61ZnOMYz1Oq+8d1/PX4pFr0vs50AJaAO1m8qCzx+\nTcTKlwYdjEwDiqvbi5Z5rwKBgQDWZ9TXuuRaRQAdk4X7pB2APDWNDafnWt810sA5\nQNxCWeM8o/uIU4tweQ7ryGntv5CZr7LWJxQ6SUNnQXbp6js8a6gsFoq0o53DuYgB\nYO121yfCzsKHG9gwVnOruiiYRv1pY4E6iiyi9WK8TnQI6ShJJSRK866Gx04NvhlS\nxMrxXQKBgGzb7nen/DoOhoasJLwTtFqUQI+xs09pkabi4oP0vYYXlYFdbhPoRNdZ\nzaxqSlPN4c/IqEpwv/gCplYrwdkb2+RfPbtIFtsEZIbhjR7qJSME+mqfrd3X4qlK\ngEeJ3howUYPd0y6ppepDQiAxcE4el8FDeV9OHPCfuQGzw0uB+QUe\n-----END RSA PRIVATE KEY-----&#39;
b&#39;-----BEGIN PUBLIC KEY-----\nMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAviJUuLHbi5CByimMRxCq\nFhQ7B+zga/Tk1k0D06+Lrm6Kb0HOvhIcmWIMCW1eeBV0Aa2PniH+qLjRhQMqz7tD\nhe6O6ZBc046p0CToOlaPyjFFrNvAP+jwqeaFFFcDNo0J9lXuv5TH4q4JvQennna/\npQUQQg+pTPmC74ampQkq7p7vOb3ZvdRmU6IKDUKIIG/3JrWNQJ4lcmNymA9pt/Qi\nduNik33EIRNf+5cHkD3hScrWqKOWaQYnMdOfCet7/ItfKOIAucuV2GMetuGto+HE\nTm0ZN8Lr05V+otqn0SsU4Wo6xTlLxFMIAS698RkZkqbDC0+86dHbT/fiW1MpYGcK\nVwIDAQAB\n-----END PUBLIC KEY-----&#39;
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> Crypto.PublicKey <span class="keyword">import</span> RSA</span><br><span class="line"><span class="keyword">from</span> Crypto.Cipher <span class="keyword">import</span> PKCS1_v1_5 <span class="keyword">as</span> Cipher_pkcs1_v1_5</span><br><span class="line"><span class="keyword">import</span> base64</span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åŠ å¯†  æ³¨æ„æ¯æ¬¡åŠ å¯†åçš„å­—ç¬¦ä¸²éƒ½ä¸ä¸€æ ·ï¼Œè·Ÿå¯¹æ•°æ®çš„padding æœ‰å…³ã€‚</span></span><br><span class="line"><span class="comment"># åŠ å¯†æ—¶æ”¯æŒçš„æœ€å¤§å­—èŠ‚æ•°ï¼šè¯ä¹¦ä½æ•°/8 -11ï¼ˆæ¯”å¦‚ï¼š2048ä½çš„è¯ä¹¦ï¼Œæ”¯æŒçš„æœ€å¤§åŠ å¯†å­—èŠ‚æ•°ï¼š2048/8 - 11 = 245ï¼‰</span></span><br><span class="line"><span class="comment"># 1024ä½çš„è¯ä¹¦ï¼ŒåŠ å¯†æ—¶æœ€å¤§æ”¯æŒ117ä¸ªå­—èŠ‚ï¼Œè§£å¯†æ—¶ä¸º128ï¼›</span></span><br><span class="line"><span class="comment"># 2048ä½çš„è¯ä¹¦ï¼ŒåŠ å¯†æ—¶æœ€å¤§æ”¯æŒ245ä¸ªå­—èŠ‚ï¼Œè§£å¯†æ—¶ä¸º256ã€‚</span></span><br><span class="line"><span class="comment"># å¦‚æœéœ€è¦åŠ å¯†çš„å­—èŠ‚æ•°è¶…å‡ºè¯ä¹¦èƒ½åŠ å¯†çš„æœ€å¤§å­—èŠ‚æ•°ï¼Œæ­¤æ—¶å°±éœ€è¦è¿›è¡Œåˆ†æ®µåŠ å¯†ã€‚</span></span><br><span class="line">message = <span class="string">&quot;Hello,This is RSAåŠ å¯†&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#æ‹¿åˆ°å…¬é’¥</span></span><br><span class="line">rsakey = RSA.importKey(<span class="built_in">open</span>(<span class="string">&quot;public.pem&quot;</span>).read())</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Here is RSA è¯»å–åˆ°çš„å…¬é’¥:&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(rsakey)</span><br><span class="line"></span><br><span class="line"><span class="comment">#é€šè¿‡å…¬é’¥ï¼Œåˆ›å»ºç”¨äºæ‰§è¡Œpkcs1_v1_5åŠ å¯†æˆ–è§£å¯†çš„å¯†ç </span></span><br><span class="line">cipher = Cipher_pkcs1_v1_5.new(rsakey)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;Here is ç”¨å…¬é’¥ç”Ÿæˆçš„å¯†ç :&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(cipher)</span><br><span class="line"><span class="comment"># ç”¨å…¬é’¥åˆ›å»ºçš„å¯†ç æ¥åŠ å¯†message</span></span><br><span class="line">message_enc = cipher.encrypt(message.encode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Here is ç”¨å…¬é’¥åˆ›å»ºçš„å¯†ç æ¥åŠ å¯†çš„message:&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(message_enc)</span><br><span class="line"><span class="comment"># base64 å°†äºŒè¿›åˆ¶åŠ å¯†è¿‡çš„messageè½¬æˆæ–‡æœ¬</span></span><br><span class="line">cipher_text = base64.b64encode(message_enc)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;base64 å°†äºŒè¿›åˆ¶è½¬æˆæ–‡æœ¬çš„message&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(cipher_text.decode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br></pre></td></tr></table></figure>

<pre><code>Here is RSA è¯»å–åˆ°çš„å…¬é’¥:
Public RSA key at 0x10C4BDE50
Here is ç”¨å…¬é’¥ç”Ÿæˆçš„å¯†ç :
&lt;Crypto.Cipher.PKCS1_v1_5.PKCS115_Cipher object at 0x10c4bd370&gt;
Here is ç”¨å…¬é’¥åˆ›å»ºçš„å¯†ç æ¥åŠ å¯†çš„message:
b&#39;&lt;\xaf\xe3\xc1\x95MmL\x7f\x0b\xe6=J#ba\x98z\xb5\xb2\x9a\xb4\xbc\x9fC\x1c\xc0-\xfd\x80\xfc\xb3\x9c\xe4\x96\xa5\x8b?\xaa)\x84n9\x0c\x8f\x99?uXTp\xf3\xd6\x07lV\xe3\t\xbf\x8b\xea\xa5Dn\x80\xf5\x89\xeag\xa8J\xbc\x08\xabB\x1e\xc9\xbb\xe7m\xf8\t\xc6@\xc7[\x16,2\r\x1d=y?\xa0\x95\xcd\x8bxs\x8d@\x97R-\xea\xa3\xb1\xcc\x0f\x89\xb5\xe0:QPwj\xc0zY\xe9\xeb\x17\xf6\xd0\xef&gt;\xd7*\x7f\x97\x8f\x0f=\x06\xb0&lt;G\xe4\x00 pv\x8f&lt;\xb5\xb4f\x0f\xbd\x06J8\x7f\x84M\xa4js\xc7\x1a\xa6\xaf\xe9:@\x88\x18\xed\x8f\x96fvI\xfd\xe2i\x0e\x87\xa1RR\xaaF\x15\x11\x99~NTLc\x12k\xa4\x86&lt;\x11\xef\x05\xbe64\xf3\x84\xcb\x93\xd9\xf9\xa8R\xb6\xe7%\x95V\xb5\x80:\x81\xb4\xc0\xeaGC\xd1\xba\x90\xf2\x95#\x99&gt;\xe5\xb1\xae\xabo[1\x1f\xed\x10\xd8\xac\x1d\xe6\x1e;\xe8\xd6\x1c\xc4r\x16&#39;
base64 å°†äºŒè¿›åˆ¶è½¬æˆæ–‡æœ¬çš„message
SVJVsq5On4uFJo8OZdzuVtT/9NQexOoDiKUgeQr8v7j4PktuejMq4Ghoh6AufYwNJXSAyw1Oz6MFHfBxtSQeJU6jHN0ZlIhcv1DteMvv3VAOJRkhf93am7b97bg2KGoP/ux0W5RIKxKGTw0n8dsjhNt1X4lAFJSl3kA6n8RDaBWEzVhIzCq0fKjIZbYam/mB0WNB79/jezBj4Snv4DXX/dNSKmU6IAmV0FdTikX5lLj4xTGnUehSwzOxZzaKwhHEvUNq24W1WiIdvScFU3ycmK8OKvpTf7iEQYpyX9Hwqn5Qk+JHQAxpByOxG+TvI5pd4CPXxyQnkq2eWDOc1hhayw==
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è§£å¯†</span></span><br><span class="line">cipher_text = <span class="string">&quot;SVJVsq5On4uFJo8OZdzuVtT/9NQexOoDiKUgeQr8v7j4PktuejMq4Ghoh6AufYwNJXSAyw1Oz6MFHfBxtSQeJU6jHN0ZlIhcv1DteMvv3VAOJRkhf93am7b97bg2KGoP/ux0W5RIKxKGTw0n8dsjhNt1X4lAFJSl3kA6n8RDaBWEzVhIzCq0fKjIZbYam/mB0WNB79/jezBj4Snv4DXX/dNSKmU6IAmV0FdTikX5lLj4xTGnUehSwzOxZzaKwhHEvUNq24W1WiIdvScFU3ycmK8OKvpTf7iEQYpyX9Hwqn5Qk+JHQAxpByOxG+TvI5pd4CPXxyQnkq2eWDOc1hhayw==&quot;</span></span><br><span class="line">encrypt_text = cipher_text.encode(<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line"><span class="comment"># æ‹¿åˆ°ç§é’¥</span></span><br><span class="line">rsakey = RSA.importKey(<span class="built_in">open</span>(<span class="string">&quot;private.pem&quot;</span>).read())</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Here is RSA è¯»å–åˆ°çš„ç§é’¥:&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(rsakey)</span><br><span class="line"><span class="comment">#åˆ›å»ºç”¨äºæ‰§è¡Œpkcs1_v1_5åŠ å¯†æˆ–è§£å¯†çš„å¯†ç </span></span><br><span class="line">cipher = Cipher_pkcs1_v1_5.new(rsakey)      </span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;Here is ç”¨ç§é’¥ç”Ÿæˆçš„å¯†ç :&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(cipher)</span><br><span class="line"><span class="comment"># base64 å°†æ–‡æœ¬string è½¬å›äºŒè¿›åˆ¶</span></span><br><span class="line">message_dec = base64.b64decode(encrypt_text)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Here is ç”¨base64å°†stringè½¬å›äºŒè¿›åˆ¶:&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(message_enc)</span><br><span class="line"><span class="comment"># ç”¨ç§é’¥ç”Ÿæˆçš„å¯†ç æ¥è§£å¯† äºŒè¿›åˆ¶message</span></span><br><span class="line">text = cipher.decrypt(message_dec, <span class="string">&quot;è§£å¯†å¤±è´¥&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Here is ç”¨ç§é’¥ç”Ÿæˆçš„å¯†ç æ¥æ¥äºŒè¿›åˆ¶çš„message&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(text.decode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br></pre></td></tr></table></figure>

<pre><code>Here is RSA è¯»å–åˆ°çš„ç§é’¥:
Private RSA key at 0x10C0D16D0
Here is ç”¨ç§é’¥ç”Ÿæˆçš„å¯†ç :
&lt;Crypto.Cipher.PKCS1_v1_5.PKCS115_Cipher object at 0x10c19f340&gt;
Here is ç”¨base64å°†stringè½¬å›äºŒè¿›åˆ¶:
b&#39;&lt;\xaf\xe3\xc1\x95MmL\x7f\x0b\xe6=J#ba\x98z\xb5\xb2\x9a\xb4\xbc\x9fC\x1c\xc0-\xfd\x80\xfc\xb3\x9c\xe4\x96\xa5\x8b?\xaa)\x84n9\x0c\x8f\x99?uXTp\xf3\xd6\x07lV\xe3\t\xbf\x8b\xea\xa5Dn\x80\xf5\x89\xeag\xa8J\xbc\x08\xabB\x1e\xc9\xbb\xe7m\xf8\t\xc6@\xc7[\x16,2\r\x1d=y?\xa0\x95\xcd\x8bxs\x8d@\x97R-\xea\xa3\xb1\xcc\x0f\x89\xb5\xe0:QPwj\xc0zY\xe9\xeb\x17\xf6\xd0\xef&gt;\xd7*\x7f\x97\x8f\x0f=\x06\xb0&lt;G\xe4\x00 pv\x8f&lt;\xb5\xb4f\x0f\xbd\x06J8\x7f\x84M\xa4js\xc7\x1a\xa6\xaf\xe9:@\x88\x18\xed\x8f\x96fvI\xfd\xe2i\x0e\x87\xa1RR\xaaF\x15\x11\x99~NTLc\x12k\xa4\x86&lt;\x11\xef\x05\xbe64\xf3\x84\xcb\x93\xd9\xf9\xa8R\xb6\xe7%\x95V\xb5\x80:\x81\xb4\xc0\xeaGC\xd1\xba\x90\xf2\x95#\x99&gt;\xe5\xb1\xae\xabo[1\x1f\xed\x10\xd8\xac\x1d\xe6\x1e;\xe8\xd6\x1c\xc4r\x16&#39;
Here is ç”¨ç§é’¥ç”Ÿæˆçš„å¯†ç æ¥æ¥äºŒè¿›åˆ¶çš„message
Hello,This is RSAåŠ å¯†
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åŠ ç­¾åï¼Œç”¨ç§é’¥ï¼Œç§é’¥åŠ ç­¾ååï¼Œå¯ä»¥ç”¨å…¬é’¥éªŒè¯ç­¾åæœ‰æ— è¢«ç¯¡æ”¹</span></span><br><span class="line"><span class="keyword">from</span> Crypto.Signature <span class="keyword">import</span> PKCS1_v1_5 <span class="keyword">as</span> Signature_pkcs1_v1_5</span><br><span class="line"><span class="keyword">from</span> Crypto.Hash <span class="keyword">import</span> SHA</span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åŠ ç­¾ ä½¿ç”¨ç§é’¥åŠ ç­¾åï¼Œæ¯æ¬¡ç­¾åæ˜¯ä¸€è‡´çš„</span></span><br><span class="line">message = <span class="string">&quot;This is a request message...&quot;</span></span><br><span class="line"><span class="comment"># æ‹¿åˆ°ç§é’¥</span></span><br><span class="line">rsakey = RSA.importKey(<span class="built_in">open</span>(<span class="string">&quot;private.pem&quot;</span>).read())</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;ç§é’¥ï¼š&quot;</span>+<span class="string">f&quot;<span class="subst">&#123;rsakey&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä½¿ç”¨ç§é’¥æ‹¿åˆ°ä¸€ä¸ªæ–°çš„ç­¾åå¯†ç </span></span><br><span class="line">signer = Signature_pkcs1_v1_5.new(rsakey)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;ä½¿ç”¨ç§é’¥ç”Ÿæˆæ–°çš„ç­¾åå¯†ç ï¼š<span class="subst">&#123;signer&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ‘˜è¦è®¤è¯ digest authentication</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">æ‘˜è¦è®¿é—®è®¤è¯æ˜¯ä¸€ç§åè®®è§„å®šçš„WebæœåŠ¡å™¨ç”¨æ¥åŒç½‘é¡µæµè§ˆå™¨è¿›è¡Œè®¤è¯ä¿¡æ¯åå•†çš„æ–¹æ³•ã€‚å®ƒåœ¨å¯†ç å‘å‡ºå‰ï¼Œå…ˆå¯¹å…¶åº”ç”¨å“ˆå¸Œå‡½æ•°ï¼Œè¿™ç›¸å¯¹äºHTTPåŸºæœ¬è®¤è¯å‘é€æ˜æ–‡è€Œè¨€ï¼Œæ›´å®‰å…¨ã€‚</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">ä»æŠ€æœ¯ä¸Šè®²ï¼Œæ‘˜è¦è®¤è¯æ˜¯ä½¿ç”¨éšæœºæ•°æ¥é˜»æ­¢è¿›è¡Œå¯†ç åˆ†æçš„MD5åŠ å¯†å“ˆå¸Œå‡½æ•°åº”ç”¨ã€‚å®ƒä½¿ç”¨HTTPåè®®ã€‚</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line">digest = SHA.new()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;digest:&#123;0&#125;&quot;</span>.<span class="built_in">format</span>(digest))</span><br><span class="line"><span class="comment"># ç”¨digestæ–¹å¼åŠ å¯†message</span></span><br><span class="line">digest.update(message.encode(<span class="string">&quot;utf-8&quot;</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># åŠ ç­¾ï¼Œä½¿ç”¨ç§é’¥ç”Ÿæˆçš„signatureå¯†ç æ¥åŠ å¯† digestå“ˆå¸Œè¿‡çš„message</span></span><br><span class="line">sign = signer.sign(digest)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;ä½¿ç”¨ç§é’¥ç”Ÿæˆçš„signatureå¯†ç æ¥åŠ å¯† digestå“ˆå¸Œè¿‡çš„messageï¼š <span class="subst">&#123;sign&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç”¨base64 å°†äºŒè¿›åˆ¶è½¬åŒ–ä¸ºstringå­˜å‚¨</span></span><br><span class="line">signature = base64.b64encode(sign)</span><br><span class="line"><span class="built_in">print</span>(signature.decode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br></pre></td></tr></table></figure>

<pre><code>ç§é’¥ï¼šPrivate RSA key at 0x10C4BD670
ä½¿ç”¨ç§é’¥ç”Ÿæˆæ–°çš„ç­¾åå¯†ç ï¼š&lt;Crypto.Signature.pkcs1_15.PKCS115_SigScheme object at 0x10c198d90&gt;
digest:&lt;Crypto.Hash.SHA1.SHA1Hash object at 0x10c4bd700&gt;
ä½¿ç”¨ç§é’¥ç”Ÿæˆçš„signatureå¯†ç æ¥åŠ å¯† digestå“ˆå¸Œè¿‡çš„messageï¼š b&#39;&amp;\xe7\x8b\xd1\xb5\xd2\xb3\x12\xccq\xf7\xf9\xb3\x94\\\xaaw\x8dJ\xc8\x9c\x89\xe5\xd3]\x16F\x91\xa1\x11\xff&#125;\xe9=C+\x1c\xd0\x83\xdb\x13\x12&lt;:\xd0\xcd&gt;\x99uM\xf9\xf3\xbf\x8ax\xab\xac\x87\xca%\xc6\t\xef\xcb\xfb\xbc\xba\x1f\&#39;\x19\xf0\xf9\xef\xdd\xb5N\xf4H\xca#\xe4\x9c\xa3\xee\x95\xa52Cq\x9bj\x91\xa6\xcf\x15\xcdt\xd2\xed\x10\xfe\xf7\xce\xde\xcc Y\xd3f\xe3.R\xf9\xe1@\xfc\x80\xd4\x9f\x9a\xa1\xf8\x8f\xc8\x8e\xbf\xd3w\xad\x1c\xcb\xb39\x83\x92UW\x17\x92,\xd3&#123;$\xb2~\t\xb0\x1c\xa2\xaf\xe2\x91\xc1\x98\xd9;\x18\xeb\x1aW\\\x9e\n\xe5\xa3\xdd\x07\xacr\x1c\x9e\x18^\xe0xR\x8c\xafp\x938\xcc3&lt;\xed-\xdb\x04\x9c\xa2\xdb\xb6\xecRn\xf7\xb5=\xcb\xdf\x8aP\x06\x82\xe65\xfa\xd2q:\x04\x8c\xea\x05\x1a +\x9d,&amp;\x9e\x86\xc2\xa7\xf3\x8b\t\x9d\xa7\xd2\x93LO\n\xd3\xd9V\xa97R\t%\x8e\xde\xb7ZD\xdc\xb8\xc5\x9c&quot;5\xe8\x14\xc5&#39;
JueL0bXSsxLMcff5s5RcqneNSsicieXTXRZGkaER/33pPUMrHNCD2xMSPDrQzT6ZdU3587+KeKush8olxgnvy/u8uh8nGfD57921TvRIyiPknKPulaUyQ3GbapGmzxXNdNLtEP73zt7MIFnTZuMuUvnhQPyA1J+aofiPyI6/03etHMuzOYOSVVcXkizTeySyfgmwHKKv4pHBmNk7GOsaV1yeCuWj3QeschyeGF7geFKMr3CTOMwzPO0t2wScotu27FJu97U9y9+KUAaC5jX60nE6BIzqBRogK50sJp6Gwqfziwmdp9KTTE8K09lWqTdSCSWO3rdaRNy4xZwiNegUxQ==
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># éªŒç­¾ï¼Œä½¿ç”¨å…¬é’¥éªŒç­¾</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">ç”¨å…¬é’¥ç”Ÿæˆçš„æ–°ç­¾åå¯†ç æ¥éªŒè¯ï¼š</span></span><br><span class="line"><span class="string">å“ˆå¸Œè¿‡çš„message ï¼Œ  å’Œ  ç§é’¥ç”Ÿæˆçš„æ–°ç­¾åå¯†ç åŠ å¯†äº†çš„ï¼ˆå“ˆå¸Œè¿‡çš„messageï¼‰</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line">message = <span class="string">&quot;This is a request message...&quot;</span></span><br><span class="line"><span class="comment"># step1ï¼Œ æ‹¿åˆ°å…¬é’¥</span></span><br><span class="line">rsakey = RSA.importKey(<span class="built_in">open</span>(<span class="string">&quot;public.pem&quot;</span>).read())</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;Get public key: <span class="subst">&#123;rsakey&#125;</span>&quot;</span>)</span><br><span class="line"><span class="comment"># step2, ç”¨å…¬é’¥ç”Ÿæˆä¸€ä¸ªæ–°ç­¾åå¯†ç </span></span><br><span class="line">verifier = Signature_pkcs1_v1_5.new(rsakey)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;generate a signature key via public key: <span class="subst">&#123;verifier&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># step3, ç”Ÿæˆä¸ªå“ˆå¸Œå€¼</span></span><br><span class="line">hsmsg = SHA.new()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;Hashi: <span class="subst">&#123;hsmsg&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># step4, ç”¨å“ˆå¸ŒåŠ å¯†message</span></span><br><span class="line">hsmsg.update(message.encode(<span class="string">&quot;utf-8&quot;</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;å“ˆå¸ŒåŠ å¯†message: &quot;</span> + <span class="string">f&quot;<span class="subst">&#123;hsmsg&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># step5, ç”¨base64 å°†string çš„signatureè§£å¯†ä¸ºäºŒè¿›åˆ¶</span></span><br><span class="line"><span class="comment"># å°±å˜æˆäº†åŠ å¯†é˜¶æ®µçš„é‚£ä¸ª ç”¨ç§é’¥ç”Ÿæˆçš„signatureå¯†ç æ¥åŠ å¯† digestå“ˆå¸Œè¿‡çš„message</span></span><br><span class="line">sign = base64.b64decode(signature)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;base64 decode sig: <span class="subst">&#123;sign&#125;</span>&quot;</span>)</span><br><span class="line"><span class="comment"># ç”¨ å…¬é’¥ç”Ÿæˆçš„æ–°ç­¾åå¯†ç æ¥éªŒè¯ï¼Œå“ˆå¸Œè¿‡çš„messageï¼Œ å’Œ ç­¾è¿‡åçš„signäºŒè¿›åˆ¶</span></span><br><span class="line">is_verify = verifier.verify(hsmsg, sign)</span><br><span class="line"><span class="built_in">print</span>(is_verify)</span><br></pre></td></tr></table></figure>

<pre><code>Get public key: Public RSA key at 0x10C3B8880
generate a signature key via public key: &lt;Crypto.Signature.pkcs1_15.PKCS115_SigScheme object at 0x10c3b8a30&gt;
Hashi: &lt;Crypto.Hash.SHA1.SHA1Hash object at 0x10c663160&gt;
å“ˆå¸ŒåŠ å¯†message: &lt;Crypto.Hash.SHA1.SHA1Hash object at 0x10c663160&gt;
base64 decode sig: b&#39;&amp;\xe7\x8b\xd1\xb5\xd2\xb3\x12\xccq\xf7\xf9\xb3\x94\\\xaaw\x8dJ\xc8\x9c\x89\xe5\xd3]\x16F\x91\xa1\x11\xff&#125;\xe9=C+\x1c\xd0\x83\xdb\x13\x12&lt;:\xd0\xcd&gt;\x99uM\xf9\xf3\xbf\x8ax\xab\xac\x87\xca%\xc6\t\xef\xcb\xfb\xbc\xba\x1f\&#39;\x19\xf0\xf9\xef\xdd\xb5N\xf4H\xca#\xe4\x9c\xa3\xee\x95\xa52Cq\x9bj\x91\xa6\xcf\x15\xcdt\xd2\xed\x10\xfe\xf7\xce\xde\xcc Y\xd3f\xe3.R\xf9\xe1@\xfc\x80\xd4\x9f\x9a\xa1\xf8\x8f\xc8\x8e\xbf\xd3w\xad\x1c\xcb\xb39\x83\x92UW\x17\x92,\xd3&#123;$\xb2~\t\xb0\x1c\xa2\xaf\xe2\x91\xc1\x98\xd9;\x18\xeb\x1aW\\\x9e\n\xe5\xa3\xdd\x07\xacr\x1c\x9e\x18^\xe0xR\x8c\xafp\x938\xcc3&lt;\xed-\xdb\x04\x9c\xa2\xdb\xb6\xecRn\xf7\xb5=\xcb\xdf\x8aP\x06\x82\xe65\xfa\xd2q:\x04\x8c\xea\x05\x1a +\x9d,&amp;\x9e\x86\xc2\xa7\xf3\x8b\t\x9d\xa7\xd2\x93LO\n\xd3\xd9V\xa97R\t%\x8e\xde\xb7ZD\xdc\xb8\xc5\x9c&quot;5\xe8\x14\xc5&#39;
True
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> Crypto.PublicKey <span class="keyword">import</span> RSA</span><br><span class="line"><span class="keyword">from</span> Crypto.Cipher <span class="keyword">import</span> PKCS1_OAEP</span><br><span class="line"><span class="keyword">import</span> binascii</span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç”Ÿæˆäº†ä¸ª private RSA KEY?????</span></span><br><span class="line">keyPair = RSA.generate(<span class="number">3072</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;keyPair: <span class="subst">&#123;keyPair&#125;</span>&quot;</span>)</span><br></pre></td></tr></table></figure>

<pre><code>keyPair: Private RSA key at 0x10C663940
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">pubKey = keyPair.publickey()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;Public key:  (n=<span class="subst">&#123;<span class="built_in">hex</span>(pubKey.n)&#125;</span>, e=<span class="subst">&#123;<span class="built_in">hex</span>(pubKey.e)&#125;</span>)&quot;</span>)</span><br><span class="line">pubKeyPEM = pubKey.exportKey()</span><br><span class="line"><span class="built_in">print</span>(pubKeyPEM.decode(<span class="string">&#x27;ascii&#x27;</span>))</span><br></pre></td></tr></table></figure>

<pre><code>Public key:  (n=0xa1ed1f3d0be71914eee28da05492820df0f21666e64a68ba698f93933d2b2ffe71fa3a8221da24354dbb5b756dd64d70696fe650dd607d2a255fbbae4f668a2115ca22b172a0d9d694adc160713b8508f0ffe403c89b7dcf6a388e2bfb58c57c920841945e13edbd0c8baf6c921b7af4647b545ed5e404776fb0e2374ef4e343f32b1cfbba3b76ff57957fc6f67924472485c3bd96ef67ce79e05f0229621257fd803e3fdcfa026b481bd61c6e202821d4b829e0393bc7137c444180b81fc6bccc34f327da2dbd5daa750d60cdca3a5a026e11c25e2d74c5ea43b54640a93c0daf94f5e5eece42fbc9ae0efb65af7503ab3ab5415dd87d4a49c6de79ffb4a1c3682108456c514822cc11d6f849eb88f083292b5128995bf77594448946af5fba1be4d7612fc79cf8f37e8b692c151500441d5d47c989cbadd7f3dee4ad188faf1e4b52fcab8ab483c6324356994215ed080f23451c700e3c89d12ea608a7b96728a025b4a657f0f25f82dc0a27ea852c3294cee81cff2a692df08c7833cd1fd5, e=0x10001)
-----BEGIN PUBLIC KEY-----
MIIBojANBgkqhkiG9w0BAQEFAAOCAY8AMIIBigKCAYEAoe0fPQvnGRTu4o2gVJKC
DfDyFmbmSmi6aY+Tkz0rL/5x+jqCIdokNU27W3Vt1k1waW/mUN1gfSolX7uuT2aK
IRXKIrFyoNnWlK3BYHE7hQjw/+QDyJt9z2o4jiv7WMV8kghBlF4T7b0Mi69skht6
9GR7VF7V5AR3b7DiN07040PzKxz7ujt2/1eVf8b2eSRHJIXDvZbvZ8554F8CKWIS
V/2APj/c+gJrSBvWHG4gKCHUuCngOTvHE3xEQYC4H8a8zDTzJ9otvV2qdQ1gzco6
WgJuEcJeLXTF6kO1RkCpPA2vlPXl7s5C+8muDvtlr3UDqzq1QV3YfUpJxt55/7Sh
w2ghCEVsUUgizBHW+EnriPCDKStRKJlb93WURIlGr1+6G+TXYS/HnPjzfotpLBUV
AEQdXUfJicut1/Pe5K0Yj68eS1L8q4q0g8YyQ1aZQhXtCA8jRRxwDjyJ0S6mCKe5
ZyigJbSmV/DyX4LcCifqhSwylM7oHP8qaS3wjHgzzR/VAgMBAAE=
-----END PUBLIC KEY-----
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;Private key: (n=<span class="subst">&#123;<span class="built_in">hex</span>(pubKey.n)&#125;</span>, d=<span class="subst">&#123;<span class="built_in">hex</span>(keyPair.d)&#125;</span>)&quot;</span>)</span><br><span class="line">privKeyPEM = keyPair.exportKey()</span><br><span class="line"><span class="built_in">print</span>(privKeyPEM.decode(<span class="string">&#x27;ascii&#x27;</span>))</span><br></pre></td></tr></table></figure>

<pre><code>Private key: (n=0xa1ed1f3d0be71914eee28da05492820df0f21666e64a68ba698f93933d2b2ffe71fa3a8221da24354dbb5b756dd64d70696fe650dd607d2a255fbbae4f668a2115ca22b172a0d9d694adc160713b8508f0ffe403c89b7dcf6a388e2bfb58c57c920841945e13edbd0c8baf6c921b7af4647b545ed5e404776fb0e2374ef4e343f32b1cfbba3b76ff57957fc6f67924472485c3bd96ef67ce79e05f0229621257fd803e3fdcfa026b481bd61c6e202821d4b829e0393bc7137c444180b81fc6bccc34f327da2dbd5daa750d60cdca3a5a026e11c25e2d74c5ea43b54640a93c0daf94f5e5eece42fbc9ae0efb65af7503ab3ab5415dd87d4a49c6de79ffb4a1c3682108456c514822cc11d6f849eb88f083292b5128995bf77594448946af5fba1be4d7612fc79cf8f37e8b692c151500441d5d47c989cbadd7f3dee4ad188faf1e4b52fcab8ab483c6324356994215ed080f23451c700e3c89d12ea608a7b96728a025b4a657f0f25f82dc0a27ea852c3294cee81cff2a692df08c7833cd1fd5, d=0x1b6c1223947b1e9447a061110b41847a37ee723cc58df463c80763469c254ee0c30ca2bbf1b504f76ca2936a8a4a05f348e7da694cbefa736e163857dcba7b74a996ac7ec09adcf3ff59d855d781eceb06baa48814d66b07fa9a794e997cff1f89863c6a3e99c163dd56b543fdba5efd8f1c13bdbbc5fc6652fe9c50cc33a209453517ee1ed67de08aef41246b63e3463e63d387ad4d5341c9acbb14f2a283d8c2e58fa5366c60872a9461938efd8323b7928e04f05709efbd8111ac158276cab2457512d111abba989e2ef5c0cc8309a32173c206eee8a10102bb20f19c76c1182759052e34a120bb87c220df920f11019b3ebda111c634ccc94937acb0ef23d7114cd13a8a154c909efe9700fae3fabae91529d4bf6dc70aea942ba5128c4d61eef66a857fbfd47cd30b20595c3a609a0348a3cfeca5c5bd3c5e6174e042c16a6262fcac07604536d1a1037ee4c88d6df0713347957e9a1185b30c25c4842a9b184eff70533e799cfb8519c414ea84a5936f4e16d5841175f3bd0d0436705)
-----BEGIN RSA PRIVATE KEY-----
MIIG4wIBAAKCAYEAoe0fPQvnGRTu4o2gVJKCDfDyFmbmSmi6aY+Tkz0rL/5x+jqC
IdokNU27W3Vt1k1waW/mUN1gfSolX7uuT2aKIRXKIrFyoNnWlK3BYHE7hQjw/+QD
yJt9z2o4jiv7WMV8kghBlF4T7b0Mi69skht69GR7VF7V5AR3b7DiN07040PzKxz7
ujt2/1eVf8b2eSRHJIXDvZbvZ8554F8CKWISV/2APj/c+gJrSBvWHG4gKCHUuCng
OTvHE3xEQYC4H8a8zDTzJ9otvV2qdQ1gzco6WgJuEcJeLXTF6kO1RkCpPA2vlPXl
7s5C+8muDvtlr3UDqzq1QV3YfUpJxt55/7Shw2ghCEVsUUgizBHW+EnriPCDKStR
KJlb93WURIlGr1+6G+TXYS/HnPjzfotpLBUVAEQdXUfJicut1/Pe5K0Yj68eS1L8
q4q0g8YyQ1aZQhXtCA8jRRxwDjyJ0S6mCKe5ZyigJbSmV/DyX4LcCifqhSwylM7o
HP8qaS3wjHgzzR/VAgMBAAECggGAAbbBIjlHselEegYRELQYR6N+5yPMWN9GPIB2
NGnCVO4MMMorvxtQT3bKKTaopKBfNI59ppTL76c24WOFfcunt0qZasfsCa3PP/Wd
hV14Hs6wa6pIgU1msH+pp5Tpl8/x+JhjxqPpnBY91WtUP9ul79jxwTvbvF/GZS/p
xQzDOiCUU1F+4e1n3giu9BJGtj40Y+Y9OHrU1TQcmsuxTyooPYwuWPpTZsYIcqlG
GTjv2DI7eSjgTwVwnvvYERrBWCdsqyRXUS0RGrupieLvXAzIMJoyFzwgbu6KEBAr
sg8Zx2wRgnWQUuNKEgu4fCIN+SDxEBmz69oRHGNMzJSTessO8j1xFM0TqKFUyQnv
6XAPrj+rrpFSnUv23HCuqUK6USjE1h7vZqhX+/1HzTCyBZXDpgmgNIo8/spcW9PF
5hdOBCwWpiYvysB2BFNtGhA37kyI1t8HEzR5V+mhGFswwlxIQqmxhO/3BTPnmc+4
UZxBTqhKWTb04W1YQRdfO9DQQ2cFAoHBALUKXxmsVeBjMpojUrD2ekDzOqKhYoQl
oI5T6vbn8KtYsSh7ePrm9jE6MfOKwL3MJxy4Q2VKKS6s9ruDQtkYpPy/EzSWi5yS
MroGEFBlqMCKIneVhOa4+qYyqdpNfQFJq9dOimIS+4pIuccE13fX7UC6OYtQ+1qx
AuXo7tIVk/OHRBTh0FCGAFPzUKk3C0Nxt1o4Gkb2sdq/aKWKhr+eEf29l02UiocN
EGZjJHKv7Zql14PmD/NGGNDz0wd6Xn+JhwKBwQDk+LWxxiijAAbYZvNM3/ay73Pc
CtbbgrFBCFwf0Fqh/F6NTAFEvvcrk1k5YVnV45flsU54zlEH2ce1mPK9WoPcyI0P
iNGPUSfoMwlwa6jlbOxanCCqOl70LrQP6v97AId7KxUsei1B1FjKKftF2Q47zu+x
E+LXI1jSv2IJiVTTeZon3RThwKMqflVN22erEEqQu944QVe1KNwKMqg/LlSEnz/4
LWkCXvkVDbVg4g9HLsPQVe0OsumTcbjx2EidMsMCgcAJy6fdob97xqJESMj+njd7
MC3qAsVr1QVc7hl2hpI1EzVytUuUd862VynAva80Fcm/+hBbeKnFxsIK301MpdK3
gjctzz96l0Z7XjyfvQBmepLm2YY5XaTiPTeHgk3TNgNAQRWnvNMzZj/3DsIB0AMc
T3cxnI4dGBrKCdJyN4yrzpPWdWlqEfYOlMm2fi3z1kFPdl2lnU9+QIEPA/HKiGj8
y7dWEUV1jTVn9NFSC0bV6UdB8b7HMPHCzI6Mhwh56h0CgcEAwRcoCkIElOj53NZ8
yNB5943NE7wkUrsVBbWqEr4fIEl15ww4aaPtRtccwDHjk2c5+l6awW+jj85NB0xz
L9G8L50EsBv+NTEISV140VBI/yjq7MKLHWLaHmugN2hCiJT6q5i6Y2ao8cHEGsBq
gQ25XiB1q8wMWMcbKaZxY39nhGsg4Aslh/du4e/luiGTfAPiDcoQbTpVX5WUchkk
HxvP9INja8PHsVMsFGAaHBinL601PmSn4+Rm64tUnsZ4/fAHAoHAUT1YY5uMjbr3
EJ3c2HviYM7ExchdrByMbtxipp5z8JWMSxH6pfyVFK+kqiaTAwtmZPm9LNgUym7Z
A4fSM/W0QvLu8qa/4rKLYgRebwPMj9oCEeciecINENqVHjNPOFRqTuqMV+aMrhDE
xiboGbgoNWGxJGcAvsKTD1/49Rjtl7ZpEHMbV6jI3JPX161n7D20vRWHSgRBdTNn
h1b97aHzKQlwEFFbAgQzfh3ATEJRJCkUoX+YK5TsVTUkfJOYPM5U
-----END RSA PRIVATE KEY-----
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#encryption</span></span><br><span class="line">msg = <span class="string">&#x27;A message for encryption&#x27;</span></span><br><span class="line">encryptor = PKCS1_OAEP.new(pubKey)</span><br><span class="line">encrypted = encryptor.encrypt(msg.encode(<span class="string">&quot;utf-8&quot;</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Encrypted:&quot;</span>, binascii.hexlify(encrypted))</span><br></pre></td></tr></table></figure>

<pre><code>Encrypted: b&#39;7afbfdb44b4b507b4e000a0b16ff3b64e9b570f932b3467b06b69d2071f92886f62f612f57caa9d1a46189759f51f46784388f7e52ee08f2434a8f7918e5e92a639f32bcf8c5ec36ce5cb5328279b793e33c1a9dc4af373875b9b230772d51f9818292b178153f172ca8ce5aea84396032b4ab26f29ba7808ef335d072cfaca61cc311e1542cc404c11fed5db0349ee4f56568e702bfc3a2203f521a282b1cd5b22a8f6d0c731589da8169b078c9be5d00b8df31b40a26f4e92d8d049dd3b9f5bd43d9c1680688cb81af3bca4bb44c8a8227941f5a874c7fb043e7dd9351117e1d286b6ac26486514681805c66b8bab5ebad7d7f9556a14678342c6278268bab1e98867ece9c253b48e4ca71411bc9728b7844b1ec1c007c6006701b3951f4e7b5b4558b140121422960a7fb1e1f8a9be1cb499be33517602d7a231d69741d0a50318e0bd3ce771f62b6161c0f945da9bfe28a05ccebfabedc38821f7048a5c6c6288435757d632192386ba0f607a6f96fe41fafbbf26dd6aafe46ddeb313de9&#39;
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> rsa</span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">publicKey, privateKey = rsa.newkeys(<span class="number">2024</span>)</span><br><span class="line">message = <span class="string">&quot;hello geeks&quot;</span></span><br><span class="line"></span><br><span class="line">encMessage = rsa.encrypt(message.encode(<span class="string">&quot;utf-8&quot;</span>), publicKey)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;original string: &quot;</span>, message)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;encrypted string: &quot;</span>, encMessage)</span><br><span class="line"></span><br><span class="line"><span class="comment"># the encrypted message can be decrypted</span></span><br><span class="line"><span class="comment"># with ras.decrypt method and private key</span></span><br><span class="line"><span class="comment"># decrypt method returns encoded byte string,</span></span><br><span class="line"><span class="comment"># use decode method to convert it to string</span></span><br><span class="line"><span class="comment"># public key cannot be used for decryption</span></span><br><span class="line">decMessage = rsa.decrypt(encMessage, privateKey).decode()</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;decrypted string: &quot;</span>, decMessage)</span><br></pre></td></tr></table></figure>

<pre><code>original string:  hello geeks
encrypted string:  b&quot;\x1f~m\x87\xe0_\x8f\x89w1B$|l\x04t$\xa8j\xd4\xc7\xbdr&gt;y\xfa\xd1c\xc2\nm\x88\xd02\x05\x999\xae\x96O\xf8s\x83\xe3\xccw\xcc\xc5c\x97\xec\xdc\xefpe\xe9xkg\xdan\x83\xafzYJv\xdb\xf8\x8a\xa3\x1c\t\xb0\x96\xa6\xbci\xeb`&#39;\xe9\x15\x15\x97\x10\xca\x867\xa1\xb2d\xfc\xc4~:\xc5Q\xa1\xbe\x1aq-6\xc8\xd3&gt;&#39;!H\x15\x03F\x94V\xb5e\xaaBp\x13Nx\\\xac\xe1\x96\xf2\xde2\x98\xe1\xe0;_|\xefa\x17b\x9a\x1b@\x0f\xe9%\xd9\xfe@g\xecDxA\x8cS\x12\x8fI#\xf6\xa04qN\xe9g\x1f4Y\x19\x06\xff\xa1\xa0\xad\xec\x983Y\xd8%\xb1L\xa2r\xd8wr3\xbb\xa5\x06\xd7o\xed\xc4\xb5:JGr\xc2\xdb\x8bz\xb3$-\x89Xj\\2\xc5\x1f\xac\xa1\xfdm\xf5\x02m=\x9a\x0b\xd7\xb3\xc1\x80\xffY\\\x06V\x868\x81\xe54\t\x81\xaf\xae\xf7\xdd\x18\xb2&#123;\xec\xb7\x9e`&quot;
decrypted string:  hello geeks
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="https://angellaugh.github.io/2023/04/11/keycloak/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/uploads/avatar.jpg">
      <meta itemprop="name" content="Angellaugh">
      <meta itemprop="description" content="æŠ€æœ¯ï¼Œç”Ÿæ´»ï¼Œè‰ºæœ¯ï¼Œæ—…è¡Œï¼Œéƒ½è®°å½•ä¸‹æ¥">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Angellaugh's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/04/11/keycloak/" class="post-title-link" itemprop="url">KeyCloak</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2023-04-11 15:27:23" itemprop="dateCreated datePublished" datetime="2023-04-11T15:27:23+00:00">2023-04-11</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Teckknowledge/" itemprop="url" rel="index"><span itemprop="name">Teckknowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="keycloak"><a href="#keycloak" class="headerlink" title="keycloak"></a>keycloak</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line">keycloak-ali1:~/keycloak/keycloak-21.0.1/bin # sudo zypper refresh</span><br><span class="line">Repository &#x27;Update repository of openSUSE Backports&#x27; is up to date.</span><br><span class="line">Repository &#x27;Non-OSS Repository&#x27; is up to date.</span><br><span class="line">Repository &#x27;Main Repository&#x27; is up to date.</span><br><span class="line">Repository &#x27;Update repository with updates from SUSE Linux Enterprise 15&#x27; is up to date.</span><br><span class="line">Repository &#x27;Main Update Repository&#x27; is up to date.</span><br><span class="line">Repository &#x27;Update Repository (Non-Oss)&#x27; is up to date.</span><br><span class="line">All repositories have been refreshed.</span><br><span class="line">keycloak-ali1:~/keycloak/keycloak-21.0.1/bin # sudo zypper search openjdk-devel</span><br><span class="line">Loading repository data...</span><br><span class="line">Reading installed packages...</span><br><span class="line"></span><br><span class="line">S | Name                     | Summary                            | Type</span><br><span class="line">--+--------------------------+------------------------------------+--------</span><br><span class="line">  | java-1_8_0-openjdk-devel | OpenJDK 8 Development Environment  | package</span><br><span class="line">  | java-9-openjdk-devel     | OpenJDK 9 Development Environment  | package</span><br><span class="line">  | java-10-openjdk-devel    | OpenJDK 10 Development Environment | package</span><br><span class="line">  | java-11-openjdk-devel    | OpenJDK 11 Development Environment | package</span><br><span class="line">  | java-17-openjdk-devel    | OpenJDK 17 Development Environment | package</span><br><span class="line">keycloak-ali1:~/keycloak/keycloak-21.0.1/bin # sudo zypper --non-interactive install java-17-openjdk-devel</span><br><span class="line">Loading repository data...</span><br><span class="line">Reading installed packages...</span><br><span class="line">Resolving package dependencies...</span><br><span class="line"></span><br><span class="line">The following 2 recommended packages were automatically selected:</span><br><span class="line">  pcsc-lite timezone-java</span><br><span class="line"></span><br><span class="line">The following 11 NEW packages are going to be installed:</span><br><span class="line">  java-17-openjdk java-17-openjdk-devel java-17-openjdk-headless javapackages-filesystem javapackages-tools libXi6 libXtst6 libgif7 libpcsclite1</span><br><span class="line">  pcsc-lite timezone-java</span><br><span class="line"></span><br><span class="line">11 new packages to install.</span><br><span class="line">Overall download size: 43.9 MiB. Already cached: 0 B. After the operation, additional 189.6 MiB will be used.</span><br><span class="line">Continue? [y/n/v/...? shows all options] (y): y</span><br><span class="line">Retrieving package libXi6-1.7.9-3.2.1.x86_64                                                                  (1/11),  35.6 KiB ( 66.5 KiB unpacked)</span><br><span class="line">Retrieving: libXi6-1.7.9-3.2.1.x86_64.rpm ....................................................................................................[done]</span><br><span class="line">Retrieving package libXtst6-1.2.3-1.24.x86_64                                                                 (2/11),  17.2 KiB ( 22.4 KiB unpacked)</span><br><span class="line">Retrieving: libXtst6-1.2.3-1.24.x86_64.rpm ...................................................................................................[done]</span><br><span class="line">Retrieving package libgif7-5.2.1-150000.4.8.1.x86_64                                                          (3/11),  28.8 KiB ( 35.5 KiB unpacked)</span><br><span class="line">Retrieving: libgif7-5.2.1-150000.4.8.1.x86_64.rpm ............................................................................................[done]</span><br><span class="line">Retrieving package libpcsclite1-1.9.4-150400.1.9.x86_64                                                       (4/11),  32.8 KiB ( 38.4 KiB unpacked)</span><br><span class="line">Retrieving: libpcsclite1-1.9.4-150400.1.9.x86_64.rpm .........................................................................................[done]</span><br><span class="line">Retrieving package pcsc-lite-1.9.4-150400.1.9.x86_64                                                          (5/11),  82.2 KiB (140.4 KiB unpacked)</span><br><span class="line">Retrieving: pcsc-lite-1.9.4-150400.1.9.x86_64.rpm ............................................................................................[done]</span><br><span class="line">Retrieving package javapackages-filesystem-5.3.1-150200.3.4.4.x86_64                                          (6/11),  17.0 KiB (  1.9 KiB unpacked)</span><br><span class="line">Retrieving: javapackages-filesystem-5.3.1-150200.3.4.4.x86_64.rpm ................................................................[done (2.8 KiB/s)]</span><br><span class="line">Retrieving package timezone-java-2022g-150000.75.18.1.noarch                                                  (7/11), 155.0 KiB (341.2 KiB unpacked)</span><br><span class="line">Retrieving: timezone-java-2022g-150000.75.18.1.noarch.rpm ....................................................................................[done]</span><br><span class="line">Retrieving package javapackages-tools-5.3.1-150200.3.4.4.x86_64                                               (8/11),  37.7 KiB ( 71.6 KiB unpacked)</span><br><span class="line">Retrieving: javapackages-tools-5.3.1-150200.3.4.4.x86_64.rpm ...................................................................[done (129.7 KiB/s)]</span><br><span class="line">Retrieving package java-17-openjdk-headless-17.0.6.0-150400.3.12.1.x86_64                                     (9/11),  38.4 MiB (179.7 MiB unpacked)</span><br><span class="line">Retrieving: java-17-openjdk-headless-17.0.6.0-150400.3.12.1.x86_64.rpm ..........................................................[done (12.9 MiB/s)]</span><br><span class="line">Retrieving package java-17-openjdk-17.0.6.0-150400.3.12.1.x86_64                                             (10/11), 284.4 KiB (447.5 KiB unpacked)</span><br><span class="line">Retrieving: java-17-openjdk-17.0.6.0-150400.3.12.1.x86_64.rpm ..................................................................[done (869.5 KiB/s)]</span><br><span class="line">Retrieving package java-17-openjdk-devel-17.0.6.0-150400.3.12.1.x86_64                                       (11/11),   4.8 MiB (  8.8 MiB unpacked)</span><br><span class="line">Retrieving: java-17-openjdk-devel-17.0.6.0-150400.3.12.1.x86_64.rpm ..............................................................[done (7.8 MiB/s)]</span><br><span class="line"></span><br><span class="line">Checking for file conflicts: .................................................................................................................[done]</span><br><span class="line">( 1/11) Installing: libXi6-1.7.9-3.2.1.x86_64 ................................................................................................[done]</span><br><span class="line">( 2/11) Installing: libXtst6-1.2.3-1.24.x86_64 ...............................................................................................[done]</span><br><span class="line">( 3/11) Installing: libgif7-5.2.1-150000.4.8.1.x86_64 ........................................................................................[done]</span><br><span class="line">( 4/11) Installing: libpcsclite1-1.9.4-150400.1.9.x86_64 .....................................................................................[done]</span><br><span class="line">Created symlink /etc/systemd/system/sockets.target.wants/pcscd.socket -&gt; /usr/lib/systemd/system/pcscd.socket.</span><br><span class="line">Updating /etc/sysconfig/pcscd ...</span><br><span class="line">( 5/11) Installing: pcsc-lite-1.9.4-150400.1.9.x86_64 ........................................................................................[done]</span><br><span class="line">( 6/11) Installing: javapackages-filesystem-5.3.1-150200.3.4.4.x86_64 ........................................................................[done]</span><br><span class="line">( 7/11) Installing: timezone-java-2022g-150000.75.18.1.noarch ................................................................................[done]</span><br><span class="line">( 8/11) Installing: javapackages-tools-5.3.1-150200.3.4.4.x86_64 .............................................................................[done]</span><br><span class="line">update-alternatives: using /usr/lib64/jvm/jre-17-openjdk/bin/java to provide /usr/bin/java (java) in auto mode</span><br><span class="line">update-alternatives: using /usr/lib64/jvm/jre-17-openjdk to provide /usr/lib64/jvm/jre-openjdk (jre_openjdk) in auto mode</span><br><span class="line">update-alternatives: using /usr/lib64/jvm/jre-17-openjdk to provide /usr/lib64/jvm/jre-17 (jre_17) in auto mode</span><br><span class="line">( 9/11) Installing: java-17-openjdk-headless-17.0.6.0-150400.3.12.1.x86_64 ...................................................................[done]</span><br><span class="line">(10/11) Installing: java-17-openjdk-17.0.6.0-150400.3.12.1.x86_64 ............................................................................[done]</span><br><span class="line">update-alternatives: using /usr/lib64/jvm/java-17-openjdk/bin/javac to provide /usr/bin/javac (javac) in auto mode</span><br><span class="line">update-alternatives: using /usr/lib64/jvm/java-17-openjdk to provide /usr/lib64/jvm/java-openjdk (java_sdk_openjdk) in auto mode</span><br><span class="line">update-alternatives: using /usr/lib64/jvm/java-17-openjdk to provide /usr/lib64/jvm/java-17 (java_sdk_17) in auto mode</span><br><span class="line">(11/11) Installing: java-17-openjdk-devel-17.0.6.0-150400.3.12.1.x86_64 ......................................................................[done]</span><br><span class="line">Executing %posttrans scripts .................................................................................................................[done]</span><br><span class="line">keycloak-ali1:~/keycloak/keycloak-21.0.1/bin # javac -version</span><br><span class="line">javac 17.0.6</span><br></pre></td></tr></table></figure>



<h4 id="Realms"><a href="#Realms" class="headerlink" title="Realms"></a>Realms</h4><h5 id="Realms-are-isolated-from-one-another-and-can-only-manage-and-authenticate-the-users-that-they-control"><a href="#Realms-are-isolated-from-one-another-and-can-only-manage-and-authenticate-the-users-that-they-control" class="headerlink" title="Realms are isolated from one another and can only manage and authenticate the users that they control."></a>Realms are isolated from one another and can only manage and authenticate the users that they control.</h5><p><mark>You create a realm to provide a management space where you can create users and give them permissions to use applications.</mark></p>
<p><img src="/uploads/203023010625203.png"></p>
<h5 id="Set-Require-SSL-to-one-of-the-following-SSL-modes"><a href="#Set-Require-SSL-to-one-of-the-following-SSL-modes" class="headerlink" title="Set Require SSL to one of the following SSL modes:"></a>Set Require SSL to one of the following SSL modes:</h5><ul>
<li><p>External requests Users can interact with Keycloak without SSL so long as they stick to private IP addresses such as localhost, 127.0.0.1, 10.x.x.x, 192.168.x.x, and 172.16.x.x. If you try to access Keycloak without SSL from a non-private IP address, you will get an error.</p>
</li>
<li><p>None Keycloak does not require SSL. This choice applies only in development when you are experimenting and do not plan to support this deployment.</p>
</li>
<li><p>All requests Keycloak requires SSL for all IP addresses.</p>
</li>
</ul>
<p><img src="/uploads/354284833950954.png"></p>
<h5 id="Configuring-realm-keys"><a href="#Configuring-realm-keys" class="headerlink" title="Configuring realm keys"></a>Configuring realm keys</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Keycloak has a single active keypair at a time, but can have several passive keys as well. </span><br><span class="line">The active keypair is used to create new signatures, while the passive keypair can be used to verify previous signatures. </span><br><span class="line">This makes it possible to regularly rotate the keys without any downtime or interruption to users.</span><br><span class="line">Keycloak ä¸€æ¬¡åªæœ‰ä¸€ä¸ªä¸»åŠ¨å¯†é’¥å¯¹ï¼Œä½†ä¹Ÿå¯ä»¥æœ‰å¤šä¸ªè¢«åŠ¨å¯†é’¥ã€‚ä¸»åŠ¨å¯†é’¥å¯¹ç”¨äºåˆ›å»ºæ–°ç­¾åï¼Œè€Œè¢«åŠ¨å¯†é’¥å¯¹å¯ç”¨äºéªŒè¯ä»¥å‰çš„ç­¾åã€‚</span><br><span class="line">è¿™æ ·å°±å¯ä»¥å®šæœŸè½®æ¢å¯†é’¥ï¼Œè€Œä¸ä¼šå¯¹ç”¨æˆ·é€ æˆä»»ä½•åœæœºæˆ–å¹²æ‰°ã€‚</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>è™½ç„¶reaml setting çš„keyä¸­ï¼Œæ˜¯activeï¼Œä½†æ˜¯åˆ°åº•æœ‰æ²¡æœ‰ä½¿ç”¨å®ƒï¼Œå–å†³äºç¬¬ä¸€ä¸ªé€‰ä¸­çš„ key provider</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">A keypair can have the status Active, but still not be selected as the currently active keypair for the realm. </span><br><span class="line">The selected active pair which is used for signatures is selected based on the first key provider sorted by priority that is able to provide an active keypair.</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><mark>Once new keys are available all new tokens and cookies will be signed with the new keys.</mark></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">1. Once new keys are available all new tokens and cookies will be signed with the new keys.</span><br><span class="line"><span class="comment"># ä¸€æ—¦æ–°çš„keys ç”Ÿæ•ˆï¼Œæ‰€æœ‰çš„token cookieéƒ½è¢«signed with the new key.</span></span><br><span class="line">2. When a user authenticates to an application the SSO cookie is updated with the new signature.</span><br><span class="line"><span class="comment"># å½“user authenticates login via ssoï¼Œ  é‚£ä¹ˆ cookie å°±éšç€ new signature update. </span></span><br><span class="line">3. When OpenID Connect tokens are refreshed new tokens are signed with the new keys. </span><br><span class="line"><span class="comment">#  å½“OpenID token è¢«refreshï¼Œ æ–°çš„token å°±è¢«signed with new key.</span></span><br><span class="line">4. This means that over time all cookies and tokens will use the new keys and after a <span class="keyword">while</span> the old keys can be removed.</span><br><span class="line"><span class="comment"># æ„å‘³ç€ æ‰€æœ‰çš„cookie å’Œ token éƒ½åœ¨ä½¿ç”¨ new keysï¼Œ å¹¶ä¸”ï¼Œafter a while old key å°±è¢«remove äº†ã€‚</span></span><br><span class="line"></span><br><span class="line">è¿™é‡Œçš„ after a <span class="keyword">while</span>ï¼šåˆ é™¤æ—§å¯†é’¥çš„é¢‘ç‡æ˜¯å®‰å…¨æ€§ä¸ç¡®ä¿æ‰€æœ‰ cookie å’Œä»¤ç‰Œæ›´æ–°ä¹‹é—´çš„æƒè¡¡ã€‚</span><br><span class="line">The frequency of deleting old keys is a tradeoff between security and making sure all cookies and tokens are updated.</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> instance:  create new keys 3~6 months,  delete old keys 1~2 months. å¦‚æœuser åœ¨è¿™æœŸé—´old key è¢«åˆ äº†ï¼Œæ–°keyæ²¡æœ‰ï¼Œé‚£ä¹ˆé‡æ–°ç™»å½•è®¤è¯å³å¯ã€‚</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h6 id="Adding-a-generated-keypair"><a href="#Adding-a-generated-keypair" class="headerlink" title="Adding a generated keypair"></a>Adding a generated keypair</h6><p>æ›´æ”¹ä¼˜å…ˆçº§ä¸ä¼šç”Ÿæˆæ–°keyï¼Œä½†æ˜¯edit keysize ä¼šè§¦å‘ç”Ÿæˆæ–°key<br><img src="/uploads/595696697899358.png"></p>
<p>####### Compromised keys<br>keycloak has the signing keys stored just locally å°†ç­¾åå¯†é’¥å­˜å‚¨åœ¨æœ¬åœ°ï¼Œ ä¸ä¼šåˆ†äº«ç»™å…¶ä»–useræˆ–è€…application<br>å¦‚æœè®¤ä¸ºç­¾åå¯†é’¥å·²ç»æ³„éœ²ï¼Œå¯ä»¥ç«‹å³ç”Ÿæˆæ–°å¯†é’¥å¯¹ï¼Œå¹¶ä¸”åˆ é™¤æ—§å¯†é’¥ï¼Œç”šè‡³è€ƒè™‘åˆ é™¤providerã€‚</p>
<h5 id="Using-external-storage-æ­£æ˜¯éœ€è¦çš„"><a href="#Using-external-storage-æ­£æ˜¯éœ€è¦çš„" class="headerlink" title="Using external storage æ­£æ˜¯éœ€è¦çš„"></a>Using external storage æ­£æ˜¯éœ€è¦çš„</h5><p>ä¸€èˆ¬ä¸ä¼šæŠŠåŒ…å«æœ‰ä¿¡æ¯ï¼Œå¯†ç ï¼Œå…¶ä»–å‡­è¯ç­‰çš„æ•°æ®åº“è¿ç§»åˆ°keycloakå»ã€‚<br>keycloakæ”¯æŒå·²ç»å­˜åœ¨çš„å¤–éƒ¨ç”¨æˆ·æ•°æ®åº“ï¼Œæ¯”å¦‚LDAP, ADã€‚<br>ç”¨æˆ·ä¹Ÿå¯ä»¥é€šè¿‡keycloak user storage API æ¥ä¸ºä»»ä½• custom user database ç¼–å†™æ‰©å±•ä»£ç ã€‚</p>
<p>å½“ç”¨æˆ·å°è¯•ç™»é™†æ—¶ï¼Œkeycloak ä¼šæ£€æŸ¥è¯¥ç”¨æˆ·çš„å­˜å‚¨ä»¥æŸ¥æ‰¾è¯¥ç”¨æˆ·ï¼Œå¦‚æœæ‰¾ä¸åˆ°çš„è¯ï¼Œå°±ä¼šéå†å½“å‰realmçš„æ‰€æœ‰ user storage providerï¼Œç›´åˆ°ç›´åˆ°åŒ¹é…é¡¹ã€‚</p>
<p>æ¥è‡ªå¤–éƒ¨data storage çš„user ä¼š æ˜ å°„mapåˆ°keycloakè¿è¡Œæ—¶ä½¿ç”¨çš„æ ‡å‡†ç”¨æˆ·æ¨¡å‹ã€‚ç„¶åï¼Œè¿™ä¸ªæ ‡å‡†ç”¨æˆ·æ¨¡å‹æ˜ å°„åˆ° OIDC token claims ä»¤ç‰Œå£°æ˜å’Œ SAML assertion attributesã€‚</p>
<p>external user database å‡ ä¹ä¸ä¼šå®Œæ•´æ”¯æŒkeycloakçš„æ‰€æœ‰åŠŸèƒ½ã€‚<br>å› æ­¤ï¼ŒUser storage provider å¯ä»¥é€‰æ‹©æ€§çš„å­˜å‚¨items åˆ°keycloak user data storageä¸­ã€‚<br>User storage provider å¯ä»¥åœ¨æœ¬åœ°å¯¼å…¥ç”¨æˆ·ï¼Œå¹¶å®šæœŸä¸å¤–éƒ¨æ•°æ®å­˜å‚¨åŒæ­¥ã€‚<br>ä½†æ˜¯è¿™å–å†³äºexternal user databaseæ˜¯å¦æ”¯æŒOTPï¼Œ OTPå¯ä»¥é€šè¿‡Keycloakå¤„ç†å’Œå­˜å‚¨ã€‚</p>
<blockquote>
<p>ä¸€æ¬¡æ€§å¯†ç ï¼ˆOne Time Passwordï¼Œç®€ç§°OTPï¼‰ï¼Œåˆç§°â€œä¸€æ¬¡æ€§å£ä»¤â€ï¼Œæ˜¯æŒ‡åªèƒ½ä½¿ç”¨ä¸€æ¬¡çš„å¯†ç ã€‚ ä¸€æ¬¡æ€§å¯†ç æ˜¯æ ¹æ®ä¸“é—¨ç®—æ³•ã€æ¯éš”60ç§’ç”Ÿæˆä¸€ä¸ªä¸å¯é¢„æµ‹çš„éšæœºæ•°å­—ç»„åˆ  </p>
</blockquote>
<h6 id="Add-a-provider-kerberos-provider-or-LDAP-provicer"><a href="#Add-a-provider-kerberos-provider-or-LDAP-provicer" class="headerlink" title="Add a provider: kerberos provider or LDAP provicer"></a>Add a provider: kerberos provider or LDAP provicer</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">user federation &gt; can choose kerberos provider or LDAP provicer</span><br></pre></td></tr></table></figure>

<p>ä¸€ä¸ª keycloak realm å¯ä»¥ federate multiple different LDAP servers. å¹¶ä¸”æŠŠldap user æ˜ å°„æˆkeycloakçš„é€šç”¨user modelã€‚</p>
<p>keycloak é»˜è®¤æ˜ å°„username,  emailï¼Œ first/last name, ä¹Ÿå¯ä»¥configure additional mappings.<br>usermap: email</p>
<p>fullname: firstname and lastname</p>
<p>Hardcoded Attribute Mapper</p>
<p>Role Mapper: é€šå¸¸æ˜¯groupï¼Œ ä»LDAP map åˆ° keycloakå¯¹åº”çš„role groupï¼Œ æ¯”å¦‚ï¼š</p>
<ol>
<li>from groups under <mark>ou=main</mark>,dc=example,dc=org map to <mark>realm role mappings</mark>, </li>
<li>from groups under <mark>ou=finance</mark>,dc=example,dc=org map to <mark>client role mappings of client finance</mark>.</li>
</ol>
<p>Group Mapper</p>
<p><mark>Certificate Mapper</mark></p>
<p>æ­¤æ˜ å°„å™¨æ˜ å°„ X.509 è¯ä¹¦ã€‚Keycloak å°†å…¶ä¸ X.509 èº«ä»½éªŒè¯å’Œ PEM æ ¼å¼çš„å®Œæ•´è¯ä¹¦ç»“åˆä½¿ç”¨ï¼Œä½œä¸ºèº«ä»½æºã€‚æ­¤æ˜ å°„å™¨çš„è¡Œä¸ºç±»ä¼¼äºç”¨æˆ·å±æ€§æ˜ å°„å™¨ï¼Œä½† Keycloak å¯ä»¥è¿‡æ»¤å­˜å‚¨ PEM æˆ– DER æ ¼å¼è¯ä¹¦çš„ LDAP å±æ€§ã€‚ä½¿ç”¨æ­¤æ˜ å°„å™¨å¯ç”¨å§‹ç»ˆä» LDAP è¯»å–å€¼ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">This mapper maps X.509 certificates. Keycloak uses it in conjunction with X.509 authentication and Full certificate in PEM format as an identity source. This mapper behaves similarly to the User Attribute Mapper, but Keycloak can filter for an LDAP attribute storing a PEM or DER format certificate. Enable Always Read Value From LDAP with this mapper.</span><br></pre></td></tr></table></figure>



<h6 id="Dealing-with-provider-failures"><a href="#Dealing-with-provider-failures" class="headerlink" title="Dealing with provider failures"></a>Dealing with provider failures</h6><ul>
<li><p>Keycloak å…ˆæŸ¥è¯¢æœ¬åœ°æ•°æ®åº“æ¥è§£æuserï¼Œç„¶åæ‰è€ƒè™‘LDAP æˆ–è€…å…¶ä»–custom user storage provider.<br>æœ€å¥½åœ¨keycloak æœ¬åœ°å»ºç«‹admin accountï¼Œä»¥é˜²è¿æ¥åˆ° LDAP å’Œåç«¯æ—¶å‡ºç°é—®é¢˜ã€‚</p>
</li>
<li><p>ä»»ä½•external user storage provider åœ¨admin æ§åˆ¶å°éƒ½æœ‰<code>ä¸€ä¸ªenable å¼€å…³</code><br>external user storage provider(ldap or custom user storage provicer) <code>has an enable toggle</code> on </p>
</li>
<li><p>å¦‚æœæ‚¨çš„æä¾›ç¨‹åºä½¿ç”¨å¯¼å…¥ç­–ç•¥å¹¶è¢«ç¦ç”¨ï¼Œåˆ™å¯¼å…¥çš„ç”¨æˆ·ä»å¯åœ¨åªè¯»æ¨¡å¼ä¸‹è¿›è¡ŒæŸ¥æ‰¾ã€‚<br>If your provider uses an import strategy and is disabled, imported users are still available for lookup in read-only mode.</p>
</li>
<li><p>Duplicate usernames and emails can cause problems</p>
</li>
</ul>
<h6 id="Storage-mode"><a href="#Storage-mode" class="headerlink" title="Storage mode"></a>Storage mode</h6><ul>
<li><p>keycloak å°†LDAP user åŒæ­¥åˆ°æœ¬åœ°ï¼ˆå®šæœŸæˆ–åå°ï¼‰ï¼Œä½†æ˜¯ä¸ä¼šåŒæ­¥å¯†ç ï¼Œ <code>password validation åªä¼šåœ¨LDAP serverä¸Šæ‰§è¡Œã€‚</code><br>Password validation always occurs on the LDAP server.</p>
</li>
<li><p> ç”¨æˆ·ç¬¬ä¸€æ¬¡ç™»å½•keycloakæ—¶å€™ï¼Œkeycloakéƒ½ä¼šå°†å®ƒå†™å…¥æœ¬åœ°databaseã€‚ Keycloak performs a corresponding database insert.</p>
</li>
<li><p> å¯ä»¥ä½†éå¿…è¦ï¼ŒåŒæ­¥LDAPã€‚ can synchronizeï¼Œ but unnecessary.</p>
</li>
<li><p>æ‚¨å¯ä»¥å°† LDAP ä¸ Keycloak ä¸€èµ·ä½¿ç”¨ï¼Œè€Œæ— éœ€å°†ç”¨æˆ·å¯¼å…¥ Keycloak ç”¨æˆ·æ•°æ®åº“ã€‚LDAP æœåŠ¡å™¨å¤‡ä»½ Keycloak è¿è¡Œæ—¶ä½¿ç”¨çš„é€šç”¨ç”¨æˆ·æ¨¡å‹</p>
</li>
</ul>
<p><mark>å¦‚æœé€‰æ‹© disable import users, å°±æ— æ³•å°† user profile attributes ç”¨æˆ·é…ç½®æ–‡ä»¶å±æ€§ä¿å­˜åˆ°keycloakä¸­ã€‚</mark><br><mark>user profile attributes metadata mapped to the ldap å¯ä»¥ä¿å­˜åˆ°keycloakä¸­ï¼Œ ä½†æ˜¯ user metadataä¸èƒ½è¢«ä¿å­˜ï¼Œuser metadata=[role mappings, group mappings, other metadata based on the ldap mappers.]</mark></p>
<p><mark>å¦‚æœç¦ç”¨å¯¼å…¥ç”¨æˆ·ï¼Œåˆ™æ— æ³•å°†ç”¨æˆ·é…ç½®æ–‡ä»¶å±æ€§ä¿å­˜åˆ° Keycloak æ•°æ®åº“ä¸­ã€‚ æ­¤å¤–ï¼Œé™¤äº†æ˜ å°„åˆ° LDAP çš„ç”¨æˆ·é…ç½®æ–‡ä»¶å…ƒæ•°æ®ä¹‹å¤–ï¼Œæ‚¨æ— æ³•ä¿å­˜å…ƒæ•°æ®ã€‚ æ­¤å…ƒæ•°æ®å¯ä»¥åŒ…æ‹¬è§’è‰²æ˜ å°„ã€ç»„æ˜ å°„å’Œå…¶ä»–åŸºäº LDAP æ˜ å°„å™¨é…ç½®çš„å…ƒæ•°æ®ã€‚</mark></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">If you disable Import Users, you cannot save user profile attributes into the Keycloak database. </span><br><span class="line">Also, you cannot save metadata except for user profile metadata mapped to the LDAP. </span><br><span class="line">This metadata can include role mappings, group mappings, and other metadata based on the LDAP mappers&#x27; configuration.</span><br></pre></td></tr></table></figure>

<p><strong>UNSYNCED</strong><br>keycloak ä¼šæŠŠ æ›´æ”¹ username, email, password çš„åŠ¨ä½œä¿å­˜åœ¨localï¼Œè¿™äº›ä¿¡æ¯éœ€è¦åŒæ­¥å›ldapï¼Œ must synchronize this data back to LDAP</p>
<p>å½“ Keycloak åˆ›å»º LDAP æä¾›ç¨‹åºæ—¶ï¼ŒKeycloak è¿˜ä¼šåˆ›å»ºä¸€ç»„åˆå§‹ LDAP æ˜ å°„å™¨ã€‚Keycloak æ ¹æ®ä¾›åº”å•†ã€ç¼–è¾‘æ¨¡å¼å’Œå¯¼å…¥ç”¨æˆ·å¼€å…³çš„ç»„åˆæ¥é…ç½®è¿™äº›æ˜ å°„å™¨ã€‚<br>based on a combination of the Vendor, Edit Mode, and Import Users switches.</p>
<p><strong>Sync Registrations</strong><br>Toggle this switch to ON if you want new users created by Keycloak added to LDAP</p>
<ul>
<li><p>å½“é€‰æ‹© import userï¼Œ ç”¨æˆ·ç¬¬ä¸€æ¬¡ç™»å½•åï¼Œä»keycloak adminé‚£é‡ŒæŸ¥çœ‹all userï¼Œä¼šçœ‹åˆ°éªŒè¯è¿‡çš„userå±•ç¤ºåœ¨è¿™é‡Œï¼Œæ„æ€æ˜¯å·²ç»å¯¼å…¥äº†ï¼Œkeycloakåªåœ¨user ç¬¬ä¸€æ¬¡loginæ—¶å€™å¯¼å…¥ï¼Œè€Œä¸æ˜¯ä¸€æ¬¡æ€§å¯¼å…¥æ•´ä¸ªLDAPçš„æ‰€æœ‰userã€‚</p>
</li>
<li><p>å¦‚æœæƒ³ä¸€æ¬¡æ€§åŒæ­¥æ‰€æœ‰userï¼Œæœ‰2ç§æ–¹å¼</p>
</li>
</ul>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">If you want to sync all LDAP users into the Keycloak database, configure and enable the Sync Settings on the LDAP provider configuration page.</span><br><span class="line"></span><br><span class="line">1. Periodic Full sync</span><br><span class="line">æ­¤ç±»å‹å°†æ‰€æœ‰ LDAP ç”¨æˆ·åŒæ­¥åˆ° Keycloak æ•°æ®åº“ä¸­ã€‚å·²ç»åœ¨Keycloakä¸­ä½†ä¸LDAPä¸åŒçš„LDAPç”¨æˆ·ç›´æ¥åœ¨Keycloakæ•°æ®åº“ä¸­æ›´æ–°ã€‚</span><br><span class="line">2. Periodic Changed users sync</span><br><span class="line">åŒæ­¥æ—¶ï¼ŒKeycloak ä»…åˆ›å»ºæˆ–æ›´æ–°åœ¨ä¸Šæ¬¡åŒæ­¥ååˆ›å»ºæˆ–æ›´æ–°çš„ç”¨æˆ·ã€‚</span><br></pre></td></tr></table></figure>

<ul>
<li>æœ€ä½³åŒæ­¥ç­–ç•¥ï¼š åœ¨åˆ›å»ºLDAP provideræ—¶ï¼Œé€‰æ‹© <code>Synchronize all users</code>, ç„¶å <code>Synchronize all users</code><br>The best way to synchronize is to click Synchronize all users when you first create the LDAP provider, then set up Synchronize all usersSynchronize all users</li>
</ul>
<p><img src="/uploads/86293028586002.png"></p>
<h6 id="Password-hashing"><a href="#Password-hashing" class="headerlink" title="Password hashing"></a>Password hashing</h6><p>å½“ Keycloak æ›´æ–°å¯†ç æ—¶ï¼ŒKeycloak ä»¥çº¯æ–‡æœ¬æ ¼å¼å‘é€å¯†ç ã€‚<br>æ­¤æ“ä½œä¸åŒäºåœ¨å†…ç½® Keycloak æ•°æ®åº“ä¸­æ›´æ–°å¯†ç ï¼ŒKeycloak åœ¨å°†å¯†ç å‘é€åˆ°æ•°æ®åº“ä¹‹å‰å¯¹å¯†ç è¿›è¡Œå“ˆå¸Œå¤„ç†å’ŒåŠ ç›å¤„ç†ã€‚<br>å¯¹äº LDAPï¼ŒKeycloak ä¾èµ–äº LDAP æœåŠ¡å™¨å¯¹å¯†ç è¿›è¡Œæ•£åˆ—å’ŒåŠ ç›ã€‚</p>
<ol>
<li>By default, LDAP servers such as MSAD, RHDS, or FreeIPA hash and salt passwords. </li>
<li>Other LDAP servers such as OpenLDAP or ApacheDS store the passwords in plain-text unless you use the LDAPv3 Password Modify Extended Operation as described in RFC3062. </li>
<li>Always verify that user passwords are properly hashed and not stored as plaintext by inspecting a changed directory entry using ldapsearch and base64 decode the userPassword attribute value.</li>
</ol>
<h4 id="Authentication-flow"><a href="#Authentication-flow" class="headerlink" title="Authentication flow"></a>Authentication flow</h4><p>flowæ˜¯ä¸€ä¸ªåœ¨ç™»é™†ï¼Œæ³¨å†Œæˆ–è€…å…¶ä»–workflowæ—¶å€™è¦è¿›è¡Œçš„ èº«ä»½éªŒè¯ï¼Œå±å¹• å’Œ æ“ä½œã€‚<br>An authentication flow is a container of<br>authentications, screens, and actions, during log in, registration, and other Keycloak workflows.<br>To view all the flows, actions, and checks, each flow requires:</p>
<h5 id="browser-é‡Œé¢çš„-Formsï¼š"><a href="#browser-é‡Œé¢çš„-Formsï¼š" class="headerlink" title="browser é‡Œé¢çš„ Formsï¼š"></a><strong>browser é‡Œé¢çš„ Formsï¼š</strong></h5><p>å…ˆè¯´cookieï¼Œuser é¦–æ¬¡ç™»é™†æˆåŠŸåï¼Œkeycloakä¼š sets a session cookie.<br>å¦‚æœè¿™ä¸ªcookieå·²ç»å­˜åœ¨äº†ï¼Œauthentication type=success, cookie provider return success,<br>è€ŒåŒçº§å…¶ä»–éªŒè¯æ–¹å¼éƒ½æ˜¯alternativeå¯é€‰çš„ï¼Œ é‚£ä¹ˆkeycloakä¸ä¼šå†æ‰§è¡Œä»»ä½•æ“ä½œï¼Œè¿™æ¬¡è¯·æ±‚ä¼šè¿”å›ä¸€ä¸ªsuccessful login.</p>
<p>è€Œè¿™é‡Œçš„Formsï¼Œ æ˜¯ä¸ªå¯é€‰çš„å­flow alternative sub-flowï¼Œå®ƒèƒ½ä¸èƒ½è¢«æ‰§è¡Œï¼Œå–å†³äºå®ƒçš„parent status.<br>å®ƒåŒ…å«äº†ä¸€ä¸ªéœ€è¦è¢«æ‰§è¡Œçš„é¢å¤–éªŒè¯é¡¹ç›®ï¼Œå› æ­¤å¦‚æœæƒ³è¿™ä¸ªformè¢«æ‰§è¡Œï¼Œå°±éœ€è¦åˆ æ‰cookie éªŒè¯ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Since this sub-flow is marked as alternative, it will not be executed if the Cookie authentication type passed. </span><br><span class="line">This sub-flow contains an additional authentication type that needs to be executed. Keycloak loads the executions for this sub-flow and processes them.</span><br></pre></td></tr></table></figure>

<h5 id="éªŒè¯æ­¥éª¤"><a href="#éªŒè¯æ­¥éª¤" class="headerlink" title="éªŒè¯æ­¥éª¤"></a>éªŒè¯æ­¥éª¤</h5><ol>
<li>Username Password Form, åœ¨browser flowä¸­ï¼Œè¿™ä¸ªé€‰é¡¹æ˜¯requiredï¼Œå¹¶ä¸”ä¸å¯æ›´æ”¹ï¼Œ éœ€è¦ç”¨æˆ·è¾“å…¥uname+pwd</li>
<li> Browser - Conditional OTP sub-flowï¼Œ å®ƒæ˜¯based on the Condition-user configured</li>
<li>Condition - User Configured. This authentication checks if Keycloak has configured other executions in the flow for the user</li>
<li>OTP Form Keycloak å°†æ­¤æ‰§è¡Œæ ‡è®°ä¸ºå¿…éœ€ï¼Œä½†ä»…å½“ç”¨æˆ·ç”±äºæ¡ä»¶å­æµä¸­çš„è®¾ç½®è€Œè®¾ç½®äº† OTP å‡­æ®æ—¶ï¼Œå®ƒæ‰ä¼šè¿è¡Œã€‚å¦åˆ™ï¼Œç”¨æˆ·ä¸ä¼šçœ‹åˆ° OTP è¡¨å•ã€‚</li>
</ol>
<p><mark>å¯ä»¥æ·»åŠ æ–°çš„ç©ºç™½flowï¼Œä¹Ÿå¯ä»¥copyå·²ç»å­˜åœ¨çš„flowï¼Œ é‡Œé¢çš„actionæœ‰å¾ˆå¤šç§ï¼Œ from sending a reset email to validating an OTP.</mark><br><mark>å¯ä»¥å»ºç«‹sub-flow, å¯ä»¥æ‹–åŠ¨é¡ºåº</mark></p>
<p><img src="/uploads/151286775946824.png"></p>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://www.keycloak.org/docs/latest/server_admin/#configuring-authentication_server_administration_guide">https://www.keycloak.org/docs/latest/server_admin/#configuring-authentication_server_administration_guide</a></p>
</blockquote>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="https://angellaugh.github.io/2023/04/05/mapinuse/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/uploads/avatar.jpg">
      <meta itemprop="name" content="Angellaugh">
      <meta itemprop="description" content="æŠ€æœ¯ï¼Œç”Ÿæ´»ï¼Œè‰ºæœ¯ï¼Œæ—…è¡Œï¼Œéƒ½è®°å½•ä¸‹æ¥">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Angellaugh's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/04/05/mapinuse/" class="post-title-link" itemprop="url">mapinuse</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2023-04-05 22:13:02" itemprop="dateCreated datePublished" datetime="2023-04-05T22:13:02+00:00">2023-04-05</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2023-04-11 15:27:23" itemprop="dateModified" datetime="2023-04-11T15:27:23+00:00">2023-04-11</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Teckknowledge/" itemprop="url" rel="index"><span itemprop="name">Teckknowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="1-map-reduce-zip-filter-å¯¹åºåˆ—æ“ä½œ"><a href="#1-map-reduce-zip-filter-å¯¹åºåˆ—æ“ä½œ" class="headerlink" title="1. map, reduce, zip, filter å¯¹åºåˆ—æ“ä½œ"></a>1. map, reduce, zip, filter å¯¹åºåˆ—æ“ä½œ</h2><p>å¯¹æŒ‡å®šåºåˆ—åšæ˜ å°„ï¼Œè¿”å›å€¼æ˜¯è¿­ä»£å™¨</p>
<h2 id="2-map"><a href="#2-map" class="headerlink" title="2. map"></a>2. map</h2><p>æ”¶è·ï¼š</p>
<ol>
<li>map(func, list_) æ˜¯ä¸€ä¸ªè¿­ä»£å™¨ï¼Œéœ€è¦ä¸€ä¸ªä¸€ä¸ªå–ï¼Œå–ä¸€æ¬¡è¿è¡Œä¸€æ¬¡ï¼Œæ‹¿åˆ°ä¸€æ¬¡å€¼ï¼›</li>
<li>next: å¯ä»¥å–ä¸€æ¬¡è¿­ä»£å™¨çš„å€¼ï¼›å¦‚æœå–åˆ°æœ€åæ²¡å€¼äº†ä¼šæŠ›å‡ºä¸€ä¸ªé”™ï¼›</li>
<li>list: å¯ä»¥éå†å–å¤šæ¬¡è¿­ä»£å™¨ï¼Œç›´åˆ°å–åˆ°æ‰€æœ‰å€¼ï¼Œå¹¶ä¸”å­˜åˆ°listä¸­ï¼›</li>
<li>list(map(func, list_)) å¯ä»¥å–ä»£ä¹‹å‰çš„æ—§å†™æ³•ï¼Œå®šä¹‰ä¸€ä¸ªå˜é‡ï¼Œtype=list, ç„¶åforå¾ªç¯å–å€¼appendåˆ°è¿™ä¸ªå˜é‡listä¸­ï¼›</li>
<li>list[func(x) for x in list_]  ä¹Ÿå¯ä»¥ç¨å¾®ç®€å†™ä¸€ä¸‹forå¾ªç¯ï¼›</li>
</ol>
<p><strong>å°è¡¥å……ï¼š listè¿˜çœŸæ˜¯éå†å¤šæ¬¡è¿­ä»£å–å€¼</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">nums = <span class="built_in">range</span>(-<span class="number">5</span>, <span class="number">6</span>)</span><br><span class="line"><span class="built_in">print</span>(nums)</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">type</span>(nums))</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">list</span>(nums))</span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">range(-5, 6)</span></span><br><span class="line"><span class="string">&lt;class &#x27;range&#x27;&gt;</span></span><br><span class="line"><span class="string">[-5, -4, -3, -2, -1, 0, 1, 2, 3, 4, 5]</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h3 id="2-1-map-func-iterables"><a href="#2-1-map-func-iterables" class="headerlink" title="2.1. map(func, iterables)"></a>2.1. map(func, iterables)</h3><p>map(function, *iterables)<br>å¯¹æŒ‡å®šåºåˆ—åšæ˜ å°„ï¼Œè¿”å›å€¼æ˜¯ä¸ªè¿­ä»£å™¨ï¼Œå¯è¿­ä»£å¯¹è±¡ï¼š listï¼Œsetï¼Œ tuple<br>map å–ä»£forå¾ªç¯</p>
<p>list(map(function, *iteratbles))  == [function(iterable) for iterable in iterables]</p>
<h3 id="2-2-æœ€å¸¸ç†è§£çš„å®ç°æ˜¯forå¾ªç¯ï¼ŒæŠŠç»“æœæ”¶é›†åˆ°ä¸€ä¸ªæå‰å®šä¹‰å¥½çš„listä¸­"><a href="#2-2-æœ€å¸¸ç†è§£çš„å®ç°æ˜¯forå¾ªç¯ï¼ŒæŠŠç»“æœæ”¶é›†åˆ°ä¸€ä¸ªæå‰å®šä¹‰å¥½çš„listä¸­" class="headerlink" title="2.2. æœ€å¸¸ç†è§£çš„å®ç°æ˜¯forå¾ªç¯ï¼ŒæŠŠç»“æœæ”¶é›†åˆ°ä¸€ä¸ªæå‰å®šä¹‰å¥½çš„listä¸­"></a>2.2. æœ€å¸¸ç†è§£çš„å®ç°æ˜¯forå¾ªç¯ï¼ŒæŠŠç»“æœæ”¶é›†åˆ°ä¸€ä¸ªæå‰å®šä¹‰å¥½çš„listä¸­</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">numbers = [<span class="number">2</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">8</span>, <span class="number">5</span>]</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">square</span>(<span class="params">x</span>):</span><br><span class="line">    <span class="keyword">return</span> x * x</span><br><span class="line">a= []</span><br><span class="line"><span class="comment"># åªä¼šè¿™ä¹ˆå†™ï¼Œæˆ–è€…next</span></span><br><span class="line"><span class="keyword">for</span> x <span class="keyword">in</span> numbers:</span><br><span class="line">    a.append(square(x))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;a: <span class="subst">&#123;a&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line">b = [square(x) <span class="keyword">for</span> x <span class="keyword">in</span> numbers]</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;a: <span class="subst">&#123;a&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">map(function, *iterables)</span></span><br><span class="line"><span class="string">å¯¹æŒ‡å®šåºåˆ—åšæ˜ å°„ï¼Œè¿”å›å€¼æ˜¯ä¸ªè¿­ä»£å™¨ï¼Œå¯è¿­ä»£å¯¹è±¡ï¼š listï¼Œsetï¼Œ tuple</span></span><br><span class="line"><span class="string">map å–ä»£forå¾ªç¯</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure>
<pre><code>a: [4, 16, 36, 64, 25]
b: [4, 16, 36, 64, 25]
</code></pre>
<h3 id="2-3-è¿›é˜¶ï¼š-ä½¿ç”¨map-ç®€åŒ–æ‰forå¾ªç¯ä»¥åŠæå‰å®šä¹‰list"><a href="#2-3-è¿›é˜¶ï¼š-ä½¿ç”¨map-ç®€åŒ–æ‰forå¾ªç¯ä»¥åŠæå‰å®šä¹‰list" class="headerlink" title="2.3. è¿›é˜¶ï¼š ä½¿ç”¨map ç®€åŒ–æ‰forå¾ªç¯ä»¥åŠæå‰å®šä¹‰list"></a>2.3. è¿›é˜¶ï¼š ä½¿ç”¨map ç®€åŒ–æ‰forå¾ªç¯ä»¥åŠæå‰å®šä¹‰list</h3><mark>
list(map(func, list_))ï¼š ç­‰äº for å¾ªç¯å–å‡º mapå¾—åˆ°çš„len(list_)ä¸ªå…ƒç´ å¹¶ä¸”appendåˆ°ä¸€ä¸ªlistä¸­ï¼›

<ol>
<li>next å¯ä»¥å–å‡º mapè¿­ä»£å™¨çš„å€¼ï¼›</li>
<li>for è¯­å¥ç­‰åŒäº nextçš„æ•ˆæœï¼ŒæŒ¨ä¸ªå–å‡ºmapè¿­ä»£å™¨çš„å€¼ï¼›</li>
<li>list(map(func, list_)) ç­‰äº point2 å¹¶ä¸”appendåˆ°ä¸€ä¸ªlistä¸­ï¼›</mark></li>
</ol>
<h4 id="2-3-1-ä¸¾ä¾‹-next-æ•ˆæœï¼Œæ›´æ·±åˆ»ç†è§£list-map-çš„æ•ˆæœ"><a href="#2-3-1-ä¸¾ä¾‹-next-æ•ˆæœï¼Œæ›´æ·±åˆ»ç†è§£list-map-çš„æ•ˆæœ" class="headerlink" title="2.3.1. ä¸¾ä¾‹ next æ•ˆæœï¼Œæ›´æ·±åˆ»ç†è§£list(map)çš„æ•ˆæœ"></a>2.3.1. ä¸¾ä¾‹ next æ•ˆæœï¼Œæ›´æ·±åˆ»ç†è§£list(map)çš„æ•ˆæœ</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">numbers = [2, 4, 6, 8, 5]</span><br><span class="line">def square(x):</span><br><span class="line">    return x * x</span><br><span class="line"></span><br><span class="line"># type: class map, object</span><br><span class="line">square_num = map(square, numbers)</span><br><span class="line">print(type(square_num))</span><br><span class="line">print(square_num)</span><br><span class="line"># åœ¨listçš„æ—¶å€™è°ƒç”¨äº†square_numï¼Œè¿­ä»£5æ¬¡ï¼Œå¹¶ä¸”æŠŠæ¯æ¬¡è¿­ä»£çš„return éƒ½appendè¿›listä¸­ã€‚</span><br><span class="line"># ç±»ä¼¼äºnext(square_num)äº†5æ¬¡</span><br><span class="line"># ä¹Ÿç±»ä¼¼äºforå¾ªç¯æŠŠæ¯ä¸ªè¿­ä»£å…ƒç´ è°ƒç”¨ä¸€æ¬¡ï¼Œå¾—åˆ°çš„å€¼åŠ å…¥åˆ°listä¸­ã€‚</span><br><span class="line">print(next(square_num))  #4</span><br><span class="line">print(list(square_num))  # å› ä¸ºä¸Šé¢nextå·²ç»å–èµ°äº†ç¬¬ä¸€ä¸ªå€¼ï¼Œæ‰€ä»¥listè¿™é‡Œåªå‰©ä¸‹4ä¸ªå€¼</span><br></pre></td></tr></table></figure>
<pre><code>&lt;class &#39;map&#39;&gt;
&lt;map object at 0x110a75c70&gt;
4
[16, 36, 64, 25] 
</code></pre>
<h4 id="2-3-2-ä¸¾ä¾‹-forå¾ªç¯å–å‡ºå€¼appendåˆ°listä¸­ï¼Œç”¨list-map-æ¥å–ä»£forå¾ªç¯ã€‚"><a href="#2-3-2-ä¸¾ä¾‹-forå¾ªç¯å–å‡ºå€¼appendåˆ°listä¸­ï¼Œç”¨list-map-æ¥å–ä»£forå¾ªç¯ã€‚" class="headerlink" title="2.3.2. ä¸¾ä¾‹ forå¾ªç¯å–å‡ºå€¼appendåˆ°listä¸­ï¼Œç”¨list(map)æ¥å–ä»£forå¾ªç¯ã€‚"></a>2.3.2. ä¸¾ä¾‹ forå¾ªç¯å–å‡ºå€¼appendåˆ°listä¸­ï¼Œç”¨list(map)æ¥å–ä»£forå¾ªç¯ã€‚</h4><p><mark><del>å…¶å®ç²¾ç®€äº†ä¸¤æ¬¡forå¾ªç¯</del> å…¶å®æ˜¯map+list ä¸¤ä¸ªåŠ¨ä½œ ä¸€èµ·å–ä»£äº† forå¾ªç¯å’Œlist.append</p>
<ol>
<li>numbsers å’Œ square ç”¨mapæ¥ä¸€ä¸€æ˜ å°„ï¼›</li>
<li>list(map) è¾¾åˆ°äº† ä¸€ä¸ªä¸€ä¸ªfor å¹¶ä¸” appendçš„æ•ˆæœï¼›</li>
<li>å•Šå“ˆå“ˆå“ˆ æ„å¤–ä¹‹å–œï¼Œç†è§£äº†å¦ä¸€ä¸ªå†™æ³•ï¼šb = [square(x) for x in numbers]</mark>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2023/04/05/mapinuse/#more" rel="contents">
                Read more &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="https://angellaugh.github.io/2023/04/02/openssl_ca2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/uploads/avatar.jpg">
      <meta itemprop="name" content="Angellaugh">
      <meta itemprop="description" content="æŠ€æœ¯ï¼Œç”Ÿæ´»ï¼Œè‰ºæœ¯ï¼Œæ—…è¡Œï¼Œéƒ½è®°å½•ä¸‹æ¥">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Angellaugh's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/04/02/openssl_ca2/" class="post-title-link" itemprop="url">openssl_ca2</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2023-04-02 11:11:02" itemprop="dateCreated datePublished" datetime="2023-04-02T11:11:02+00:00">2023-04-02</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2023-04-11 15:27:23" itemprop="dateModified" datetime="2023-04-11T15:27:23+00:00">2023-04-11</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Teckknowledge/" itemprop="url" rel="index"><span itemprop="name">Teckknowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="1-CA-ç®€ä»‹-amp-èŒƒä¾‹"><a href="#1-CA-ç®€ä»‹-amp-èŒƒä¾‹" class="headerlink" title="1. CA ç®€ä»‹ &amp; èŒƒä¾‹"></a>1. CA ç®€ä»‹ &amp; èŒƒä¾‹</h2><p><strong>CA</strong>= certificate authorityç­¾è¯æœºæ„<br>æä¾›è¯ä¹¦ï¼ˆæœåŠ¡å™¨è¯ä¹¦ï¼Œç”±åŸŸåã€å…¬å¸ä¿¡æ¯ã€åºåˆ—å·å’Œç­¾åä¿¡æ¯ç»„æˆï¼‰</p>
<p><strong>SSL:</strong> Secure Sockets Layerï¼ˆå®‰å…¨å¥—æ¥å±‚åè®®), ä¸HTTPSä¸€èµ·è¯ç”Ÿ<br><strong>TLS:</strong> TLSï¼ŒTransport Layer Securityï¼ˆä¼ è¾“å±‚å®‰å…¨æ€§åè®®ï¼‰ï¼Œ æ˜¯SSL æ ‡å‡†åŒ–<br><mark><strong>SSL &amp; TLSï¼š æœ¬è´¨æ˜¯åŒä¸€ä¸ªä¸œä¸œ</strong></mark></p>
<p><strong>è¯ä¹¦åŒ…å«ï¼š</strong></p>
<ol>
<li>public keyã€</li>
<li>åç§°ã€ </li>
<li><mark>CAçš„æ•°å­—ç­¾å</mark></li>
<li>æœ‰æ•ˆæ—¶é—´ï¼Œ</li>
<li>ç­¾è¯æœºå…³çš„åç§°ï¼Œ</li>
<li>è¯¥è¯ä¹¦çš„åºåˆ—å·ç­‰ä¿¡æ¯</li>
</ol>
<div class="note primary">
            <p>ç°åœ¨è¯¥è¯´ç‚¹ä»€ä¹ˆå‘¢</p>
          </div>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">### 2.4. View the issued CA</span></span><br><span class="line">```bash</span><br><span class="line">CIAM-ali1:~/CAcerts <span class="comment"># openssl x509 -text -noout -in server.pem</span></span><br><span class="line">Certificate:</span><br><span class="line">    Data:</span><br><span class="line">        Version: 3 (0x2)</span><br><span class="line">        Serial Number: 4096 (0x1000)</span><br><span class="line">        Signature Algorithm: sha256WithRSAEncryption</span><br><span class="line">        <span class="comment"># ç­¾è¯æœºæ„</span></span><br><span class="line">        Issuer: C = CN, ST = Shanghai, L = Shanghai, O = Dell, OU = Dell</span><br><span class="line">        <span class="comment">#æœ‰æ•ˆæœŸ</span></span><br><span class="line">        Validity</span><br><span class="line">            Not Before: Mar 27 08:22:59 2023 GMT</span><br><span class="line">            Not After : Mar 26 08:22:59 2024 GMT</span><br><span class="line">        <span class="comment"># åå­—    </span></span><br><span class="line">        Subject: C = CN, ST = Shanghai, O = Dell, OU = Dell, CN = ciam-ali1.west.isilon.com</span><br><span class="line">        <span class="comment">#public key</span></span><br><span class="line">        Subject Public Key Info:</span><br><span class="line">            Public Key Algorithm: rsaEncryption</span><br><span class="line">                RSA Public-Key: (2048 bit)</span><br><span class="line">                Modulus:</span><br><span class="line">                    00:e8:53:ef:bd:b0:e9:99:2b:af:35:da:2e:b5:81:</span><br><span class="line">                    61:18:17:7a:7b:69:a0:46:c1:c2:ee:24:d7:36:52:</span><br><span class="line">                    e9:5c:3d:49:ea:be:31:54:e0:a5:ff:a9:e1:19:b3:</span><br><span class="line">                    81:8a:38:9e:a3:fa:62:23:b0:85:07:d1:35:3e:40:</span><br><span class="line">                    7c:1a:68:1d:a8:6b:08:01:c8:95:d3:85:09:b0:7c:</span><br><span class="line">                    60:85:dc:13:dc:91:a2:73:ee:f3:7e:42:80:99:24:</span><br><span class="line">                    4f:09:13:91:9b:da:87:ee:ae:f2:ec:d9:9e:a6:75:</span><br><span class="line">                    1d:e3:c6:cf:78:58:7d:2a:7e:8e:cf:65:30:60:ab:</span><br><span class="line">                    42:6b:6d:76:f8:f2:46:de:c3:b5:4b:c9:60:39:24:</span><br><span class="line">                    a0:5e:59:0c:b3:30:9e:3b:67:ae:d4:5f:53:6e:63:</span><br><span class="line">                    47:92:dc:0c:39:9f:a6:39:b0:45:82:5b:e1:4d:a8:</span><br><span class="line">                    ed:75:96:8a:98:32:49:f6:9b:a3:6e:69:91:f0:18:</span><br><span class="line">                    2e:66:9e:ca:77:7e:b3:a6:96:d6:4a:e1:b1:51:a3:</span><br><span class="line">                    1f:7d:d2:5f:41:ce:1c:02:c2:42:aa:b5:3b:61:1c:</span><br><span class="line">                    9f:b9:45:70:fe:85:d0:d8:a3:6f:e5:e8:3d:9f:9e:</span><br><span class="line">                    6d:53:57:f9:0f:0a:56:a4:f5:77:bb:4a:ff:<span class="built_in">fc</span>:8a:</span><br><span class="line">                    4a:67:e1:82:43:f1:7b:16:5a:80:1b:8f:da:f4:c4:</span><br><span class="line">                    25:0d</span><br><span class="line">                Exponent: 65537 (0x10001)</span><br><span class="line">        X509v3 extensions:</span><br><span class="line">            X509v3 Basic Constraints:</span><br><span class="line">                CA:FALSE</span><br><span class="line">            X509v3 Subject Key Identifier:</span><br><span class="line">                D1:4F:3F:CD:DC:17:7E:50:38:A8:50:D6:EA:2C:BA:3D:6C:62:35:A1</span><br><span class="line">            X509v3 Extended Key Usage:</span><br><span class="line">                TLS Web Server Authentication</span><br><span class="line">            X509v3 Subject Alternative Name:</span><br><span class="line">                DNS:ciam-ali1.west.isilon.com</span><br><span class="line">    Signature Algorithm: sha256WithRSAEncryption</span><br><span class="line">         09:6b:25:4e:ca:a1:<span class="built_in">fc</span>:2c:bb:35:5f:65:c8:47:92:7a:a1:53:</span><br><span class="line">         b7:fd:6e:41:5a:39:32:35:87:b1:24:de:83:6e:23:6c:67:49:</span><br><span class="line">         47:ba:91:de:7a:b1:81:f3:0a:3a:d3:25:35:13:6d:0f:d9:77:</span><br><span class="line">         a4:6a:7e:a6:72:06:d9:b1:95:15:36:61:46:a4:b7:0f:16:c3:</span><br><span class="line">         41:55:aa:e1:5c:93:28:4b:f0:9b:74:04:a1:08:59:97:23:c9:</span><br><span class="line">         1b:17:d0:38:7d:74:e4:9a:42:e2:f7:0a:2d:01:8d:d3:7f:57:</span><br><span class="line">         eb:b8:08:2e:fe:5f:b1:86:90:d2:97:64:9e:9a:61:51:06:9e:</span><br><span class="line">         7c:25:a9:87:5c:63:e6:d5:18:9b:cb:0e:20:71:77:06:fd:2e:</span><br><span class="line">         0f:c1:b9:21:75:34:ec:5a:11:4d:48:f8:4d:de:67:7a:f4:e6:</span><br><span class="line">         3c:a1:4a:01:40:8f:ce:2c:c1:ae:5e:52:66:0d:6c:29:7b:f0:</span><br><span class="line">         b3:ce:ae:b2:cf:13:d1:0e:ed:83:e3:15:16:5a:8c:ba:15:45:</span><br><span class="line">         08:46:b6:63:92:66:ab:2c:2c:1c:f6:2c:34:d9:7d:9f:b6:d3:</span><br><span class="line">         07:34:72:bb:89:81:27:d0:88:0f:b9:3e:e8:f2:3a:3c:7f:5c:</span><br><span class="line">         88:88:1b:77:7a:41:a9:c9:99:2f:e5:76:87:8e:26:ec:85:c0:</span><br><span class="line">         12:ac:02:25</span><br><span class="line">CIAM-ali1:~/CAcerts <span class="comment">#</span></span><br></pre></td></tr></table></figure>

<p><img src="vx_images/116433111278673.png"><br><img src="/uploads/116433111278673.png"></p>
<p><strong>ä¸ªäººæˆ–ç»„ç»‡æäº¤CRS ç»™ CA æœºæ„ï¼Œ CAç­¾å‘</strong></p>
<h2 id="2-SSL-amp-TLS-å®‰å…¨å¥—æ¥åè®®"><a href="#2-SSL-amp-TLS-å®‰å…¨å¥—æ¥åè®®" class="headerlink" title="2. SSL&amp;TLS  å®‰å…¨å¥—æ¥åè®®"></a>2. SSL&amp;TLS  å®‰å…¨å¥—æ¥åè®®</h2><p><MARK>SSL: Secure Sockets Layerï¼ˆå®‰å…¨å¥—æ¥å±‚åè®®), ä¸HTTPSä¸€èµ·è¯ç”Ÿ<br>TLS: TLSï¼ŒTransport Layer Securityï¼ˆä¼ è¾“å±‚å®‰å…¨æ€§åè®®ï¼‰ï¼Œ æ˜¯SSL æ ‡å‡†åŒ–<br>SSL &amp; TLSï¼š æœ¬è´¨æ˜¯åŒä¸€ä¸ªä¸œä¸œ</MARK></p>
<blockquote>
<p>SSLæ˜¯ Secure Sockets Layerï¼ˆå®‰å…¨å¥—æ¥å±‚åè®®ï¼‰çš„ç¼©å†™ã€‚ç”±ç½‘æ™¯å…¬å¸å†1994å¹´éšHTTPSä¸€èµ·æ¨å‡ºã€‚<br>åäº¤ç”±IETFå°†SSLè¿›è¡Œæ ‡å‡†åŒ–ï¼Œå¹¶æ”¹åä¸º TLSï¼ŒTransport Layer Securityï¼ˆä¼ è¾“å±‚å®‰å…¨æ€§åè®®ï¼‰ã€‚<br>æ‰€ä»¥ TLS æ˜¯ SSL æ”¹ä¸ªåè€Œå·²ï¼Œå…¶å®æ˜¯ä¸€ä¸ªä¸œè¥¿ã€‚</p>
</blockquote>
<h3 id="2-1-SSL-åˆ†ä¸¤å±‚ï¼š-record-layerè®°å½•å±‚-å’Œ-ä¼ è¾“å±‚"><a href="#2-1-SSL-åˆ†ä¸¤å±‚ï¼š-record-layerè®°å½•å±‚-å’Œ-ä¼ è¾“å±‚" class="headerlink" title="2.1. SSL åˆ†ä¸¤å±‚ï¼š record layerè®°å½•å±‚ å’Œ ä¼ è¾“å±‚"></a>2.1. SSL åˆ†ä¸¤å±‚ï¼š record layerè®°å½•å±‚ å’Œ ä¼ è¾“å±‚</h3><p>è®°å½•å±‚ï¼š ç¡®å®šä¼ è¾“å±‚çš„å°è£…æ ¼å¼<br>ä¼ è¾“å±‚ï¼š ä½¿ç”¨x509è®¤è¯<br>ç„¶åï¼Œç”¨éå¯¹ç§°åŠ å¯†ç®—æ³•æ¥å¯¹åŒæ–¹è¿›è¡Œèº«ä»½è®¤è¯<br>å†ç„¶åï¼Œ<mark>äº¤æ¢å¯¹ç§°å¯†é’¥ï¼Œä½œä¸ºsession keyï¼Œ</mark> ç»™é€šä¿¡åŒæ–¹çš„dataåšåŠ å¯†</p>
<h3 id="2-2-SSL-è¯ä¹¦æœ‰ä¸‰ç§ï¼š-DV-OV-EV"><a href="#2-2-SSL-è¯ä¹¦æœ‰ä¸‰ç§ï¼š-DV-OV-EV" class="headerlink" title="2.2. SSL è¯ä¹¦æœ‰ä¸‰ç§ï¼š DV, OV, EV"></a>2.2. SSL è¯ä¹¦æœ‰ä¸‰ç§ï¼š DV, OV, EV</h3><ul>
<li>DVï¼ˆDomain Validationï¼‰åŸŸåéªŒè¯å‹è¯ä¹¦ï¼Œé¢å‘ä¸ªä½“ç”¨æˆ·ï¼Œå¯ä»¥é€šè¿‡é‚®ç®±éªŒè¯ã€DNSéªŒè¯æˆ–è€…æ–‡ä»¶éªŒè¯</li>
<li>OVï¼ˆOrganization Validationï¼‰ä¼ä¸šéªŒè¯å‹è¯ä¹¦ï¼Œé¢å‘ä¼ä¸šç”¨æˆ·ï¼ŒCA é€šè¿‡æ‹¨æ‰“ä¿¡æ¯åº“ä¸­å…¬å¸çš„ç”µè¯æ¥ç¡®è®¤ï¼›</li>
<li>EVï¼ˆExtended Validationï¼‰å¢å¼ºéªŒè¯å‹è¯ä¹¦ï¼Œè¯ä¹¦å®¡æ ¸çº§åˆ«ä¸ºæ‰€æœ‰ç±»å‹æœ€ä¸¥æ ¼éªŒè¯æ–¹å¼ï¼Œ é“¶è¡Œï¼Œé‡‘èã€‚</li>
</ul>
<h2 id="3-openssl-å®‰å…¨å¥—æ¥å­—å±‚å¯†ç åº“ï¼Œå®ç°è‡ªç­¾åè¯ä¹¦"><a href="#3-openssl-å®‰å…¨å¥—æ¥å­—å±‚å¯†ç åº“ï¼Œå®ç°è‡ªç­¾åè¯ä¹¦" class="headerlink" title="3. openssl å®‰å…¨å¥—æ¥å­—å±‚å¯†ç åº“ï¼Œå®ç°è‡ªç­¾åè¯ä¹¦"></a>3. openssl å®‰å…¨å¥—æ¥å­—å±‚å¯†ç åº“ï¼Œå®ç°è‡ªç­¾åè¯ä¹¦</h2><blockquote>
<p>å¯å‚è€ƒç³»åˆ—æ–‡ç« ï¼š<br><a href="https://angellaugh.github.io/2023/04/01/openssl/">openssl</a><br><a href="https://angellaugh.github.io/2023/03/28/openssl_2_signed/">openssl2:self-signed certificate</a></p>
</blockquote>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2023/04/02/openssl_ca2/#more" rel="contents">
                Read more &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="https://angellaugh.github.io/2023/04/01/multiprotocol/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/uploads/avatar.jpg">
      <meta itemprop="name" content="Angellaugh">
      <meta itemprop="description" content="æŠ€æœ¯ï¼Œç”Ÿæ´»ï¼Œè‰ºæœ¯ï¼Œæ—…è¡Œï¼Œéƒ½è®°å½•ä¸‹æ¥">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Angellaugh's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/04/01/multiprotocol/" class="post-title-link" itemprop="url">Multiprocess_1 tasks</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2023-04-01 15:37:02" itemprop="dateCreated datePublished" datetime="2023-04-01T15:37:02+00:00">2023-04-01</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2023-04-11 15:27:23" itemprop="dateModified" datetime="2023-04-11T15:27:23+00:00">2023-04-11</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Teckknowledge/" itemprop="url" rel="index"><span itemprop="name">Teckknowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> multiprocessing</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">core_num = multiprocessing.cpu_count()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;corenum: <span class="subst">&#123;core_num&#125;</span>&quot;</span>)</span><br><span class="line">clients = [<span class="string">&quot;eb380adf-8fe8-45dd-825f-4e7da940eca9&quot;</span>,<span class="string">&quot;990f5d3c-5e5f-4af8-b68b-1329272ac3b4&quot;</span>,</span><br><span class="line">           <span class="string">&quot;15cc0813-8a2e-4a90-9ba6-7a8ddf3bd32d&quot;</span>,<span class="string">&quot;5bf8729e-fb28-476e-b054-5a0656dc4fed&quot;</span>,</span><br><span class="line">           <span class="string">&quot;27a1e6bb-439b-475e-bbcf-9744622992cd&quot;</span>,<span class="string">&quot;6491b68c-5360-4638-8194-da9f5431c4eb&quot;</span>,</span><br><span class="line">           <span class="string">&quot;da2fd513-acdc-48e9-b9fe-c0de13e90eb0&quot;</span>,<span class="string">&quot;f75d48b0-74ab-4d96-b8a7-4357985e78bc&quot;</span>,</span><br><span class="line">           <span class="string">&quot;d76c8dbe-0821-4736-a4fa-9b60dc331fec&quot;</span>,<span class="string">&quot;354f9ef4-1481-469a-9e6a-9cef076b4ac0&quot;</span>]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">å°†clients_list æŒ‰core_num éšæœºåˆ†å¸ƒclientæ•°é‡ï¼Œè¿™é‡Œcore=4ï¼Œ</span></span><br><span class="line"><span class="string">é‚£ä¹ˆä¼šå°† clients åˆ†æˆå››ç»„ï¼Œfor å¾ªç¯æ¯æ¬¡è°ƒç”¨ chunksï¼Œéƒ½å–ä¸€ç»„ç»™ for clients_ï¼Œ</span></span><br><span class="line"><span class="string">ç„¶å for clients_ å¯ä»¥æ‹¿å»åšäº‹ã€‚</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">chunks</span>(<span class="params">clients_list, num</span>):</span><br><span class="line">    d, r = <span class="built_in">divmod</span>(<span class="built_in">len</span>(clients_list), num)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;d and r: <span class="subst">&#123;d&#125;</span>, <span class="subst">&#123;r&#125;</span>&quot;</span>)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(num):</span><br><span class="line">        si = (d + <span class="number">1</span>) * (i <span class="keyword">if</span> i &lt; r <span class="keyword">else</span> r) + d * (<span class="number">0</span> <span class="keyword">if</span> i &lt; r <span class="keyword">else</span> i - r)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;si: <span class="subst">&#123;si&#125;</span>&quot;</span>)</span><br><span class="line">        <span class="keyword">yield</span> clients_list[si:si + (d + <span class="number">1</span> <span class="keyword">if</span> i &lt; r <span class="keyword">else</span> d)]</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> clients_ <span class="keyword">in</span> chunks(clients, core_num):</span><br><span class="line">    <span class="keyword">from</span> pdb <span class="keyword">import</span> set_trace</span><br><span class="line">    set_trace()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;clients_: <span class="subst">&#123;clients_&#125;</span>&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;chunks: <span class="subst">&#123;chunks&#125;</span>&quot;</span>)</span><br><span class="line">```    </span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">```bash</span><br><span class="line"></span><br><span class="line">    corenum: <span class="number">8</span></span><br><span class="line">    d <span class="keyword">and</span> r: <span class="number">1</span>, <span class="number">2</span></span><br><span class="line">    si: <span class="number">0</span></span><br><span class="line">    ipdb&gt; l</span><br><span class="line">    ipdb&gt; clients_</span><br><span class="line">    [<span class="string">&#x27;eb380adf-8fe8-45dd-825f-4e7da940eca9&#x27;</span>, <span class="string">&#x27;990f5d3c-5e5f-4af8-b68b-1329272ac3b4&#x27;</span>]</span><br><span class="line">    ipdb&gt; n</span><br><span class="line">    clients_: [<span class="string">&#x27;eb380adf-8fe8-45dd-825f-4e7da940eca9&#x27;</span>, <span class="string">&#x27;990f5d3c-5e5f-4af8-b68b-1329272ac3b4&#x27;</span>]</span><br><span class="line">    ipdb&gt; n</span><br><span class="line">    chunks: &lt;function chunks at <span class="number">0x10c2f6310</span>&gt;</span><br><span class="line">    ipdb&gt; s</span><br><span class="line">    ipdb&gt; n</span><br><span class="line">    ipdb&gt; i</span><br><span class="line">    <span class="number">1</span></span><br><span class="line">    ipdb&gt; n</span><br><span class="line">    ipdb&gt; n</span><br><span class="line">    si: <span class="number">2</span></span><br><span class="line">    ipdb&gt; si=<span class="number">2</span>,  i1&lt;r2æ‰€ä»¥è¿”å›d+<span class="number">1</span>=<span class="number">3</span>, ä¹Ÿå°±æ˜¯è¿”å›clients_list[<span class="number">2</span>:<span class="number">2</span>+<span class="number">3</span>],å³ç¬¬<span class="number">3</span>ï¼Œ<span class="number">4</span>ï¼Œ<span class="number">5</span>ä¸ªå…ƒç´ ]</span><br><span class="line">    ipdb&gt; n</span><br><span class="line">    &gt; [<span class="number">0</span>;32m&lt;ipython-<span class="built_in">input</span>-<span class="number">1</span>-fca5ddbf22de&gt;[0m(<span class="number">30</span>)[<span class="number">0</span>;36m&lt;module&gt;[<span class="number">0</span>;34m()[0m</span><br><span class="line">    ipdb&gt; n</span><br><span class="line">    clients_: [<span class="string">&#x27;15cc0813-8a2e-4a90-9ba6-7a8ddf3bd32d&#x27;</span>, <span class="string">&#x27;5bf8729e-fb28-476e-b054-5a0656dc4fed&#x27;</span>]</span><br><span class="line">    ipdb&gt; s</span><br><span class="line">     ipdb&gt; n</span><br><span class="line">    si: <span class="number">4</span></span><br><span class="line"> </span><br><span class="line">    ipdb&gt; i</span><br><span class="line">    <span class="number">2</span></span><br><span class="line">    ipdb&gt; si=<span class="number">4</span>, i=<span class="number">2</span>ä¸å°äºr=<span class="number">2</span>,äºæ˜¯è¿”å›dï¼Œ[<span class="number">4</span>,<span class="number">6</span>] ç¬¬<span class="number">5</span>ï¼Œ<span class="number">6</span>ä¸ªå…ƒç´ </span><br><span class="line">    *** SyntaxError: cannot assign to literal</span><br><span class="line">    ipdb&gt; n</span><br><span class="line">    clients_: [<span class="string">&#x27;27a1e6bb-439b-475e-bbcf-9744622992cd&#x27;</span>]   </span><br><span class="line">    ipdb&gt; å“¦ ä¸Šä¸€æ­¥åº”è¯¥æ˜¯[<span class="number">4</span>,<span class="number">5</span>] d=<span class="number">1</span>è®°é”™äº†</span><br><span class="line">    *** SyntaxError: invalid syntax</span><br><span class="line">    ipdb&gt; n</span><br><span class="line">    chunks: &lt;function chunks at <span class="number">0x10c2f6310</span>&gt;</span><br><span class="line">    ipdb&gt; s</span><br><span class="line">    --Call--</span><br><span class="line">    &gt; [<span class="number">0</span>;32m&lt;ipython-<span class="built_in">input</span>-<span class="number">1</span>-fca5ddbf22de&gt;[0m(<span class="number">25</span>)[<span class="number">0</span>;36mchunks[<span class="number">0</span>;34m()[0m</span><br><span class="line">    ipdb&gt; n</span><br><span class="line">    ipdb&gt; n</span><br><span class="line">    ipdb&gt; n</span><br><span class="line">    ipdb&gt; n</span><br><span class="line">    si: <span class="number">5</span></span><br><span class="line">    &gt; [<span class="number">0</span>;32m&lt;ipython-<span class="built_in">input</span>-<span class="number">1</span>-fca5ddbf22de&gt;[0m(<span class="number">25</span>)[<span class="number">0</span>;36mchunks[<span class="number">0</span>;34m()[0m</span><br><span class="line">    ipdb&gt; i</span><br><span class="line">    <span class="number">3</span></span><br><span class="line">    ipdb&gt; d</span><br><span class="line">    *** Newest frame</span><br><span class="line">    ipdb&gt; si=<span class="number">5</span>, è¿”å› <span class="number">5</span>+<span class="number">1</span>ï¼Œä¹Ÿå°±æ˜¯[<span class="number">5</span>,<span class="number">6</span>] ä¸€ä¸ªå…ƒç´ </span><br><span class="line">    *** SyntaxError: invalid syntax</span><br><span class="line">    ipdb&gt; n</span><br><span class="line">    ipdb&gt; n</span><br><span class="line">    clients_: [<span class="string">&#x27;6491b68c-5360-4638-8194-da9f5431c4eb&#x27;</span>]</span><br><span class="line">    ipdb&gt; n</span><br><span class="line">    chunks: &lt;function chunks at <span class="number">0x10c2f6310</span>&gt;</span><br><span class="line">    ipdb&gt; s</span><br><span class="line">    ipdb&gt; n</span><br><span class="line">    ipdb&gt; n</span><br><span class="line">    ipdb&gt; n</span><br><span class="line">    ipdb&gt; n</span><br><span class="line">    si: <span class="number">6</span></span><br><span class="line">    ipdb&gt; i</span><br><span class="line">    <span class="number">4</span></span><br><span class="line">    ipdb&gt; [<span class="number">6</span>:<span class="number">6</span>+<span class="number">1</span>]</span><br><span class="line">    *** SyntaxError: invalid syntax</span><br><span class="line">    ipdb&gt; n</span><br><span class="line">    clients_: [<span class="string">&#x27;da2fd513-acdc-48e9-b9fe-c0de13e90eb0&#x27;</span>]</span><br><span class="line">    ipdb&gt; n</span><br><span class="line">    chunks: &lt;function chunks at <span class="number">0x10c2f6310</span>&gt;</span><br><span class="line">    ipdb&gt; n</span><br><span class="line">    ipdb&gt; n</span><br><span class="line">    si: <span class="number">7</span></span><br><span class="line">    ipdb&gt; [<span class="number">7</span>,<span class="number">8</span>]</span><br><span class="line">    [<span class="number">7</span>, <span class="number">8</span>]</span><br><span class="line">    ipdb&gt; n</span><br><span class="line">    ipdb&gt; n</span><br><span class="line">    ipdb&gt; n</span><br><span class="line">    chunks: &lt;function chunks at <span class="number">0x10c2f6310</span>&gt;</span><br><span class="line">    ipdb&gt; n</span><br><span class="line">    si: <span class="number">8</span></span><br><span class="line">    ipdb&gt; [<span class="number">8</span>,<span class="number">9</span>]</span><br><span class="line">    [<span class="number">8</span>, <span class="number">9</span>]</span><br><span class="line">    clients_: [<span class="string">&#x27;d76c8dbe-0821-4736-a4fa-9b60dc331fec&#x27;</span>]</span><br><span class="line"> </span><br><span class="line">    [0m</span><br><span class="line">    ipdb&gt; [<span class="number">9</span>,<span class="number">10</span>] åˆ°è¿™ä¸€æ­¥å°±ç»“æŸå•¦</span><br><span class="line">    *** SyntaxError: invalid syntax</span><br><span class="line">    ipdb&gt; n</span><br><span class="line">    clients_: [<span class="string">&#x27;354f9ef4-1481-469a-9e6a-9cef076b4ac0&#x27;</span>]</span><br><span class="line">    ipdb&gt; åˆ†ç»™äº†<span class="number">8</span>ä¸ªè¿›ç¨‹ï¼Œç¬¬ä¸€ä¸ªè¿›ç¨‹æœ‰<span class="number">3</span>ä¸ªclientè¦æ‰§è¡Œï¼Œå¦å¤–<span class="number">7</span>ä¸ªè¿›ç¨‹æ¯ä¸ªæ‰§è¡Œä¸€ä¸ªclient</span><br><span class="line">    *** SyntaxError: invalid character <span class="string">&#x27;ï¼Œ&#x27;</span> (U+FF0C)</span><br><span class="line">    ipdb&gt; n</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="https://angellaugh.github.io/2023/03/28/openssl_2_signed/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/uploads/avatar.jpg">
      <meta itemprop="name" content="Angellaugh">
      <meta itemprop="description" content="æŠ€æœ¯ï¼Œç”Ÿæ´»ï¼Œè‰ºæœ¯ï¼Œæ—…è¡Œï¼Œéƒ½è®°å½•ä¸‹æ¥">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Angellaugh's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/03/28/openssl_2_signed/" class="post-title-link" itemprop="url">OpenSSL2 self-signed certificate as root CA</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2023-03-28 22:41:02" itemprop="dateCreated datePublished" datetime="2023-03-28T22:41:02+00:00">2023-03-28</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2023-04-11 15:27:23" itemprop="dateModified" datetime="2023-04-11T15:27:23+00:00">2023-04-11</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Teckknowledge/" itemprop="url" rel="index"><span itemprop="name">Teckknowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          Here's something encrypted, password is required to continue reading.
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2023/03/28/openssl_2_signed/#more" rel="contents">
                Read more &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Angellaugh"
      src="/uploads/avatar.jpg">
  <p class="site-author-name" itemprop="name">Angellaugh</p>
  <div class="site-description" itemprop="description">æŠ€æœ¯ï¼Œç”Ÿæ´»ï¼Œè‰ºæœ¯ï¼Œæ—…è¡Œï¼Œéƒ½è®°å½•ä¸‹æ¥</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">20</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">2</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">12</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Angellaugh</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://mist.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Mist</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

</body>
</html>
